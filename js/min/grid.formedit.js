!function(t,a){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common","./grid.filter"],function(e){return a(e,t,t.document)}):"object"==typeof module&&module.exports?module.exports=function(e,t){return e=e||window,void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),require("./grid.base"),require("./jquery.fmatter"),require("./grid.common"),require("./grid.filter"),a(t,e,e.document),t}:a(jQuery,t,t.document)}("undefined"!=typeof window?window:this,function(ee,L,U){"use strict";function te(e,t,a){!0===t[0]&&(a="<span class='"+se("fm-button-icon",a,t[2])+"'></span>","right"===t[1]?e.addClass("fm-button-icon-right").append(a):e.addClass("fm-button-icon-left").prepend(a))}function ae(e){return de.call(this,"states."+e)}function ie(e){e.find("tr[data-rowpos]").each(function(){var e=0;ee(this).children("td").each(function(){"hidden"!==ee(this).css("visibility")&&e++}),e||ee(this).hide()})}function oe(e){return"&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0)}var le=ee.jgrid,re=le.jqID,ne=ee.fn.jqGrid,de=ne.getGuiStyles,se=le.mergeCssClasses,ce=le.hasOneFromClasses,ue=le.feedback,F=le.fullBoolFeedback,pe=le.builderFmButon;le.extend({searchGrid:function(C){return this.each(function(){var o,l,a,t,i,e,r,n,d,s,c,u,p,h,f,m,g,v,b,y,w,x=this,D=ee(x),j=x.p;function k(e){d("beforeShow",e)&&(ee(t).data("onClose",o.onClose),le.viewModal.call(x,t,{gbox:i,jqm:o.jqModal,overlay:o.overlay,modal:o.modal,overlayClass:o.overlayClass,toTop:o.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),d("afterShow",e))}x.grid&&null!=j&&(o=ee.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:j.prmNames.filters,loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},ne.getGridRes.call(D,"search"),le.search||{},j.searching||{},C||{}),l="fbox_"+j.id,y=o.commonIconClass,t="#"+re((a={themodal:"searchmod"+l,modalhead:"searchhd"+l,modalcontent:"searchcnt"+l,resizeAlso:l}).themodal),i=j.gBox,e=j.gView,r=ee.each,n=j.postData[o.sFilter],d=function(){var e=ee.makeArray(arguments);return e.unshift("Search"),e.unshift("Filter"),e.unshift(o),ue.apply(x,e)},s=function(){le.hideModal(t,{gb:i,jqm:o.jqModal,onClose:o.onClose,removemodal:o.removemodal})},"string"==typeof n&&(n=""!==ee.jgrid.trim(n)?ee.parseJSON(n):void 0),ee(t).remove(),void 0!==ee(t)[0]?k(ee("#fbox_"+re(j.id))):(c=ee("<div><div id='"+l+"' class='"+de.call(x,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(e),"rtl"===j.direction&&c.attr("dir","rtl"),p=u="",f=!1,m=-1,g=ee.extend([],j.colModel),v=pe.call(x,l+"_search",o.Find,se(y,o.findDialogIcon),"right"),b=pe.call(x,l+"_reset",o.Reset,se(y,o.resetDialogIcon),"left"),o.showQuery&&(u=pe.call(x,l+"_query","Query",se(y,o.queryDialogIcon),"left")+"&#160;"),o.searchForAdditionalProperties&&r(j.additionalProperties,function(){var e="string"==typeof this?{name:this}:this;e.label||(e.label=e.name),e.isAddProp=!0,g.push(e)}),o.columns.length?(g=o.columns,h=g[m=0].index||g[0].name):r(g,function(e,t){var a,i;t.label||(t.label=t.isAddProp?t.name:j.colNames[e]),!f&&(a=void 0===t.search||t.search,i=!0===t.hidden,t.searchoptions&&!0===t.searchoptions.searchhidden&&a||a&&!i)&&(f=!0,h=t.index||t.name,m=e)}),(!n&&h||!1===o.multipleSearch)&&(y="eq",0<=m&&g[m].searchoptions&&g[m].searchoptions.sopt?y=g[m].searchoptions.sopt[0]:o.sopt&&o.sopt.length&&(y=o.sopt[0]),n={groupOp:"AND",rules:[{field:h,op:y,data:""}]}),f=!1,o.tmplNames&&o.tmplNames.length&&(f=!0,p=o.tmplLabel+"<select class='ui-template'><option value='default'>Default</option>",r(o.tmplNames,function(e,t){p+="<option value='"+e+"'>"+t+"</option>"}),p+="</select>"),y="<div class='"+de.call(x,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+l+"_2'><tbody><tr><td colspan='2'><hr class='"+de.call(x,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+j.direction+"'  style='float:"+("rtl"===j.direction?"right":"left")+";'>"+b+p+"</td><td class='EditButton EditButton-"+j.direction+"'>"+u+v+"</td></tr></tbody></table></div>",l=re(l),o.gbox=i,o.height="auto",ee(l="#"+l).jqFilter({columns:g,filter:o.loadDefaults?n:null,showQuery:o.showQuery,errorcheck:o.errorcheck,sopt:o.sopt,groupButton:o.multipleGroup,ruleButtons:o.multipleSearch,afterRedraw:o.afterRedraw,ops:o.odata,cops:j.customSortOperations,operands:o.operands,ajaxSelectOptions:j.ajaxSelectOptions,groupOps:o.groupOps,onChange:function(e,t){e.showQuery&&ee(".query",t).text(t.toUserFriendlyString()),F.call(x,o.afterChange,"jqGridFilterAfterChange",ee(l),o,e,t)},direction:j.direction,id:j.id}),c.append(y),f&&o.tmplFilters&&o.tmplFilters.length&&ee(".ui-template",c).on("change",function(){var e=ee(this).val();return"default"===e?ee(l).jqFilter("addFilter",n):ee(l).jqFilter("addFilter",o.tmplFilters[parseInt(e,10)]),!1}),!0===o.multipleGroup&&(o.multipleSearch=!0),d("onInitialize",ee(l)),o.layer?le.createModal.call(x,a,c,o,e,ee(i)[0],"#"+re(o.layer),{position:"relative"}):le.createModal.call(x,a,c,o,e,ee(i)[0]),(o.searchOnEnter||o.closeOnEscape)&&ee(t).keydown(function(e){var t=ee(e.target);return!o.searchOnEnter||13!==e.which||t.hasClass("add-group")||t.hasClass("add-rule")||t.hasClass("delete-group")||t.hasClass("delete-rule")||t.hasClass("fm-button")&&t.is("[id$=_query]")?o.closeOnEscape&&27===e.which?(ee("#"+re(a.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:(ee(l+"_search").click(),!1)}),u&&ee(l+"_query").on("click",function(){return ee(".queryresult",c).toggle(),!1}),void 0===o.stringResult&&(o.stringResult=o.multipleSearch),ee(l+"_search").on("click",function(){var e={},t="",a=ee(l),i=a.find(".input-elm");if((i=i.filter(":focus")?i.filter(":focus"):i).change(),i=a.jqFilter("filterData"),o.errorcheck&&(a[0].hideError(),o.showQuery||a.jqFilter("toSQLString"),a[0].p.error))a[0].showError();else{if(o.stringResult||"local"===j.datatype){try{t=JSON.stringify(i)}catch(e){}"string"==typeof t&&(e[o.sFilter]=t,r([o.sField,o.sValue,o.sOper],function(){e[this]=""}))}else o.multipleSearch?(e[o.sFilter]=i,r([o.sField,o.sValue,o.sOper],function(){e[this]=""})):(e[o.sField]=i.rules[0].field,e[o.sValue]=i.rules[0].data,e[o.sOper]=i.rules[0].op,e[o.sFilter]="");ee.extend(j.postData,e),F.call(x,o.onSearch,"jqGridFilterSearch",j.filters)&&(j.search=!0,D.trigger("reloadGrid",[ee.extend({page:1},o.reloadGridSearchOptions||{})])),o.closeAfterSearch&&s()}return!1}),ee(l+"_reset").on("click",function(){var e={},t=ee(l);return j.search=!1,!(j.resetsearch=!0)===o.multipleSearch?e[o.sField]=e[o.sValue]=e[o.sOper]="":e[o.sFilter]="",t[0].resetFilter(),f&&ee(".ui-template",c).val("default"),ee.extend(j.postData,e),F.call(x,o.onReset,"jqGridFilterReset")&&D.trigger("reloadGrid",[ee.extend({page:1},o.reloadGridResetOptions||{})]),o.closeAfterReset&&s(),!1}),k(ee(l)),w=ae.call(x,"hover"),ee(".fm-button:not(."+ae.call(x,"disabled").split(" ").join(".")+")",c).hover(function(){ee(this).addClass(w)},function(){ee(this).removeClass(w)})))})},editGridRow:function($,Z){return this.each(function(){var m=this,g=ee(m),v=m.p;if(m.grid&&null!=v&&$){var b,y,w=v.id,n=ne.getGridRes,x=ne.setSelection,D=ee.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",labelswidth:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:de.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"],saveui:"enable",savetext:n.call(g,"defaults.savetext")||"Saving..."},n.call(g,"edit"),le.edit,v.formEditing||{},Z||{}),j="FrmGrid_"+w,e=j,t="TblGrid_"+w,k="#"+re(t),C=k+"_2",N={themodal:"editmod"+w,modalhead:"edithd"+w,modalcontent:"editcnt"+w,resizeAlso:j},a="#"+re(N.themodal),i=v.gBox,F=v.colModel,B=v.iColByName,o=1,l=0,r=D.commonIconClass,_=function(){le.hideModal(a,{gb:i,jqm:D.jqModal,onClose:D.onClose,removemodal:D.removemodal})},s=n.call(g,"errors.errcap"),d=function(){var e=ee.makeArray(arguments);return e.unshift(""),e.unshift("AddEdit"),e.unshift(D),ue.apply(m,e)},P=ae.call(m,"hover"),S=ae.call(m,"disabled"),c=ae.call(m,"select"),R=ae.call(m,"active"),u=ae.call(m,"error"),M=(ee(a).remove(),j="#"+re(j),"new"===$?($="_empty",y="add",D.caption=D.addCaption):(D.caption=D.editCaption,y="edit"),!0),p=(!D.checkOnUpdate||!0!==D.jqModal&&void 0!==D.jqModal||D.modal||(M=!1),isNaN(D.dataheight)?D.dataheight:D.dataheight+"px"),h=isNaN(D.datawidth)?D.datawidth:D.datawidth+"px",e=ee("<form name='FormPost' id='"+e+"' class='FormGrid' onSubmit='return false;' style='width:"+h+";overflow:auto;position:relative;height:"+p+";'></form>").data("disabled",!1),f=ee("<table id='"+t+"' class='EditTable'><tbody></tbody></table>"),h=(ee(F).each(function(){var e=this.formoptions;o=Math.max(o,e&&e.colpos||0),l=Math.max(l,e&&e.rowpos||0)}),ee(e).append(f),ee("<tr id='FormError' style='display:none'><td class='"+u+"' colspan='"+2*o+"'>&#160;</td></tr>"));if(h[0].rp=0,ee(f).append(h),(h=ee("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*o+"'>"+(D.topinfo||"&#160;")+"</td></tr>"))[0].rp=0,ee(f).append(h),d("beforeInitData",e,y)){null!=(p=le.detectRowEditing.call(m,$))&&("inlineEditing"===p.mode?ne.restoreRow.call(g,$):(p=p.savedRow,u=m.rows[p.id],ne.restoreCell.call(g,p.id,p.ic),ee(u.cells[p.ic]).removeClass("edit-cell "+c),ee(u).addClass(c).attr({"aria-selected":"true",tabindex:"0"})));for(var h="rtl"===v.direction,p=h?"nData":"pData",u=h?"pData":"nData",E=$,c=f,O=o,q=0,T=!1,A=ee(c),z="<td class='CaptionTD"+((c=String(D.labelswidth)+(!D.labelswidth||isNaN(D.labelswidth)?"":"px"))?"' style='width:"+c+";":"")+"'>&#160;</td><td class='DataTD'>&#160;</td>",V="",L=1;L<=O;L++)V+=z;"_empty"!==E&&(T=ne.getInd.call(g,E)),ee(F).each(function(e){var t,a,i,o=this,l=o.name,r=o.editable,n=!1,d=!1,s="_empty"===E?"addForm":"editForm";switch(ee.jgrid.isFunction(r)&&(r=r.call(m,{rowid:E,iCol:e,iRow:T,cmName:l,cm:o,mode:s})),t=!(o.editrules&&!0===o.editrules.edithidden||!0!==o.hidden&&"hidden"!==r),String(r).toLowerCase()){case"hidden":r=!0;break;case"disabled":n=r=!0;break;case"readonly":d=r=!0}if("cb"!==l&&"subgrid"!==l&&!0===r&&"rn"!==l){if(!1===T)a="";else{u=ee(m.rows[T].cells[e]);try{a=ee.unformat.call(m,u,{rowId:E,colModel:o},e)}catch(e){a=o.edittype&&"textarea"===o.edittype?u.text():u.html()}oe(a)&&(a="")}var c,u=ee.extend({},o.editoptions||{},{id:l,name:l,rowId:E,mode:s,cm:o,iCol:e}),s=ee.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},o.formoptions||{}),p=parseInt(s.rowpos,10)||q+1,h=parseInt(2*(parseInt(s.colpos,10)||1),10),f=("_empty"===E&&u.defaultValue&&(a=ee.jgrid.isFunction(u.defaultValue)?u.defaultValue.call(m):u.defaultValue),o.edittype||(o.edittype="text"),v.autoEncodeOnEdit&&(a=le.oldDecodePostedData(a)),i=le.createEl.call(m,o.edittype,u,a,!1,ee.extend({},le.ajaxOptions,v.ajaxSelectOptions||{})),(D.checkOnSubmit||D.checkOnUpdate)&&(D._savedData[l]=a),ee(i).addClass("FormElement"),-1<ee.inArray(o.edittype,["text","textarea","checkbox","password","select"])&&ee(i).addClass(de.call(m,"dialog.dataField")),c=A.find("tr[data-rowpos="+p+"]"),s.rowabove&&(f=ee("<tr><td class='contentinfo' colspan='"+2*O+"'>"+s.rowcontent+"</td></tr>"),A.append(f),f[0].rp=p),0===c.length&&(c=ee("<tr data-rowpos='"+p+"'></tr>").addClass("FormData").attr("id","tr_"+l),ee(c).append(V),A.append(c),c[0].rp=p),ee("td:eq("+(h-2)+")",c[0])),p=ee("td:eq("+(h-1)+")",c[0]),h=(f.html(void 0===s.label?v.colNames[e]:s.label||"&#160;"),p[oe(p.html())?"html":"append"](s.elmprefix));h.append(i).append(s.elmsuffix),"INPUT"===i.tagName.toUpperCase()&&o.createColumnIndex&&u.generateDatalist&&null!=(c=g.jqGrid("generateDatalistFromColumnIndex",o.name))&&0<c.length&&(ee(i).attr("list","dl_"+i.id),h.append(c.attr("id","dl_"+i.id))),n?(f.addClass(S),p.addClass(S),ee(i).prop("readonly",!0),ee(i).prop("disabled",!0)):d&&ee(i).prop("readonly",!0),"custom"===o.edittype&&ee.jgrid.isFunction(u.custom_value)&&u.custom_value.call(m,ee("#"+re(l),j),"set",a),le.bindEv.call(m,i,u),t&&f.add(p).css("visibility","hidden"),q,q++}}),ie(A),0<q&&((c=ee("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*O-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+w+"_id' value='"+E+"'/></td></tr>"))[0].rp=q+999,A.append(c),D.checkOnSubmit||D.checkOnUpdate)&&(D._savedData[w+"_id"]=E);var G,c=pe.call(m,p,"",se(r,D.prevIcon),"","left"),p=pe.call(m,u,"",se(r,D.nextIcon),"","right"),u=pe.call(m,"sData",D.bSubmit),U=pe.call(m,"cData",D.bCancel),t="<div class='"+de.call(m,"dialog.footer")+"'><table class='EditTable' id='"+t+"_2'><tbody><tr><td colspan='2'><hr class='"+de.call(m,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+v.direction+"'>"+(h?p+c:c+p)+"</td><td class='EditButton EditButton-"+v.direction+"'>"+u+"&#160;"+U+"</td></tr>",H=(t=t+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(D.bottominfo||"&#160;")+"</td></tr>")+"</tbody></table></div>",0<l&&(G=[],ee.each(ee(f)[0].rows,function(e,t){G[e]=t}),G.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),ee.each(G,function(e,t){ee("tbody",f).append(t)})),D.gbox=i,!1),h=(!0===D.closeOnEscape&&(D.closeOnEscape=!1,H=!0),ee("<div></div>").append(ee("<div class='"+de.call(m,"dialog.body")+"'></div>").append(e)).append(t)),e=(le.createModal.call(m,N,h,D,v.gView,ee(i)[0]),D.topinfo&&ee(".tinfo",k).show(),D.bottominfo&&ee(".binfo",C).show(),t=null,ee(a).keydown(function(e){var t,a,i=(e.target.tagName||"").toUpperCase();if(!0===ee(j).data("disabled"))return!1;if(13===e.which&&"TEXTAREA"!==i){if(a=(t=ee(C).find(":focus")).attr("id"),0<t.length&&0<=ee.inArray(a,["pData","nData","cData"]))return t.trigger("click"),!1;if(!0===D.savekey[0]&&13===D.savekey[1])return ee("#sData",C).trigger("click"),!1}return!0===D.savekey[0]&&e.which===D.savekey[1]&&"TEXTAREA"!==i?(ee("#sData",C).trigger("click"),!1):27===e.which?(I()&&H&&_(),!1):!0===D.navkeys[0]?"_empty"===ee("#id_g",k).val()||(e.which===D.navkeys[1]?(ee("#pData",C).trigger("click"),!1):e.which===D.navkeys[2]?(ee("#nData",C).trigger("click"),!1):void 0):void 0}),D.checkOnUpdate&&(ee("a.ui-jqdialog-titlebar-close span",a).removeClass("jqmClose"),ee("a.ui-jqdialog-titlebar-close",a).off("click").click(function(){return I()&&_(),!1})),te(ee("#sData",C),D.saveicon,r),te(ee("#cData",C),D.closeicon,r),(D.checkOnSubmit||D.checkOnUpdate)&&(u=pe.call(m,"sNew",D.bYes),p=pe.call(m,"nNew",D.bNo),U=pe.call(m,"cNew",D.bExit),c=D.zIndex||999,ee("<div class='"+D.overlayClass+" jqgrid-overlay confirm' style='z-index:"+ ++c+";display:none;'>&#160;</div><div class='"+de.call(m,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(1+c)+"'>"+D.saveData+"<br/><br/>"+u+p+U+"</div>").insertAfter(j),ee("#sNew",a).click(function(){return W(),ee(j).data("disabled",!1),ee(".confirm",a).hide(),!1}),ee("#nNew",a).click(function(){return ee(".confirm",a).hide(),ee(j).data("disabled",!1),setTimeout(function(){ee(j).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()},0),!1}),ee("#cNew",a).click(function(){return ee(".confirm",a).hide(),ee(j).data("disabled",!1),_(),!1})),d("onInitializeForm",ee(j),y),"_empty"!==$&&D.viewPagerButtons?ee("#pData,#nData",C).show():ee("#pData,#nData",C).hide(),d("beforeShowForm",ee(j),y),ee(a).data("onClose",D.onClose),le.viewModal.call(m,a,{gbox:i,jqm:D.jqModal,overlay:D.overlay,modal:D.modal,overlayClass:D.overlayClass,toTop:D.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),M||ee("."+re(D.overlayClass)).click(function(){return I()&&_(),!1}),ee(".fm-button",a).hover(function(){ee(this).addClass(P)},function(){ee(this).removeClass(P)}),ee("#sData",C).click(function(){return b={},ee("#FormError",k).hide(),Q(),"_empty"!==b[w+"_id"]&&!0===D.checkOnSubmit&&Y(b,D._savedData)?(ee(j).data("disabled",!0),ee(".confirm",a).show()):W(),!1}),ee("#cData",C).click(function(){return I()&&_(),!1}),ee("#nData",C).click(function(){if(I()){ee("#FormError",k).hide();var e=J();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){if(!d("onclickPgButtons","next",ee(j),e[1][e[0]]))return!1;K(e[1][e[0]+1],j),x.call(g,e[1][e[0]+1]),d("afterclickPgButtons","next",ee(j),e[1][e[0]+1]),X(e[0]+1,e)}}return!1}),ee("#pData",C).click(function(){if(I()){ee("#FormError",k).hide();var e=J();if(-1!==e[0]&&e[1][e[0]-1]){if(!d("onclickPgButtons","prev",ee(j),e[1][e[0]]))return!1;if(ce(ee("#"+re(e[1][e[0]-1])),S))return!1;K(e[1][e[0]-1],j),x.call(g,e[1][e[0]-1]),d("afterclickPgButtons","prev",ee(j),e[1][e[0]-1]),X(e[0]-1,e)}}return!1}),d("afterShowForm",ee(j),y),J());X(e[0],e)}}function Q(){ee(k+" > tbody > tr > td .FormElement").each(function(){var e,t=ee(".customelement",this),a=t.length?t.attr("name"):this.name,i=B[a],o=void 0!==i&&F[i]||{},l=o.editoptions||{};if(t.length&&ee.jgrid.isFunction(l.custom_value)){try{if(b[a]=l.custom_value.call(m,ee("#"+re(a),k),"get"),void 0===b[a])throw"e1"}catch(e){"e1"===e?le.info_dialog.call(m,s,"function 'custom_value' "+D.msg.novalue,D.bClose):le.info_dialog.call(m,s,e.message,D.bClose)}return!0}switch(e=ee(this)[0].type){case"checkbox":var r="string"==typeof l.value?l.value.split(":"):["Yes","No"];b[a]=ee(this).is(":checked")?r[0]:r[1];break;case"select-one":b[a]=ee("option:selected",this).val();break;case"select-multiple":b[a]=ee(this).val(),b[a]=b[a]?b[a].join(","):"";ee("option:selected",this).each(function(e,t){e,ee(t).text()});break;case"date":b[a]=ee(this).val(),3===String(b[a]).split("-").length&&(r=(o.formatoptions||{}).newformat||n.call(g,"formatter.date.newformat"),b[a]=le.parseDate.call(g[0],"Y-m-d",b[a],r));break;default:void 0!==e&&ee.inArray(e,D.skipPostTypes)<0&&(b[a]=ee(this).val())}})}function K(e,o){var l,t,a,i,r,n=0,d=((D.checkOnSubmit||D.checkOnUpdate)&&(D._savedData={},D._savedData[w+"_id"]=e),v.colModel);"_empty"===e?(ee(d).each(function(){l=this.name,i=ee.extend({},this.editoptions||{}),(t=ee("#"+re(l),o))&&t.length&&null!==t[0]&&(a="","custom"===this.edittype&&ee.jgrid.isFunction(i.custom_value)?i.custom_value.call(m,t,"set",a):i.defaultValue?(a=ee.jgrid.isFunction(i.defaultValue)?i.defaultValue.call(m):i.defaultValue,"checkbox"===t[0].type?(i=a.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==i?(t[0].checked=!0,t[0].defaultChecked=!0,t[0].value=a):(t[0].checked=!1,t[0].defaultChecked=!1):t.val(a)):"checkbox"===t[0].type?(t[0].checked=!1,t[0].defaultChecked=!1,a=ee(t).data("offval")):t[0].type&&"select"===t[0].type.substr(0,6)?t[0].selectedIndex=0:t.val(a),!0!==D.checkOnSubmit&&!D.checkOnUpdate||(D._savedData[l]=a))}),ee("#id_g",o).val(e)):(r=ne.getInd.call(g,e,!0))&&(ee(r.cells).filter("td[role=gridcell]").each(function(a){var t;if("cb"!==(l=d[a].name)&&"subgrid"!==l&&"rn"!==l&&!0===d[a].editable){try{t=ee.unformat.call(m,ee(this),{rowId:e,colModel:d[a]},a)}catch(e){t="textarea"===d[a].edittype?ee(this).text():ee(this).html()}switch(v.autoEncodeOnEdit&&(t=le.oldDecodePostedData(t)),!0!==D.checkOnSubmit&&!D.checkOnUpdate||(D._savedData[l]=t),l="#"+re(l),d[a].edittype){case"password":case"text":case"button":case"image":case"textarea":oe(t)&&(t=""),ee(l,o).val(t);break;case"select":var i=t.split(","),i=ee.map(i,function(e){return ee.jgrid.trim(e)});ee(l+" option",o).each(function(){var e=this,t=ee(e),t=ee.jgrid.trim(t.val());if(d[a].editoptions.multiple||i[0]!==t?d[a].editoptions.multiple&&-1<(t=ee.inArray(t,i))?(i.splice(t,1),e.selected=!0):e.selected=!1:(i.splice(0,1),e.selected=!0),0===i.length)return!1}),0<i.length&&ee(l+" option",o).each(function(){var e=ee(this),e=ee.jgrid.trim(e.text());if(d[a].editoptions.multiple||ee.jgrid.trim(t)!==e&&i[0]!==e?d[a].editoptions.multiple&&-1<(e=ee.inArray(e,i))&&(i.splice(e,1),this.selected=!0):(i.splice(0,1),this.selected=!0),0===i.length)return!1});break;case"checkbox":t=String(t),t=d[a].editoptions&&d[a].editoptions.value?d[a].editoptions.value.split(":")[0]===t:(t=t.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==t,ee(l,o).prop({checked:t,defaultChecked:t});break;case"custom":try{if(!d[a].editoptions||!ee.jgrid.isFunction(d[a].editoptions.custom_value))throw"e1";d[a].editoptions.custom_value.call(m,ee(l,o),"set",t)}catch(e){"e1"===e?le.info_dialog.call(m,s,"function 'custom_value' "+D.msg.nodefined,D.bClose):le.info_dialog.call(m,s,e.message,D.bClose)}}n++}}),0<n)&&ee("#id_g",k).val(e)}function W(){var o,l,e,t,a,i,r,n,d=[!0,"",""],s=d,c={},u=v.prmNames,p=ne.getInd.call(g,$),h=!1===p?null:m.rows[p],f=g.triggerHandler("jqGridAddEditBeforeCheckValues",[b,ee(j),y]);for(e in f&&"object"==typeof f&&(b=f),p=!1===p?-1:p,b=ee.jgrid.isFunction(D.beforeCheckValues)&&(f=D.beforeCheckValues.call(m,b,ee(j),y))&&"object"==typeof f?f:b)if(b.hasOwnProperty(e)&&(i=v.iColByName[e],!1===(s=null!=(s=le.checkValues.call(m,b[e],e,void 0,void 0,{oldValue:"_empty"===$?null:ne.getCell.call(g,$,i),newValue:b[e],cmName:e,rowid:$,cm:F[i],iCol:i,iRow:p,tr:h,td:null==h?null:h.cells[i],mode:"_empty"===$?"addForm":"editForm"}))&&!0!==s?s:d)[0]))break;if(r=D.url||v.editurl,ee.each(F,function(e,t){var a=t.name;b.hasOwnProperty(a)&&("date"!==t.formatter||null!=t.formatoptions&&!0===t.formatoptions.sendFormatted||(b[a]=ee.unformat.date.call(m,b[a],t)),"clientArray"!==r)&&t.editoptions&&!0===t.editoptions.NullIfEmpty&&""===b[a]&&(b[a]="null")}),s[0]&&(void 0===(c=g.triggerHandler("jqGridAddEditClickSubmit",[D,b,y]))&&ee.jgrid.isFunction(D.onclickSubmit)&&(c=D.onclickSubmit.call(m,D,b,y)||{}),(s=null!=(s=g.triggerHandler("jqGridAddEditBeforeSubmit",[b,ee(j),y]))&&!0!==s?s:d)[0])&&ee.jgrid.isFunction(D.beforeSubmit)&&(null!=(s=D.beforeSubmit.call(m,b,ee(j),y))&&!0!==s||(s=d)),s[0]&&!D.processing){if(D.processing=!0,ee("#sData",C).addClass(R),f=D.url||v.editurl,l=u.oper,o="clientArray"===f&&!1!==v.keyName?v.keyName:u.id,b[l]="_empty"===ee.jgrid.trim(b[w+"_id"])?u.addoper:u.editoper,(b[l]!==u.addoper||void 0===b[o])&&(b[o]=b[w+"_id"]),delete b[w+"_id"],b=ee.extend(b,D.editData,c),!0===v.treeGrid)for(t in b[l]===u.addoper&&(n=v.selrow,c="adjacency"===v.treeGridModel?v.treeReader.parent_id_field:"parent_id",b[c]=n),v.treeReader)v.treeReader.hasOwnProperty(t)&&(a=v.treeReader[t],!b.hasOwnProperty(a)||b[l]===u.addoper&&"parent_id_field"===t||delete b[a]);b[o]=le.stripPref(v.idPrefix,b[o]),v.autoEncodeOnEdit&&ee.each(b,function(e,t){ee.jgrid.isFunction(t)||(b[e]=le.oldEncodePostedData(t))});c=ee.extend({url:ee.jgrid.isFunction(f)?f.call(m,b[o],y,b,D):f,type:ee.jgrid.isFunction(D.mtype)?D.mtype.call(m,y,D,b[o],b):D.mtype,data:le.serializeFeedback.call(m,(ee.jgrid.isFunction(D.serializeEditData)?D:v).serializeEditData,"jqGridAddEditSerializeEditData",b),complete:function(e,t){if(g.jqGrid("progressBar",{method:"hide",loadtype:D.saveui}),ee("#sData",C).removeClass(R),b[o]=ee("#id_g",k).val(),300<=e.status&&304!==e.status||0===e.status&&4===e.readyState?(s[0]=!1,s[1]=g.triggerHandler("jqGridAddEditErrorTextFormat",[e,y]),ee.jgrid.isFunction(D.errorTextFormat)?s[1]=D.errorTextFormat.call(m,e,y):s[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):(s=null!=(s=g.triggerHandler("jqGridAddEditAfterSubmit",[e,b,y]))&&!0!==s?s:d)[0]&&ee.jgrid.isFunction(D.afterSubmit)&&(null!=(s=D.afterSubmit.call(m,e,b,y))&&!0!==s||(s=d)),!1===s[0])ee("#FormError>td",k).html(s[1]),ee("#FormError",k).show();else{v.autoEncodeOnEdit&&ee.each(b,function(e,t){b[e]=le.oldDecodePostedData(t)});var a,i,t=[ee.extend({},D.reloadGridOptions||{})];if(b[l]===u.addoper?(s[2]||(s[2]=le.randId()),null==b[o]||"_empty"===b[o]||b[l]===u.addoper?b[o]=s[2]:s[2]=b[o],D.reloadAfterSubmit?g.trigger("reloadGrid",t):!0===v.treeGrid?ne.addChildNode.call(g,s[2],n,b):ne.addRowData.call(g,s[2],b,D.addedrow),D.closeAfterAdd?(!0!==v.treeGrid&&x.call(g,s[2]),_()):D.clearAfterAdd&&K("_empty",j)):(D.reloadAfterSubmit?(g.trigger("reloadGrid",t),D.closeAfterEdit||setTimeout(function(){x.call(g,b[o])},1e3)):(!0===v.treeGrid?ne.setTreeRow:ne.setRowData).call(g,b[o],b),D.closeAfterEdit&&_()),ee.jgrid.isFunction(D.afterComplete)&&(a=e,setTimeout(function(){g.triggerHandler("jqGridAddEditAfterComplete",[a,b,ee(j),y]),D.afterComplete.call(m,a,b,ee(j),y),a=null},50)),D.checkOnSubmit||D.checkOnUpdate)if(ee(j).data("disabled",!1),"_empty"!==D._savedData[w+"_id"])for(i in D._savedData)D._savedData.hasOwnProperty(i)&&b[i]&&(D._savedData[i]=b[i])}D.processing=!1;try{ee(j).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()}catch(e){}}},le.ajaxOptions,D.ajaxEditOptions);c.url||D.useDataProxy||(ee.jgrid.isFunction(v.dataProxy)?D.useDataProxy=!0:(s[0]=!1,s[1]+=" "+le.errors.nourl)),s[0]&&(g.jqGrid("progressBar",{method:"show",loadtype:D.saveui,htmlcontent:D.savetext}),D.useDataProxy?!1===(f=void 0===(f=v.dataProxy.call(m,c,"set_"+w))?[!0,""]:f)[0]?(s[0]=!1,s[1]=f[1]||"Error deleting the selected row!"):(c.data.oper===u.addoper&&D.closeAfterAdd&&_(),c.data.oper===u.editoper&&D.closeAfterEdit&&_()):"clientArray"===c.url?(D.reloadAfterSubmit=!1,b=c.data,c.complete({status:200,statusText:""},"")):ee.ajax(c))}!1===s[0]&&(ee("#FormError>td",k).html(s[1]),ee("#FormError",k).show())}function Y(e,t){var a,i=!1;for(a in e)if(e.hasOwnProperty(a)&&String(e[a])!==String(t[a])){i=!0;break}return i}function I(){var e=!0;return ee("#FormError",k).hide(),D.checkOnUpdate&&(b={},Q(),Y(b,D._savedData))&&(ee(j).data("disabled",!0),ee(".confirm",a).show(),e=!1),e}function X(e,t){var a=t[1].length-1;0===e||void 0!==t[1][e-1]&&ce(ee("#"+re(t[1][e-1])),S)?ee("#pData",C).addClass(S):ee("#pData",C).removeClass(S),e===a||void 0!==t[1][e+1]&&ce(ee("#"+re(t[1][e+1])),S)?ee("#nData",C).addClass(S):ee("#nData",C).removeClass(S)}function J(){var e=ne.getDataIDs.call(g),t=ee("#id_g",k).val();return[ee.inArray(t,e),e]}})},viewGridRow:function(W,Y){return this.each(function(){var l=this,o=ee(l),r=l.p;if(l.grid&&null!=r&&W){var e=r.id,i=ee.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},ne.getGridRes.call(o,"view"),le.view||{},r.formViewing||{},Y||{}),n="#ViewGrid_"+re(e),d="#ViewTbl_"+re(e),s=d+"_2",t="ViewGrid_"+e,a="ViewTbl_"+e,c=i.commonIconClass,e={themodal:"viewmod"+e,modalhead:"viewhd"+e,modalcontent:"viewcnt"+e,resizeAlso:t},u="#"+re(e.themodal),p=r.gBox,h=r.colModel,f=1,m=0,g=function(){var e=ee.makeArray(arguments);return e.unshift(""),e.unshift("View"),e.unshift(i),ue.apply(l,e)},v=function(){le.hideModal(u,{gb:p,jqm:i.jqModal,onClose:i.onClose,removemodal:i.removemodal})},N=ae.call(l,"hover"),b=ae.call(l,"disabled"),y=isNaN(i.dataheight)?i.dataheight:i.dataheight+"px",w=isNaN(i.datawidth)?i.datawidth:i.datawidth+"px",t=ee("<div class='"+de.call(l,"dialog.body")+"'><form name='FormPost' id='"+t+"' class='FormGrid' style='width:"+w+";overflow:auto;position:relative;height:"+y+";'></form></div>"),w=t.children("form.FormGrid"),x=ee("<table id='"+a+"' class='EditTable'><tbody></tbody></table>");if(ee(u).remove(),ee(h).each(function(){var e=this.formoptions;f=Math.max(f,e&&e.colpos||0),m=Math.max(m,e&&e.rowpos||0)}),w.append(x),g("beforeInitData",w)){for(var D,j,k,C,B,F,y=W,w=x,_=f,S=0,P=ne.getInd.call(o,y),R=de.call(l,"dialog.viewData"),E=ee(w),M=de.call(l,"dialog.viewLabel"),w=String(i.labelswidth)+(!i.labelswidth||isNaN(i.labelswidth)?"":"px"),z="<td class='"+de.call(l,"dialog.viewCellLabel","CaptionTD form-view-label")+(w?"' style='width:"+w+";":"")+"'>&#160;</td><td class='"+de.call(l,"dialog.viewCellData","DataTD form-view-data")+"'>&#160;</td>",V="",L=["integer","number","currency"],O=0,q=0,U=0;U<_;U++)V+=z;ee(h).each(function(){var e=this;(j=(!e.editrules||!0!==e.editrules.edithidden)&&!0===e.hidden)||"right"!==e.align||(e.formatter&&-1!==ee.inArray(e.formatter,L)?O=Math.max(O,parseInt(e.width,10)):q=Math.max(q,parseInt(e.width,10)))}),C=0!==O?O:0!==q?q:0,ee(h).each(function(e){var t,a,i,o=this;D=o.name,j=(!o.editrules||!0!==o.editrules.edithidden)&&!0===o.hidden,F="boolean"!=typeof o.viewable||o.viewable,"cb"!==D&&"subgrid"!==D&&"rn"!==D&&F&&(F=!1===P?"":le.getDataFieldOfCell.call(l,l.rows[P],e).html(),B="right"===o.align&&0!==C,o=ee.extend({},{rowabove:!1,rowcontent:""},o.formoptions||{}),i=parseInt(o.rowpos,10)||S+1,t=parseInt(2*(parseInt(o.colpos,10)||1),10),o.rowabove&&(a=ee("<tr><td class='contentinfo' colspan='"+2*_+"'>"+o.rowcontent+"</td></tr>"),E.append(a),a[0].rp=i),0===(k=E.find("tr[data-rowpos="+i+"]")).length&&((k=ee("<tr data-rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+D)).append(V),E.append(k),k[0].rp=i),a=void 0===o.label?r.colNames[e]:o.label,i=ee("td:eq("+(t-1)+")",k[0]),(o=ee("td:eq("+(t-2)+")",k[0])).html("<label for='"+D+"'"+(M?" class='"+M+"'>":">")+(a||"&nbsp;")+"</label>"),i[oe(i.html())?"html":"append"]("<span id='"+D+"'"+(R?" class='"+R+"'>":">")+(F||"&nbsp;")+"</span>").attr("id","v_"+D),B&&ee("td:eq("+(t-1)+") span",k[0]).css({"text-align":"right",width:C+"px"}),j&&o.add(i).css("visibility","hidden"),S,S++)}),ie(E),0<S&&((w=ee("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*_-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+y+"'/></td></tr>"))[0].rp=S+99,E.append(w));var T,y="rtl"===r.direction,w=y?"pData":"nData",H=pe.call(l,y?"nData":"pData","",se(c,i.prevIcon),"","left"),w=pe.call(l,w,"",se(c,i.nextIcon),"","right"),Q=pe.call(l,"cData",i.bClose),t=(0<m&&(T=[],ee.each(ee(x)[0].rows,function(e,t){T[e]=t}),T.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),ee.each(T,function(e,t){ee("tbody",x).append(t)})),i.gbox=p,ee("<div></div>").append(t).append("<div class='"+de.call(l,"dialog.footer")+"'><table border='0' class='EditTable' id='"+a+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+r.direction+"' width='"+(i.labelswidth||"auto")+"'>"+(y?w+H:H+w)+"</td><td class='EditButton EditButton-"+r.direction+"'>"+Q+"</td></tr></tbody></table></div>")),a=(le.createModal.call(l,e,t,i,r.gView,ee(r.gView)[0]),i.viewPagerButtons||ee("#pData, #nData",s).hide(),ee(u).keydown(function(e){var t,a;return!0!==ee(n).data("disabled")&&(13===e.which&&(a=(t=ee(s).find(":focus")).attr("id"),0<t.length)&&0<=ee.inArray(a,["pData","nData","cData"])?(t.trigger("click"),!1):27===e.which?(i.closeOnEscape&&v(),!1):!0===i.navkeys[0]?e.which===i.navkeys[1]?(ee("#pData",s).trigger("click"),!1):e.which===i.navkeys[2]?(ee("#nData",s).trigger("click"),!1):void 0:void 0)}),te(ee("#cData",s),i.closeicon,c),g("beforeShowForm",ee(n)),le.viewModal.call(l,u,{gbox:p,jqm:i.jqModal,overlay:i.overlay,toTop:i.toTop,modal:i.modal,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),ee(".fm-button:not(."+b.split(" ").join(".")+")",s).hover(function(){ee(this).addClass(N)},function(){ee(this).removeClass(N)}),A(),ee("#cData",s).click(function(){return v(),!1}),ee("#nData",s).click(function(){ee("#FormError",d).hide();var e=I();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){if(!g("onclickPgButtons","next",ee(n),e[1][e[0]]))return!1;K(e[1][e[0]+1]),ne.setSelection.call(o,e[1][e[0]+1]),g("afterclickPgButtons","next",ee(n),e[1][e[0]+1]),G(e[0]+1,e)}return A(),!1}),ee("#pData",s).click(function(){ee("#FormError",d).hide();var e=I();if(-1!==e[0]&&e[1][e[0]-1]){if(!g("onclickPgButtons","prev",ee(n),e[1][e[0]]))return!1;K(e[1][e[0]-1]),ne.setSelection.call(o,e[1][e[0]-1]),g("afterclickPgButtons","prev",ee(n),e[1][e[0]-1]),G(e[0]-1,e)}return A(),!1}),I());G(a[0],a)}}function A(){!0!==i.closeOnEscape&&!0!==i.navkeys[0]||setTimeout(function(){ee("#cData").focus()},0)}function K(e){var t,a=0,i=ne.getInd.call(o,e,!0);i&&(ee("td",i).each(function(e){t=h[e],"cb"!==(t=t.name)&&"subgrid"!==t&&"rn"!==t&&(t=re("v_"+t),ee("#"+t+" span",d).html(le.getDataFieldOfCell.call(l,i,e).html()),a++)}),0<a)&&ee("#id_g",d).val(e)}function G(e,t){var a=t[1].length-1;0===e||void 0!==t[1][e-1]&&ce(ee("#"+re(t[1][e-1])),b)?ee("#pData",s).addClass(b):ee("#pData",s).removeClass(b),e===a||void 0!==t[1][e+1]&&ce(ee("#"+re(t[1][e+1])),b)?ee("#nData",s).addClass(b):ee("#nData",s).removeClass(b)}function I(){var e=ne.getDataIDs.call(o),t=ee("#id_g",d).val();return[ee.inArray(t,e),e]}})},delGridRow:function(w,x){return this.each(function(){var r=this,n=r.p,d=ee(r);if(r.grid&&null!=n&&w){var s,c,u,p=n.id,h=ee.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},idSeparator:",",onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1,delui:"disable",deltext:ne.getGridRes.call(d,"defaults.deltext")||"Deleting..."},ne.getGridRes.call(d,"del"),le.del||{},n.formDeleting||{},x||{}),e="DelTbl_"+p,f="#DelTbl_"+re(p),t={themodal:"delmod"+p,modalhead:"delhd"+p,modalcontent:"delcnt"+p,resizeAlso:e},m="#"+re(t.themodal),g=n.gBox,a=h.commonIconClass,v=function(){var e=ee.makeArray(arguments);return e.unshift(""),e.unshift("Delete"),e.unshift(h),ue.apply(r,e)},i=ae.call(r,"hover"),b=ae.call(r,"active"),o=ae.call(r,"error");if(Array.isArray(w)||(w=[String(w)]),void 0!==ee(m)[0]){if(!v("beforeInitData",ee(f)))return;ee("#DelData>td",f).text(w.join(h.idSeparator)).data("rowids",w),ee("#DelError",f).hide(),!0===h.processing&&(h.processing=!1,ee("#dData",f).removeClass(b)),v("beforeShowForm",ee(f)),le.viewModal.call(r,m,{gbox:g,jqm:h.jqModal,jqM:!1,overlay:h.overlay,toTop:h.toTop,modal:h.modal})}else{var l=isNaN(h.dataheight)?h.dataheight:h.dataheight+"px",y=isNaN(h.datawidth)?h.datawidth:h.datawidth+"px",y="<div class='"+de.call(r,"dialog.body")+"'><div id='"+e+"' class='formdata' style='width:"+y+";overflow:auto;position:relative;height:"+l+";'>",l=(y=(y=(y=y+"<table class='DelTable'><tbody>"+("<tr id='DelError' style='display:none'><td class='"+o+"'></td></tr>"))+("<tr id='DelData' style='display:none'><td >"+w.join(h.idSeparator)+"</td></tr>"))+("<tr><td class='delmsg'>"+h.msg+"</td></tr>")+"</tbody></table></div></div>",pe.call(r,"dData",h.bSubmit)),o=pe.call(r,"eData",h.bCancel);if(y+="<div class='"+de.call(r,"dialog.footer")+"'><table class='EditTable' id='"+e+"_2'><tbody><tr><td><hr class='"+de.call(r,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+n.direction+"'>"+l+"&#160;"+o+"</td></tr></tbody></table></div>",h.gbox=g,le.createModal.call(r,t,y,h,n.gView,ee(n.gView)[0]),ee("#DelData>td",f).data("rowids",w),!v("beforeInitData",ee(y)))return;ee(".fm-button",f+"_2").hover(function(){ee(this).addClass(i)},function(){ee(this).removeClass(i)}),te(ee("#dData",f+"_2"),h.delicon,a),te(ee("#eData",f+"_2"),h.cancelicon,a),ee("#dData",f+"_2").click(function(){var e,i=[!0,""],t=ee("#DelData>td",f),o=t.text(),l=t.data("rowids"),t={};if(ee.jgrid.isFunction(h.onclickSubmit)&&(t=h.onclickSubmit.call(r,h,o,l)||{}),(i=ee.jgrid.isFunction(h.beforeSubmit)?h.beforeSubmit.call(r,o,l)||i:i)[0]&&!h.processing){if(h.processing=!0,c=n.prmNames,s=ee.extend({},h.delData,t),u=c.oper,s[u]=c.deloper,u=c.id,!(o=l.slice()).length)return!1;for(e in o)o.hasOwnProperty(e)&&(o[e]=le.stripPref(n.idPrefix,o[e]));s[u]=o.join(h.idSeparator),ee(this).addClass(b);var a,t=h.url||n.editurl,t=ee.extend({url:ee.jgrid.isFunction(t)?t.call(r,s[u],s,h,l):t,type:h.mtype,data:ee.jgrid.isFunction(h.serializeDelData)?h.serializeDelData.call(r,s,l):s,complete:function(e,t){var a;if(d.jqGrid("progressBar",{method:"hide",loadtype:h.delui}),ee("#dData",f+"_2").removeClass(b),300<=e.status&&304!==e.status||0===e.status&&4===e.readyState?(i[0]=!1,ee.jgrid.isFunction(h.errorTextFormat)?i[1]=h.errorTextFormat.call(r,e):i[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):ee.jgrid.isFunction(h.afterSubmit)&&(i=h.afterSubmit.call(r,e,s,l)||[!0]),!1===i[0])ee("#DelError>td",f).html(i[1]),ee("#DelError",f).show();else{if("local"===n.datatype||!0===n.treeGrid||!h.reloadAfterSubmit)if(!0===n.treeGrid)try{ne.delTreeNode.call(d,l[0])}catch(e){}else for(l=l.slice(),a=0;a<l.length;a++)ne.delRowData.call(d,l[a]);h.reloadAfterSubmit&&d.trigger("reloadGrid",[ee.extend({},h.reloadGridOptions||{})]),setTimeout(function(){v("afterComplete",e,o,ee(f),l)},50)}h.processing=!1,i[0]&&le.hideModal(m,{gb:g,jqm:h.jqModal,onClose:h.onClose,removemodal:h.removemodal})}},le.ajaxOptions,h.ajaxDelOptions);t.url||h.useDataProxy||(ee.jgrid.isFunction(n.dataProxy)?h.useDataProxy=!0:(i[0]=!1,i[1]+=" "+le.errors.nourl)),i[0]&&(d.jqGrid("progressBar",{method:"show",loadtype:h.delui,htmlcontent:h.deltext}),h.useDataProxy?!1===(a=void 0===(a=n.dataProxy.call(r,t,"del_"+p))?[!0,""]:a)[0]?(i[0]=!1,i[1]=a[1]||"Error deleting the selected row!"):le.hideModal(m,{gb:g,jqm:h.jqModal,onClose:h.onClose,removemodal:h.removemodal}):"clientArray"===t.url?(s=t.data,t.complete({status:200,statusText:""},"")):ee.ajax(t))}return!1===i[0]&&(ee("#DelError>td",f).html(i[1]),ee("#DelError",f).show()),!1}),ee("#eData",f+"_2").click(function(){return le.hideModal(m,{gb:g,jqm:h.jqModal,onClose:h.onClose,removemodal:h.removemodal}),!1}),v("beforeShowForm",ee(f)),le.viewModal.call(r,m,{gbox:g,jqm:h.jqModal,overlay:h.overlay,toTop:h.toTop,modal:h.modal})}v("afterShowForm",ee(f)),!0===h.closeOnEscape&&setTimeout(function(){ee(".ui-jqdialog-titlebar-close","#"+re(t.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(N,B,P,R,M,z,V){return"object"==typeof N&&(V=z,z=M,M=R,R=P,P=B,B=N,N=void 0),R=R||{},P=P||{},V=V||{},M=M||{},z=z||{},this.each(function(){var r=this,n=r.p,d=ee(r);if(r.grid&&null!=n&&!(r.nav&&0<ee(N).find(".navtable").length)){var i=n.id,s=ee.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},ne.getGridRes.call(d,"nav"),le.nav||{},n.navOptions||{},B||{});s.position=s.position||("rtl"===n.direction?"right":"left");var e,c,t=n.idSel,u=n.gBox,p=s.commonIconClass,h={themodal:"alertmod_"+i,modalhead:"alerthd_"+i,modalcontent:"alertcnt_"+i},o=function(){var e=U.documentElement,t=L,a=1024,i=768,o=d.closest(".ui-jqgrid").offset(),l=(void 0===ee("#"+re(h.themodal))[0]&&(s.alerttop||s.alertleft||(void 0!==t.innerWidth?(a=t.innerWidth,i=t.innerHeight):null!=e&&void 0!==e.clientWidth&&0!==e.clientWidth&&(a=e.clientWidth,i=e.clientHeight),a=a/2-parseInt(s.alertwidth,10)/2-o.left+(void 0!==t.pageXOffset?t.pageXOffset:(e||U.body.parentNode||U.body).scrollLeft),i=i/2-25-o.top+(void 0!==t.pageYOffset?t.pageYOffset:(e||U.body.parentNode||U.body).scrollTop)),le.createModal.call(r,h,"<div class='"+de.call(r,"dialog.body")+"'><div>"+s.alerttext+"</div></div>",{gbox:u,jqModal:s.jqModal,drag:!0,resize:!0,caption:s.alertcap,top:null!=s.alerttop?s.alerttop:i,left:null!=s.alertleft?s.alertleft:a,width:s.alertwidth,height:s.alertheight,closeOnEscape:s.closeOnEscape,zIndex:s.alertzIndex,removemodal:s.removemodal},n.gView,ee(u)[0],!1)),le.viewModal.call(r,"#"+re(h.themodal),{gbox:u,toTop:s.alertToTop,jqm:s.jqModal}),ee("#"+re(h.modalhead)).find(".ui-jqdialog-titlebar-close"));l.attr({tabindex:"0",href:"#",role:"button"}),setTimeout(function(){l.focus()},50)},a=function(e){if(13===e.which&&0<(e=ee(this).find(".ui-pg-button").filter(":focus")).length){var t=e[0].id,t=t.substr(0,0<ee(this).closest(".ui-jqgrid-toppager").length?t.length-i.length-5:t.length-i.length-1)+"mod"+n.id,a=ee(".ui-jqdialog").filter(":visible").map(function(){return this.id});if(ee.inArray(t,a)<0)return e.trigger("click"),!1}},l=ae.call(r,"hover"),f=ae.call(r,"disabled"),m=de.call(r,"navButton","ui-pg-button");if(r.grid){r.modalAlert=o,void 0===N&&(n.pager?(N=n.pager,n.toppager&&(s.cloneToTop=!0)):n.toppager&&(N=n.toppager));var g,v,b,y,w,x,D,j=1,k=["left","center","right"],C="<div class='"+de.call(r,"navButton","ui-pg-button "+ae.call(r,"disabled"))+"'><span class='ui-separator'></span></div>",F=function(){ce(this,f)||ee(this).addClass(l)},_=function(){ee(this).removeClass(l)},S=function(){return ce(this,f)||(ee.jgrid.isFunction(s.addfunc)?s.addfunc.call(r,R):ne.editGridRow.call(d,"new",R)),!1},E=function(e,t,a){var i;return ce(this,f)||((i=n.selrow)?ee.jgrid.isFunction(e)?e.call(r,i,a):ne[t].call(d,i,a):o()),!1},O=function(){return E.call(this,s.editfunc,"editGridRow",P)},q=function(){return E.call(this,s.viewfunc,"viewGridRow",V)},T=function(){var e;return ce(this,f)||(n.multiselect?0===(e=n.selarrrow).length&&(e=null):e=n.selrow,e?ee.jgrid.isFunction(s.delfunc)?s.delfunc.call(r,e,M):ne.delGridRow.call(d,e,M):o()),!1},A=function(){return ce(this,f)||(ee.jgrid.isFunction(s.searchfunc)?s.searchfunc.call(r,z):ne.searchGrid.call(d,z)),!1},G=function(){if(!ce(this,f)){ee.jgrid.isFunction(s.beforeRefresh)&&s.beforeRefresh.call(r),n.search=!1,n.resetsearch=!0;try{if("currentfilter"!==s.refreshstate){n.postData.filters="";try{ee("#fbox_"+t.substr(1)).jqFilter("resetFilter")}catch(e){}ee.jgrid.isFunction(r.clearToolbar)&&r.clearToolbar(!1)}}catch(e){}switch(s.refreshstate){case"firstpage":d.trigger("reloadGrid",[ee.extend({},s.reloadGridOptions||{},{page:1})]);break;case"current":case"currentfilter":d.trigger("reloadGrid",[ee.extend({},s.reloadGridOptions||{},{current:!0})])}ee.jgrid.isFunction(s.afterRefresh)&&s.afterRefresh.call(r)}return!1},I=function(e,t,a){var i=ee("<div class='"+m+"' tabindex='0' role='button'></div>"),o=s[e+"icon"],l=ee.jgrid.trim(s[e+"text"]);return i.append("<div class='ui-pg-div'><span class='"+(s.iconsOverText?se("ui-pg-button-icon-over-text",p,o):se(p,o))+"'></span>"+(l?"<span class='ui-pg-button-text"+(s.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+l+"</span>":"")+"</div>"),ee(c).append(i),i.attr({title:s[e+"title"]||"",id:t||e+"_"+y}).click(a).hover(F,_),i};for(s.cloneToTop&&n.toppager&&(j=2),g=0;g<j;g++){if(c=ee("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===n.direction?"right":"left")+";table-layout:auto;'></div>"),0===g?(y=i,(b=N)===n.toppager&&(y+="_top",j=1)):(b=n.toppager,y=i+"_top"),s.add&&I("add",R.id,S),s.edit&&I("edit",P.id,O),s.view&&I("view",V.id,q),s.del&&I("del",M.id,T),(s.add||s.edit||s.del||s.view)&&ee(c).append(C),s.search&&(v=I("search",z.id,A),z.showOnLoad)&&!0===z.showOnLoad&&ee(v,c).click(),s.refresh&&I("refresh","",G),v=ee(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",ee("body").append("<div id='testpg2' class='"+de.call(r,"gBox","ui-jqgrid")+"' style='font-size:"+v+";visibility:hidden;' ></div>"),e=ee(c).clone().appendTo("#testpg2").width(),ee("#testpg2").remove(),ee(b+"_"+s.position,b).append(c),s.hideEmptyPagerParts)for(w=0;w<k.length;w++)k[w]!==s.position&&(0===(D=ee(b+"_"+k[w],b)).length||0===D[0].childNodes.length?D.hide():1===D[0].childNodes.length&&(x=D[0].firstChild,!ee(x).is("table.ui-pg-table")||0!==x.rows&&0!==x.rows[0].cells.length||D.hide()));n._nvtd&&(e>n._nvtd[0]&&(ee(b+"_"+s.position,b).width(e),n._nvtd[0]=e),n._nvtd[1]=e),r.nav=!0,c.on("keydown.jqGrid",a)}d.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(s,c){return"object"==typeof s&&(c=s,s=void 0),this.each(function(){var t=this,e=t.p;if(t.grid){var a=ee.extend({caption:"newButton",title:"",onClickButton:null,position:"last",iconsOverText:!1},ne.getGridRes.call(ee(t),"nav"),le.nav||{},e.navOptions||{},c||{}),i=a.id,o=ae.call(t,"hover"),l=ae.call(t,"disabled"),r=de.call(t,"navButton","ui-pg-button");if(void 0===s)if(e.pager){if(ne.navButtonAdd.call(ee(t),e.pager,a),!e.toppager)return;s=e.toppager,i&&(i+="_top")}else e.toppager&&(s=e.toppager);"string"==typeof s&&0!==s.indexOf("#")&&(s="#"+re(s));var n,e=ee(".navtable",s),d=a.commonIconClass;0<e.length&&(i&&0<e.find("#"+re(i)).length||(n=ee("<div tabindex='0' role='button'></div>"),"NONE"===a.buttonicon.toString().toUpperCase()?ee(n).addClass(r).append("<div class='ui-pg-div'>"+(a.caption?"<span class='ui-pg-button-text"+(a.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+a.caption+"</span>":"")+"</div>"):ee(n).addClass(r).append("<div class='ui-pg-div'><span class='"+(a.iconsOverText?se("ui-pg-button-icon-over-text",d,a.buttonicon):se(d,a.buttonicon))+"'></span>"+(a.caption?"<span class='ui-pg-button-text"+(a.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+a.caption+"</span>":"")+"</div>"),i&&ee(n).attr("id",i),"first"===a.position&&0<e.children("div.ui-pg-button").length?e.children("div.ui-pg-button").first().before(n):e.append(n),ee(n,e).attr("title",a.title||"").click(function(e){return ce(this,l)||ee.jgrid.isFunction(a.onClickButton)&&a.onClickButton.call(t,a,e),!1}).hover(function(){ce(this,l)||ee(this).addClass(o)},function(){ee(this).removeClass(o)}),ee(t).triggerHandler("jqGridResetFrozenHeights")))}})},navSeparatorAdd:function(a,i){return i=ee.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},i||{}),this.each(function(){if(this.grid){var e=this.p,t=de.call(this,"navButton","ui-pg-button "+ae.call(this,"disabled"));if(void 0===a)if(e.pager){if(ne.navSeparatorAdd.call(ee(this),e.pager,i),!e.toppager)return;a=e.toppager}else e.toppager&&(a=e.toppager);"string"==typeof a&&0!==a.indexOf("#")&&(a="#"+re(a));e=ee(".navtable",a);0<e.length&&(t="<div class='"+t+"'><span class='"+i.sepclass+"'></span>"+i.sepcontent+"</div>","first"!==i.position||0===e.children("div.ui-pg-button").length?e.append(t):e.children("div.ui-pg-button").first().before(t))}})},GridToForm:function(l,r){return this.each(function(){var e,t,a,i;if(this.grid){var o=ne.getRowData.call(ee(this),l);if(o)for(e in o)if(o.hasOwnProperty(e))if((t=ee("[name="+re(e)+"]",r)).is("input:radio")||t.is("input:checkbox"))for(a=0;a<t.length;a++)(i=ee(t[a])).prop("checked",i.val()===String(o[e]));else t.val(oe(o[e])?"":o[e])}})},FormToGrid:function(t,i,o,l){return this.each(function(){var e,a;this.grid&&(o=o||"set",l=l||"first",e=ee(i).serializeArray(),a={},ee.each(e,function(e,t){a[t.name]=t.value}),"add"===o?ne.addRowData.call(ee(this),t,a,l):"set"===o&&ne.setRowData.call(ee(this),t,a))})}})});
//# sourceMappingURL=grid.formedit.js.map