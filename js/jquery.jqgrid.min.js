/**
 * @license jqGrid 4.15.11 - free jqGrid: https://github.com/rany2/jqGrid
 * Copyright (c) 2008-2014, Tony Tomov, tony@trirand.com
 * Copyright (c) 2014-2019, Oleg Kiriljuk, oleg.kiriljuk@ok-soft-gmbh.com
 * Copyright (c) 2023, rany2, ranygh@riseup.net
 * Dual licensed under the MIT and GPL licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 */
!function(t,r){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(e){return r(e,t.document)}):"object"==typeof module&&module.exports?module.exports=function(e,t){return e=e||window,void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),r(t,e.document),t}:r(jQuery,t.document)}("undefined"!=typeof window?window:this,function($,document){"use strict";var englishLanguageDefaults={name:"English (United States)",nameEnglish:"English (United States)",isRTL:!1,defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}",pgfirst:"First Page",pglast:"Last Page",pgnext:"Next Page",pgprev:"Previous Page",pgrecs:"Records per Page",showhide:"Toggle Expand Collapse Grid",savetext:"Saving..."},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],addGroupTitle:"Add subgroup",deleteGroupTitle:"Delete group",addRuleTitle:"Add rule",deleteRuleTitle:"Delete rule",operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row",savetext:"",savetitle:"Save row",canceltext:"",canceltitle:"Cancel row editing"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(e){return e<11||13<e?["st","nd","rd","th"][Math.min((e-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",YearMonth:"F, Y"}}}},jgrid=($.jgrid=$.jgrid||{},$.jgrid),locales=(jgrid.locales=jgrid.locales||{},jgrid.locales),COMPONENT_NAMES={GRID_BOX_DIV:0,GRID_OVERLAY_DIV:1,LOADING_DIV:2,DIALOG_ALERT_DIV:3,DIALOG_SEARCH_DIV:4,DIALOG_VIEW_DIV:5,DIALOG_EDIT_DIV:6,DIALOG_DELETE_DIV:7,GRID_VIEW_DIV:8,TITLE_BAR_DIV:9,UPPER_TOOLBAR_DIV:10,TOP_PAGER_DIV:11,HEADER_DIV:12,HEADER_BOX_DIV:13,HEADER_TABLE:14,HEADER_COLS_ROW:15,HEADER_COLS:16,HEADER_ROWS:47,HEADER_TH:48,HEADER_SORTABLE_DIV:49,HEADER_RESIZABLE_SPAN:50,HEADER_SELECT_ALL_ROWS_CHECKBOX:45,SEARCH_TOOLBAR:17,BODY_DIV:18,BODY_SCROLL_FULL_DIV:19,BODY_SCROLL_TOP_DIV:20,BODY_TABLE:21,GRID:21,BODY_COLS_ROW:22,BODY_COLS:23,BODY_DATA_ROWS:24,FOOTER_DIV:25,FOOTER_BOX_DIV:26,FOOTER_TABLE:27,FOOTER_DATA_ROWS:28,BOTTOM_TOOLBAR_DIV:29,FROZEN_HEADER_DIV:30,FROZEN_HEADER_TABLE:31,FROZEN_HEADER_COLS_ROW:32,FROZEN_HEADER_COLS:33,FROZEN_SEARCH_TOOLBAR:34,FROZEN_FOOTER_DIV:35,FROZEN_FOOTER_TABLE:36,FROZEN_FOOTER_DATA_ROWS:37,FROZEN_BODY_DIV:38,FROZEN_BODY_TABLE:39,FROZEN_BODY_COLS_ROW:40,FROZEN_BODY_COLS:41,FROZEN_BODY_DATA_ROWS:42,COLUMN_RESIZER_DIV:43,BOTTOM_PAGER_DIV:44,SEARCH_OPERATION_MENU_UL:46},defaults=(null!=jgrid.defaults&&!$.isEmptyObject(locales)&&void 0!==locales["en-US"]||(void 0===locales["en-US"]&&$.extend(!0,jgrid,{locales:{"en-US":englishLanguageDefaults}}),jgrid.defaults=jgrid.defaults||{},void 0!==jgrid.defaults.locale)||(jgrid.defaults.locale="en-US"),jgrid.defaults=jgrid.defaults||{},jgrid.defaults),clearArray=($.extend(!0,jgrid,{version:"4.15.11",productName:"free jqGrid",defaults:{},search:{},edit:{},view:{},del:{},nav:{},col:{},errors:{},formatter:{unused:""},icons:{jQueryUI:{common:"ui-icon",pager:{first:"ui-icon-seek-first",prev:"ui-icon-seek-prev",next:"ui-icon-seek-next",last:"ui-icon-seek-end"},sort:{asc:"ui-icon-triangle-1-n",desc:"ui-icon-triangle-1-s"},gridMinimize:{visible:"ui-icon-circle-triangle-n",hidden:"ui-icon-circle-triangle-s"},nav:{edit:"ui-icon-pencil",add:"ui-icon-plus",del:"ui-icon-trash",search:"ui-icon-search",refresh:"ui-icon-refresh",view:"ui-icon-document",save:"ui-icon-disk",cancel:"ui-icon-cancel",newbutton:"ui-icon-newwin"},actions:{edit:"ui-icon-pencil",del:"ui-icon-trash",save:"ui-icon-disk",cancel:"ui-icon-cancel"},form:{close:"ui-icon-closethick",prev:"ui-icon-triangle-1-w",next:"ui-icon-triangle-1-e",save:"ui-icon-disk",undo:"ui-icon-close",del:"ui-icon-scissors",cancel:"ui-icon-cancel",resizableLtr:"ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se"},search:{search:"ui-icon-search",reset:"ui-icon-arrowreturnthick-1-w",query:"ui-icon-comment"},subgrid:{plus:"ui-icon-plus",minus:"ui-icon-minus",openLtr:"ui-icon-caret-1-sw",openRtl:"ui-icon-caret-1-se"},grouping:{plus:"ui-icon-circlesmall-plus",minus:"ui-icon-circlesmall-minus"},treeGrid:{minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off",plusLtr:"ui-icon-triangle-1-e",plusRtl:"ui-icon-triangle-1-w"}},fontAwesome:{common:"fa",pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-asc",desc:"fa-sort-desc"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil",add:"fa-plus",del:"fa-trash-o",search:"fa-search",refresh:"fa-refresh",view:"fa-file-o",save:"fa-floppy-o",cancel:"fa-ban",newbutton:"fa-external-link"},actions:{common:"fa-fw",edit:"fa-pencil",del:"fa-trash-o",save:"fa-floppy-o",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-floppy-o",undo:"fa-undo",del:"fa-trash-o",cancel:"fa-ban",resizableLtr:"fa-rss fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments-o"},subgrid:{common:"fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square-o",minus:"fa-minus-square-o"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-desc",leaf:"fa-dot-circle-o",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"},checkbox:{checkedClasses:"fa-check-square-o",checked:"fa-check-square-o fa-lg",unchecked:"fa-square-o fa-lg"}},fontAwesome5:{pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-up",desc:"fa-sort-down"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil-alt",add:"fa-plus",del:"fa-trash-alt",search:"fa-search",refresh:"fa-sync",view:"fa-file",save:"fa-save",cancel:"fa-ban",newbutton:"fa-external-link-alt"},actions:{common:"fa-fw",edit:"fa-pencil-alt",del:"fa-trash-alt",save:"fa-save",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-save",undo:"fa-undo",del:"fa-trash-alt",cancel:"fa-ban",resizableLtr:"fa-rss fa-lg fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments"},subgrid:{common:"fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square",minus:"fa-minus-square"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-down",leaf:"fa-dot-circle",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"},checkbox:{ignoreParents:!0,checkedClasses:"fa-check-square",checked:"far fa-check-square fa-lg",unchecked:"far fa-square fa-lg"}},fontAwesomeBrands:{baseIconSet:"fontAwesome5",common:"fab"},fontAwesomeLight:{baseIconSet:"fontAwesome5",common:"fal"},fontAwesomeRegular:{baseIconSet:"fontAwesome5",common:"far"},fontAwesomeSolid:{baseIconSet:"fontAwesome5",common:"fas"},fontAwesomeSVG:{baseIconSet:"fontAwesome5",common:"fas"},glyph:{common:"glyphicon",pager:{common:"",first:"glyphicon-step-backward",prev:"glyphicon-backward",next:"glyphicon-forward",last:"glyphicon-step-forward"},sort:{common:"",asc:"glyphicon-triangle-top",desc:"glyphicon-triangle-bottom"},gridMinimize:{visible:"glyphicon-circle-arrow-up",hidden:"glyphicon-circle-arrow-down"},nav:{common:"",edit:"glyphicon-edit",add:"glyphicon-plus",del:"glyphicon-trash",search:"glyphicon-search",refresh:"glyphicon-refresh",view:"glyphicon-file",save:"glyphicon-save",cancel:"glyphicon-ban-circle",newbutton:"glyphicon-new-window"},actions:{common:"",edit:"glyphicon-edit",del:"glyphicon-trash",save:"glyphicon-save",cancel:"glyphicon-ban-circle"},form:{close:"glyphicon-remove-circle",prev:"glyphicon-step-backward",next:"glyphicon-step-forward",save:"glyphicon-save",undo:"glyphicon-repeat",del:"glyphicon-trash",cancel:"glyphicon-ban-circle",resizableLtr:"glyphicon-import"},search:{search:"glyphicon-search",reset:"glyphicon-repeat",query:"glyphicon-cog"},subgrid:{common:"",plus:"glyphicon-zoom-in",minus:"glyphicon-zoom-out",openLtr:"glyphicon-indent-left",openRtl:"glyphicon-indent-left"},grouping:{common:"",plus:"glyphicon-expand",minus:"glyphicon-collapse-down"},treeGrid:{common:"",minus:"glyphicon-triangle-bottom",leaf:"glyphicon-record",plusLtr:"glyphicon-triangle-right",plusRtl:"glyphicon-triangle-left"},checkbox:{checkedClasses:"glyphicon-check",checked:"glyphicon-check",unchecked:"glyphicon-unchecked"}}},guiStyles:{jQueryUI:{gBox:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all",gView:"",overlay:"ui-widget-overlay",loading:"ui-state-default ui-state-active",hDiv:"ui-state-default ui-corner-top",hTable:"",colHeaders:"ui-state-default",states:{select:"ui-state-highlight",disabled:"ui-state-disabled ui-jqgrid-disablePointerEvents",hover:"ui-state-hover",error:"ui-state-error",active:"ui-state-active",textOfClickable:"ui-state-default"},dialog:{header:"ui-widget-header ui-dialog-titlebar ui-corner-all ui-helper-clearfix",window:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all ui-front",document:"",subdocument:"",body:"",footer:"",content:"ui-widget-content",hr:"ui-widget-content",closeButton:"ui-corner-all",fmButton:"ui-state-default",dataField:"ui-widget-content ui-corner-all",viewCellLabel:"ui-widget-content",viewLabel:"",viewCellData:"ui-widget-content",viewData:"",leftCorner:"ui-corner-left",rightCorner:"ui-corner-right",defaultCorner:"ui-corner-all"},filterToolbar:{dataField:"ui-widget-content"},subgrid:{thSubgrid:"ui-state-default",rowSubTable:"ui-widget-content",row:"ui-widget-content",tdStart:"",tdWithIcon:"ui-widget-content",buttonDiv:"",button:"",tdData:"ui-widget-content",legacyTable:""},grid:"",gridRow:"ui-widget-content",rowNum:"ui-state-default",gridFooter:"",rowFooter:"ui-widget-content",gridTitle:"ui-widget-header ui-corner-top",gridError:"ui-state-error",gridErrorText:"",titleButton:"ui-corner-all",toolbarUpper:"ui-state-default",toolbarBottom:"ui-state-default",actionsDiv:"ui-widget-content",actionsButton:"ui-corner-all",pager:{pager:"ui-state-default",pagerButton:"ui-corner-all",pagerInput:"ui-widget-content",pagerSelect:"ui-widget-content"},navButton:"ui-corner-all",searchDialog:{operator:"ui-corner-all",label:"ui-corner-all",elem:"ui-corner-all",operationGroup:"",addRuleButton:"ui-corner-all",deleteRuleButton:"ui-corner-all",operationSelect:"ui-corner-all",addGroupButton:"ui-corner-all",deleteGroupButton:"ui-corner-all"},searchToolbar:{menu:"ui-menu-jqueryui ui-menu ui-widget ui-widget-content ui-corner-all",menuItem:"ui-menu-item",menuItemButton:"ui-corner-all",operButton:"ui-corner-all",clearButton:"ui-corner-all"},top:"ui-corner-top",bottom:"ui-corner-bottom",resizer:"ui-widget-header"},bootstrap:{gBox:"ui-jqgrid-bootstrap",gView:"panel-info",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-condensed table-bordered",colHeaders:"",states:{select:"success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"hidden",closeButton:"btn btn-xs btn-default",fmButton:"btn btn-default",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-default",actionsDiv:"",actionsButton:"btn btn-xs btn-default",toolbarUpper:"",toolbarBottom:"",pager:{pager:"panel-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-default",deleteRuleButton:"btn btn-xs btn-default",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-default",deleteGroupButton:"btn btn-xs btn-default"},searchToolbar:{menu:"dropdown-menu",menuItem:"",menuItemButton:"ui-corner-all",operButton:"btn btn-xs btn-default",clearButton:"btn btn-xs btn-default"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"},bootstrapPrimary:{baseGuiStyle:"bootstrap",dialog:{closeButton:"btn btn-xs close",fmButton:"btn btn-primary"},searchDialog:{addRuleButton:"btn btn-xs btn-primary",deleteRuleButton:"btn btn-xs btn-primary",addGroupButton:"btn btn-xs btn-primary",deleteGroupButton:"btn btn-xs btn-primary"}},bootstrap4:{gBox:"ui-jqgrid-bootstrap",gView:"card",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-sm table-bordered",colHeaders:"",states:{select:"table-success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",hoverTh:"table-active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"d-none",closeButton:"btn btn-xs btn-outline-primary",fmButton:"btn btn-outline-secondary",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-outline-primary",actionsDiv:"",actionsButton:"btn btn-xs btn-outline-secondary",toolbarUpper:"",toolbarBottom:"",pager:{pager:"card-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-default",deleteRuleButton:"btn btn-xs btn-default",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-default",deleteGroupButton:"btn btn-xs btn-default"},searchToolbar:{menu:"dropdown-menu",menuItem:"",menuItemButton:"dropdown-item",operButton:"btn btn-xs btn-outline-secondary",clearButton:"btn btn-xs btn-outline-secondary"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"}},isFunction:function(e){return"function"==typeof e},trim:function(e){return e?String.prototype.trim.call(e):""},htmlDecode:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e&&String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/").replace(/&#39;/g,"'").replace(/&#47;/g,"/").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},htmlEncode:function(e){return e&&String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\//g,"&#47;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},oldEncodePostedData:function(e){return e&&String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},oldDecodePostedData:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e&&String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},clearArray:function(e){for(;0<e.length;)e.pop()},format:function(e){var r=$.makeArray(arguments).slice(1);return(e=null==e?"":e).replace(/\{(\d+)\}/g,function(e,t){return r[t]})},template:function(e){var a,o=$.makeArray(arguments).slice(1),l=o.length;return(e=null==e?"":e).replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((\.*?)?\))?)?\}/g,function(e,t){var r,i;if(!isNaN(parseInt(t,10)))return o[parseInt(t,10)];for(a=0;a<l;a++)if(Array.isArray(o[a]))for(i=(r=o[a]).length;i--;)if(t===r[i].nm)return r[i].v})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var e,t=-1;return"Microsoft Internet Explorer"===navigator.appName?null!=(e=/(MSIE) ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent))&&3===e.length&&(t=parseFloat(e[2]||-1)):"Netscape"===navigator.appName&&null!=(e=/rv:([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent))&&2===e.length&&(t=parseFloat(e[1]||-1)),t},fixMaxHeightOfDiv:function(e){return"Microsoft Internet Explorer"===navigator.appName?Math.min(e,1533917):null!=/(Firefox)/.exec(navigator.userAgent)?Math.min(e,17895696):e},getRelativeRect:function(e){var e=e instanceof $&&0<e.length?e[0]:e,t=$(e).outerHeight(),r=$(this).closest(".ui-jqgrid")[0];return r?(e=null!=e.getBoundingClientRect?e.getBoundingClientRect():$(e).offset(),r=null!=r.getBoundingClientRect?r.getBoundingClientRect():$(r).offset(),{top:e.top+t-r.top,left:e.left-r.left}):{top:0,left:0}},getCellIndex:function(e){e=$(e);return e.is("tr")||null==(e=(e.is("td")||e.is("th")?e:e.closest("td,th"))[0])?-1:jgrid.msie?$.inArray(e,e.parentNode.cells):e.cellIndex},stripHtml:function(e){return(e=String(e))&&((e=e.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""))&&"&nbsp;"!==e&&"&#160;"!==e?e.replace(/"/g,"'"):"")},stripPref:function(e,t){var r=$.type(e);return t="string"!==r&&"number"!==r?t:""!==(e=String(e))?String(t).replace(String(e),""):t},getRes:function(e,t){var r,i=t.split("."),a=i.length;if(null!=e){for(r=0;r<a;r++){if(!i[r])return null;if(void 0===(e=e[i[r]]))break;if("string"==typeof e)return e}return e}},parseDate:function(e,t,r,i){function a(e,t){for(e=String(e),t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e}function o(e,t){return 0===e?12===t&&(t=0):12!==t&&(t+=12),t}var l,n,s,d,c,u,p,h,f,g,m,v,b,w,y=0,j=0,x="string"==typeof t?t.match(/^\/Date\((([\-+])?[0-9]+)(([\-+])([0-9]{2})([0-9]{2}))?\)\/$/):null,C={m:1,d:1,y:1970,h:0,i:0,s:0,u:0};if(void 0===(i=function(e,t){for(var r,i=["AmPm","dayNames","masks","monthNames","userLocalTime","parseRe","S","srcformat"],a=t||{},o=(jgrid.formatter||{}).date||{},l=((locales[(e||$.jgrid.defaults).locale]||{}).formatter||{}).date,n=i.length,s={},d=0;d<n;d++)void 0!==a[r=i[d]]?s[r]=a[r]:void 0!==o[r]?s[r]=o[r]:void 0!==l[r]&&(s[r]=l[r]);return s}(this.p,i)).parseRe&&(i.parseRe=/[#%\\\/:_;.,\t\s\-]/),i.masks.hasOwnProperty(e)&&(e=i.masks[e]),t&&null!=t)if(isNaN(t)||"u"!==String(e).toLowerCase())if(isNaN(t)||"u1000"!==String(e).toLowerCase())if(t.constructor===Date)y=t;else if(null!==x)y=new Date(parseInt(x[1],10)),x[3]&&(j=60*Number(x[5])+Number(x[6]),j=(j*="-"===x[4]?1:-1)-y.getTimezoneOffset(),y.setTime(Number(Number(y)+60*j*1e3)));else{for("ISO8601Long"===i.srcformat&&"Z"===t.charAt(t.length-1)&&(j-=(new Date).getTimezoneOffset()),t=String(t).replace(/\T/g,"#").replace(/\t/,"%").split(i.parseRe),e=e.replace(/\T/g,"#").replace(/\t/,"%").split(i.parseRe),n=0,s=Math.min(e.length,t.length);n<s;n++){switch(e[n]){case"M":-1!==(l=$.inArray(t[n],i.monthNames))&&l<12&&(t[n]=l+1,C.m=t[n]);break;case"F":-1!==(l=$.inArray(t[n],i.monthNames,12))&&11<l&&(t[n]=l+1-12,C.m=t[n]);break;case"n":C.m=parseInt(t[n],10);break;case"j":C.d=parseInt(t[n],10);break;case"g":C.h=parseInt(t[n],10);break;case"a":-1!==(l=$.inArray(t[n],i.AmPm))&&l<2&&t[n]===i.AmPm[l]&&(t[n]=l,C.h=o(t[n],C.h));break;case"A":-1!==(l=$.inArray(t[n],i.AmPm))&&1<l&&t[n]===i.AmPm[l]&&(t[n]=l-2,C.h=o(t[n],C.h))}void 0===t[n]||""===t[n]||isNaN(t[n])||(C[e[n].toLowerCase()]=parseInt(t[n],10))}if(C.f&&(C.m=C.f),0===C.m&&0===C.y&&0===C.d)return"&#160;";C.m=parseInt(C.m,10)-1;var x=C.y;70<=x&&x<=99?C.y=1900+C.y:0<=x&&x<=69&&(C.y=2e3+C.y),y=new Date(C.y,C.m,C.d,C.h,C.i,C.s,C.u),0!==j&&y.setTime(Number(Number(y)+60*j*1e3))}else y=new Date(parseFloat(t));else y=new Date(1e3*parseFloat(t));else y=new Date(C.y,C.m,C.d,C.h,C.i,C.s,C.u);return i.userLocalTime&&0===j&&0!==(j-=(new Date).getTimezoneOffset())&&y.setTime(Number(Number(y)+60*j*1e3)),void 0===r?y:"u1000"===(r=i.masks.hasOwnProperty(r)?i.masks[r]:r||"Y-m-d").toLowerCase()?y.getTime():(x=y.getHours(),j=y.getMinutes(),d=y.getDate(),c=y.getMonth()+1,u=y.getTimezoneOffset(),p=y.getSeconds(),h=y.getMilliseconds(),f=y.getDay(),g=y.getFullYear(),m=(f+6)%7+1,v=(new Date(g,c-1,d)-new Date(g,0,1))/864e5,b=m<5?Math.floor((v+m-1)/7)+1:Math.floor((v+m-1)/7)||((new Date(g-1,0,1).getDay()+6)%7<4?53:52),w={d:a(d),D:i.dayNames[f],j:d,l:i.dayNames[f+7],N:m,S:i.S(d),w:f,z:v,W:b,F:i.monthNames[c-1+12],m:a(c),M:i.monthNames[c-1],n:c,t:"?",L:"?",o:"?",Y:g,y:String(g).substring(2),a:x<12?i.AmPm[0]:i.AmPm[1],A:x<12?i.AmPm[2]:i.AmPm[3],B:"?",g:x%12||12,G:x,h:a(x%12||12),H:a(x),i:a(j),s:a(p),u:h,e:"?",I:"?",O:(0<u?"-":"+")+a(100*Math.floor(Math.abs(u)/60)+Math.abs(u)%60,4),P:"?",T:(String(y).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\-+]\d{4})?)\b/g)||[""]).pop().replace(/[^\-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(y/1e3)},r.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(e){return w.hasOwnProperty(e)?w[e]:e.substring(1)}))},parseDateToNumber:function(e,t){e=jgrid.parseDate.call(this,e,t);return e instanceof Date?e.getTime():0},jqID:function(e){return String(e).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},getGridComponentId:function(e){if(null==this.p||!this.p.id)return"";var t=this.p.id;switch(e){case COMPONENT_NAMES.GRID:return t;case COMPONENT_NAMES.GRID_BOX_DIV:return"gbox_"+t;case COMPONENT_NAMES.GRID_VIEW_DIV:return"gview_"+t;case COMPONENT_NAMES.DIALOG_ALERT_DIV:return"alertmod_"+t;case COMPONENT_NAMES.COLUMN_RESIZER_DIV:return"rs_m"+t;case COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX:return"cb_"+t;case COMPONENT_NAMES.SEARCH_OPERATION_MENU_UL:return"sopt_menu";default:return""}},getGridComponentIdSelector:function(e){e=jgrid.getGridComponentId.call(this,e);return e?"#"+jgrid.jqID(e):""},isHTMLElement:function(e){return"object"==typeof HTMLElement||"function"==typeof HTMLElement?e instanceof HTMLElement:null!=e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},getGridComponent:function(e,t){var r;if(t instanceof $||0<t.length)r=t[0];else{if(!jgrid.isHTMLElement(t))return $();t=$(r=t)}switch(e){case COMPONENT_NAMES.BODY_TABLE:return t.hasClass("ui-jqgrid-bdiv")?t.children("div").children(".ui-jqgrid-btable"):$();case COMPONENT_NAMES.HEADER_TABLE:return t.hasClass("ui-jqgrid-hdiv")?t.children("div").children(".ui-jqgrid-htable"):$();case COMPONENT_NAMES.FOOTER_TABLE:return t.hasClass("ui-jqgrid-sdiv")?t.children("div").children(".ui-jqgrid-ftable"):$();case COMPONENT_NAMES.FROZEN_HEADER_TABLE:return t.hasClass("ui-jqgrid-hdiv")?t.children(".ui-jqgrid-htable"):$();case COMPONENT_NAMES.FROZEN_FOOTER_TABLE:return t.hasClass("ui-jqgrid-sdiv")?t.children(".ui-jqgrid-ftable"):$();case COMPONENT_NAMES.BODY_DIV:return t.hasClass("ui-jqgrid-btable")&&null!=r.grid?$(r.grid.bDiv):$();case COMPONENT_NAMES.HEADER_DIV:return t.hasClass("ui-jqgrid-btable")&&null!=r.grid?$(r.grid.hDiv):$();case COMPONENT_NAMES.FOOTER_DIV:return t.hasClass("ui-jqgrid-btable")&&null!=r.grid?$(r.grid.sDiv):$();default:return $()}},fixScrollOffsetAndhBoxPadding:function(){var r,i,e,t=this.grid;t&&(r=this.p,i=t.bDiv,e=function(e){var t=$(e).children("div").first();t.css(t.hasClass("ui-jqgrid-hbox-rtl")?"padding-left":"padding-right",r.scrollOffset),e.scrollLeft=i.scrollLeft},0<$(i).width())&&(r.scrollOffset=i.offsetWidth-i.clientWidth,e(t.hDiv),t.sDiv)&&e(t.sDiv)},mergeCssClasses:function(){for(var e,t,r,i=$.makeArray(arguments),a={},o=[],l=0;l<i.length;l++)for(t=String(i[l]).replace(/[\t\r\n\f]/g," ").split(" "),e=0;e<t.length;e++)""===(r=t[e])||a.hasOwnProperty(r)||(a[r]=!0,o.push(r));return o.join(" ")},hasOneFromClasses:function(e,t){for(var r=$(e),i=String(t).replace(/[\t\r\n\f]/g," ").split(" "),a=i.length,o=0;o<a;o++)if(r.hasClass(i[o]))return!0;return!1},hasAllClasses:function(e,t){for(var r=$(e),i=String(t).replace(/[\t\r\n\f]/g," ").split(" "),a=i.length,o=0;o<a;o++)if(!r.hasClass(i[o]))return!1;return!0},detectRowEditing:function(e){return this.grid&&null!=this.p&&null!=this.p.editingInfo&&null!=this.p.editingInfo[e]?this.p.editingInfo[e]:null},getCell:function(e,t){var r=this.grid,i=this.p;return r&&i&&((e instanceof $||0<e.length)&&(e=e[0]),"object"==typeof HTMLTableRowElement||"function"==typeof HTMLTableRowElement)&&e instanceof HTMLTableRowElement&&null!=e.cells?(i=$(e.cells[t]),null!=(r=r.fbRows)&&t<r[0].cells.length?i.add(r[e.rowIndex].cells[t]):i):$()},getDataFieldOfCell:function(e,t){var r,i=this.p,e=jgrid.getCell.call(this,e,t);return i.treeGrid&&0<e.children("div.tree-wrap").length&&(e=e.children("span.cell-wrapperleaf,span.cell-wrapper")),r=i.colModel[t].autoResizable&&0!==(r=e.children("span."+i.autoResizing.wrapperClassName)).length?r:e},enumEditableCells:function(e,t,r){var i=this,a=i.grid,o=i.rows,l=i.p;if(null==a||null==o||null==l||null==e||null==e.rowIndex||!e.id||!$.jgrid.isFunction(r))return null;var n,s,d,c,u,p,h,f,g=l.colModel,m=g.length,v=e.rowIndex,o=a.fbRows,b=null!=o,w=b?o[v]:null;for(b&&(e=i.rows[v]),n=0;n<m&&("cb"===(d=(s=g[n]).name)||"subgrid"===d||"rn"===d||(p=((b=b&&!s.frozen?!1:b)?w:e).cells[n],(h=$(p)).hasClass("not-editable-cell"))||(f=h.width(),!0===l.treeGrid&&d===l.ExpandColumn?(f-=h.children("div.tree-wrap").outerWidth(),h=h.children("span.cell-wrapperleaf,span.cell-wrapper").first()):f=0,c=stripPref(l.idPrefix,e.id),p={rowid:e.id,id:c,iCol:n,iRow:v,cmName:d,cm:s,mode:t,td:p,tr:e,trFrozen:w,dataElement:h[0],dataWidth:f},"local"===l.datatype&&(f=null!=(h=l._index[c])?l.data[h]:void 0)&&(p.item=f),s.edittype||(s.edittype="text"),!0!==(u=((l.editingInfo[e.id]||{}).editable||{}).hasOwnProperty(d)?l.editingInfo[e.id].editable[d]:(u=s.editable,$.jgrid.isFunction(u)?u.call(i,p):u))&&"hidden"!==u)||(p.editable=u,!1!==r.call(i,p)));n++);},getEditedValue:function(e,t,r,i){var a,o,l,n,s=t.formatoptions||{},d=t.editoptions||{},c=d.custom_value,u="[name="+jgrid.jqID(t.name)+"]",p=this,h=$(p);if("hidden"===i||"readonly"===i)return $(p).jqGrid("getCell",e.closest("tr.jqgrow").attr("id"),t.name);switch(t.edittype){case"checkbox":g=["Yes","No"],"string"==typeof d.value&&(g=d.value.split(":")),a=e.find("input[type=checkbox]").is(":checked")?g[0]:g[1];break;case"text":case"password":case"textarea":case"button":a=(o=e.find("input"+u+",textarea"+u)).val(),"date"===o.prop("type")&&3===String(a).split("-").length&&(g=s.newformat||h.jqGrid("getGridRes","formatter.date.newformat"),a=jgrid.parseDate.call(p,"Y-m-d",a,g));break;case"select":o=e.find("select option:selected"),d.multiple?(l=[],n=[],o.each(function(){l.push($(this).val()),n.push($(this).text())}),a=l.join(","),r.text=n.join(",")):(a=o.val(),r.text=o.text()),r.value=a;break;case"custom":try{if(!$.jgrid.isFunction(c))throw"e1";if(void 0===(a=c.call(p,e.find(".customelement"),"get")))throw"e2"}catch(e){var f,g=jgrid.info_dialog,m=function(e){h.jqGrid("getGridRes",e)};switch(String(e)){case"e1":f="function 'custom_value' "+m("edit.msg.nodefined");break;case"e2":break;default:f=e.message}g&&$.jgrid.isFunction(g)?g.call(p,m("errors.errcap"),f,m("edit.bClose")):($.jgrid.isFunction(defaults.fatalError)?defaults.fatalError:alert)(f)}break;default:a=e.find("*"+u).text()}return a},guid:1,uidPref:"jqg",randId:function(e){return(e||jgrid.uidPref)+jgrid.guid++},getAccessor:function(e,t){var r,i,a,o=[];if($.jgrid.isFunction(t))return t(e);if(null!=e&&e.hasOwnProperty(t))return e[t];try{if(a=(o="string"==typeof t?t.split("."):o).length)for(r=e;null!=r&&a--;)i=o.shift(),r=r.hasOwnProperty(i)?r[i]:void 0}catch(e){}return r},getXmlData:function(e,t,r){var i="string"==typeof t?t.match(/^(.*)\[(\w+)\]$/):null;return $.jgrid.isFunction(t)?t(e):i&&i[2]?(i[1]?$(i[1],e):$(e)).attr(i[2]):void 0!==e?(i=$(e).find(t),r?i:0<i.length?$(i).text():void 0):void 0},cellWidth:function(){var e=$("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div></div></div>"),t=e.appendTo("body").find("td").width();return e.remove(),.1<Math.abs(t-5)},isCellClassHidden:function(e){var t;return null!=e&&""!==e&&(t=(e=$("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;' class='"+(e||"")+"'></td></tr></table></div></div></div>")).appendTo("body").find("td").is(":hidden"),e.remove(),t)},cell_width:!0,ajaxOptions:{},from:function(source){var context=this,QueryObject=function(d,q){var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],toString=Object.prototype.toString;if("object"!=typeof d||!d.push)throw"data provides is not an array";if(0<d.length&&"object"!=typeof d[0])throw"data items are not objects";return this._hasData=function(){return null!==_data&&0!==_data.length},this._getStr=function(e){var t=[];return _trim&&t.push("jQuery.trim("),t.push("String("+e+" || '')"),_trim&&t.push(")"),_usecase||t.push(".toUpperCase()"),t.join("")},this._strComp=function(e){return"string"==typeof e?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(e){return e=(e=_trim?$.jgrid.trim(e):e).toString().replace(/\\/g,"\\\\").replace(/"/g,'\\"'),_usecase?e:e.toUpperCase()},this._funcLoop=function(r){var i=[];return $.each(_data,function(e,t){i.push(r(t))}),i},this._append=function(e){var t;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,t=0;t<_orDepth;t++)_query+="(";_negate&&(_query+="!"),_query+="("+e+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(e,t){_lastCommand=e,_lastField=t},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(e,t){return null===_lastCommand?self:null!==e&&null!==t?_lastCommand(e,t):null===_lastField?_lastCommand(e):_lastCommand(_lastField,e)},this._equals=function(e,t){return 0===self._compare(e,t,1)},this._compare=function(e,t,r){return void 0===r&&(r=1),void 0===t&&(t=null),null===(e=void 0===e?null:e)&&null===t?0:null===e&&null!==t?1:null!==e&&null===t?-1:("[object Date]"===toString.call(e)&&"[object Date]"===toString.call(t)||_usecase||"number"==typeof e||"number"==typeof t||(e=String(e),t=String(t)),e<t?-r:t<e?r:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(e,t){var r=_sorting[t].by,i=_sorting[t].dir,a=_sorting[t].type,o=_sorting[t].datefmt,l=_sorting[t].sfunc;if(t===_sorting.length-1)return self._getOrder(e,r,i,a,o,l);t++;for(var n,s,d=self._getGroup(e,r,i,a,o),c=[],u=0;u<d.length;u++)for(s=self._doSort(d[u].items,t),n=0;n<s.length;n++)c.push(s[n]);return c},this._getOrder=function(e,r,t,i,a,o){for(var l,n,s,d=[],c=[],u="a"===t?1:-1,p=(s="float"===(i=void 0===i?"text":i)||"number"===i||"currency"===i||"numeric"===i?function(e){e=parseFloat(String(e).replace(_stripNum,""));return isNaN(e)?Number.NEGATIVE_INFINITY:e}:"int"===i||"integer"===i?function(e){return null!=e?parseFloat(String(e).replace(_stripNum,"")):Number.NEGATIVE_INFINITY}:"date"===i||"datetime"===i?function(e){return jgrid.parseDateToNumber.call(context,a,e)}:$.jgrid.isFunction(i)?i:function(e){return e=null!=e?$.jgrid.trim(String(e)):"",_usecase?e:e.toUpperCase()},$.each(e,function(e,t){void 0===(n=""!==r?jgrid.getAccessor(t,r):t)&&(n=""),n=s.call(context,n,t),c.push({vSort:n,data:t,index:e})}),$.jgrid.isFunction(o)?c.sort(function(e,t){return o.call(context,e.vSort,t.vSort,u,e.data,t.data)}):c.sort(function(e,t){return self._compare(e.vSort,t.vSort,u)}),0),h=e.length;p<h;)l=c[p].index,d.push(e[l]),p++;return d},this._getGroup=function(e,i,t,r,a){var o=[],l=null,n=null;return $.each(self._getOrder(e,i,t,r,a),function(e,t){var r=jgrid.getAccessor(t,i);self._equals(n,r=null==r?"":r)||(n=r,null!==l&&o.push(l),l=self._group(i,r)),l.items.push(t)}),null!==l&&o.push(l),o},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null!==match&&($.each(_data,function(){!function(){var localMath='(function (context) {\nvar yesObject = { 1: 1, x: 1, "true": 1, yes: 1, y: 1, on: 1 },noObject = { 0: 1, "false": 1, no: 1, n: 1, off: 1 },normilizeBoolean = function (v) {\nif (typeof v === "string") {\nif (noObject[v.toLowerCase()]) { return false; } else if (yesObject[v.toLowerCase()]) { return true; } }\nreturn !!v;\n},intFunc = function (jQuery, self) { return '+match+"; }; return intFunc.call(context.item, context.jQuery, context.context); }(this))";eval(localMath)&&results.push(this.item)}.call({item:this,jQuery:$,context:context})}),_data=results),self},this.data=function(){return _data},this.select=function(r){var i;return self.execute(),$.jgrid.isFunction(r)?(i=[],$.each(_data,function(e,t){i.push(r(t))}),i):self._hasData()?(self._performSort(),_data):[]},this.hasMatch=function(){return!!self._hasData()&&(self.execute(),0<_data.length)},this.andNot=function(e,t,r){return _negate=!_negate,self.and(e,t,r)},this.orNot=function(e,t,r){return _negate=!_negate,self.or(e,t,r)},this.not=function(e,t,r){return self.andNot(e,t,r)},this.and=function(e,t,r){return _queuedOperator=" && ",void 0===e?self:self._repeatCommand(e,t,r)},this.or=function(e,t,r){return _queuedOperator=" || ",void 0===e?self:self._repeatCommand(e,t,r)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(e){return _negate=!_negate,self.is(e)},this.is=function(e){return self._append("this."+e),self._resetNegate(),self},this._compareValues=function(e,t,r,i,a){var o=t,l=r=void 0===r?null:r,n=void 0===a.stype?"text":a.stype;if(null!==r)switch(n){case"int":case"integer":l=String(l).replace(_stripNum,""),l=isNaN(Number(l))||""===l?"0":Number(l),o="parseInt("+o+"||0,10)",l=String(parseInt(l,10));break;case"boolean":o="normilizeBoolean("+o+")",l="normilizeBoolean("+String(l)+")";break;case"float":case"number":case"currency":case"numeric":l=String(l).replace(_stripNum,""),l=isNaN(Number(l))||""===l?"0":Number(l),o="parseFloat("+o+"||0)",l=String(l);break;case"date":case"datetime":l=String(jgrid.parseDateToNumber.call(context,a.newfmt||"Y-m-d",l)),o='jQuery.jgrid.parseDateToNumber.call(self,"'+a.srcfmt+'",'+o+")";break;default:o=self._getStr(o),l=self._getStr('"'+self._toStr(l)+'"')}return self._append(o+" "+i+" "+l),self._setCommand(e,t),self._resetNegate(),self},this.equals=function(e,t,r){return self._compareValues(self.equals,e,t,"==",r)},this.notEquals=function(e,t,r){return self._compareValues(self.equals,e,t,"!==",r)},this.isNull=function(e,t,r){return self._compareValues(self.equals,e,null,"===",r)},this.greater=function(e,t,r){return self._compareValues(self.greater,e,t,">",r)},this.less=function(e,t,r){return self._compareValues(self.less,e,t,"<",r)},this.greaterOrEquals=function(e,t,r){return self._compareValues(self.greaterOrEquals,e,t,">=",r)},this.lessOrEquals=function(e,t,r){return self._compareValues(self.lessOrEquals,e,t,"<=",r)},this.startsWith=function(e,t){var r=null==t?e:t,r=(_trim?$.jgrid.trim(r.toString()):r.toString()).length;return self._append(self._getStr(e)+".substr(0,"+r+") == "+self._getStr('"'+self._toStr(t)+'"')),self._setCommand(self.startsWith,e),self._resetNegate(),self},this.endsWith=function(e,t){var r=null==t?e:t,r=(_trim?$.jgrid.trim(r.toString()):r.toString()).length;return self._append(self._getStr(e)+".substr("+self._getStr(e)+".length-"+r+","+r+') == "'+self._toStr(t)+'"'),self._setCommand(self.endsWith,e),self._resetNegate(),self},this.contains=function(e,t){return self._append(self._getStr(e)+'.indexOf("'+self._toStr(t)+'",0) > -1'),self._setCommand(self.contains,e),self._resetNegate(),self},this.groupBy=function(e,t,r,i){return self._hasData()?self._getGroup(_data,e,t,r,i):null},this.orderBy=function(e,t,r,i,a){return t=null==t?"a":$.jgrid.trim(t.toString().toLowerCase()),_sorting.push({by:e,dir:t="asc"!==(t="desc"!==t&&"descending"!==t?t:"d")&&"ascending"!==t?t:"a",type:r=null==r?"text":r,datefmt:i=null==i?"Y-m-d":i,sfunc:a=null==a?!1:a}),self},this.inSet=function(e,t,r){var i=void 0===r.stype?"text":r.stype,a=self._getStr('"'+self._toStr(void 0===t?null:t)+'"');return"text"!==i?self._compareValues(self.equals,e,t,"==",r):(self._append("jQuery.inArray("+self._getStr(e)+","+a+".split('"+(context.p.inFilterSeparator||",")+"')) >= 0"),self._setCommand(self.inSet,e),self._resetNegate(),self)},this.custom=function(e,t,r){return self._append("self.p.customSortOperations."+e+'.filter.call(self,{item:this,cmName:"'+t+'",iCol:self.p.iColByName["'+t+'"]>=0 ? self.p.iColByName["'+t+'"] : self.p.iPropByName["'+t+'"],isAddProp:self.p.iColByName["'+t+'"]<0,searchValue:"'+r+'"})'),self._setCommand(self.custom,t),self._resetNegate(),self},self};return new QueryObject(source,null)},serializeFeedback:function(e,t,r){var i=this;return i instanceof $&&0<i.length&&(i=i[0]),"string"==typeof r?r:"string"!=typeof(t=$(i).triggerHandler(t,r))&&(null!=t&&"object"==typeof t||(t=r),$.jgrid.isFunction(e))?e.call(i,t):t},fullBoolFeedback:function(e,t){var r=$.makeArray(arguments).slice(2),t=!1!==(t=$(this).triggerHandler(t,r))&&"stop"!==t;return t=!$.jgrid.isFunction(e)||!1!==(e=e.apply(this,r))&&"stop"!==e?t:!1},feedback:function(e,t,r,i){var a,o=this;return o instanceof $&&0<o.length&&(o=o[0]),null==e||"string"!=typeof i||i.length<2?null:(t="on"===i.substring(0,2)?"jqGrid"+t+i.charAt(2).toUpperCase()+i.substring(3):"jqGrid"+t+i.charAt(0).toUpperCase()+i.substring(1),a=$.makeArray(arguments).slice(4),e=e[i+r],a.unshift(t),a.unshift(e),jgrid.fullBoolFeedback.apply(o,a))},builderSortIcons:function(i){function e(e){var t=o.colModel[i],r=(null!=t&&$.jgrid.isFunction(t.sortIconName)?t:o).sortIconName,r=$.jgrid.isFunction(r)?r.call(a,{order:e,iCol:i,cm:t}):l.jqGrid("getIconRes","sort."+e);return jgrid.mergeCssClasses("ui-grid-ico-sort","ui-icon-"+e,"horizontal"===o.viewsortcols[1]?"ui-i-"+e:"",n,r,"ui-sort-"+o.direction)}var a=this,o=a.p,l=$(a),n=l.jqGrid("getGuiStyles","states.disabled");return"<span class='s-ico"+(o.sortIconsBeforeText?" jqgrid-icons-first":"")+"' style='display:none'><span class='"+e("asc")+"'></span><span class='"+e("desc")+"'></span></span>"},builderFmButon:function(e,t,r,i,a){function o(e){return n.jqGrid("getGuiStyles","dialog."+e)}var l=this.p,n=$(this);return null==l?"":"<a id='"+e+"' class='"+jgrid.mergeCssClasses("fm-button",o("fmButton"),o("right"===a?"rightCorner":"left"===a?"leftCorner":"defaultCorner"),"right"===i?"fm-button-icon-right":"left"===i?"fm-button-icon-left":"")+"' role='button' tabindex='0'>"+(r?"<span class='fm-button-icon "+(n.jqGrid("getIconRes",r)||r)+"'></span>":"")+(t?"<span class='fm-button-text'>"+t+"</span>":"")+"</a>"},convertOnSaveLocally:function(e,t,r,i,a,o){var l=this.p;if(null!=l){if($.jgrid.isFunction(t.convertOnSave))return t.convertOnSave.call(this,{newValue:e,cm:t,oldValue:r,id:i,item:a,iCol:o});"boolean"!=typeof r&&"number"!=typeof r||("boolean"!=typeof r||"checkbox"!==t.edittype&&"checkbox"!==t.formatter?"number"!=typeof r||isNaN(e)||("number"===t.formatter||"currency"===t.formatter?e=parseFloat(e):"integer"===t.formatter&&(e=parseInt(e,10))):(l=String(e).toLowerCase(),i=null!=t.editoptions&&"string"==typeof t.editoptions.value?t.editoptions.value.split(":"):["yes","no"],0<=$.inArray(l,["1","true",i[0].toLowerCase()])?e=!0:0<=$.inArray(l,["0","false",i[1].toLowerCase()])&&(e=!1)))}return e},parseDataToHtml:function(e,t,r,i,a,o,l){var n,s,d,c,u,p,h,f,g,m,v,b,w,y,j,x,C=this,D=C.p,S=$(C),q=!1,F=[],R=[],_=!0!==D.altRows||S.jqGrid("isBootstrapGuiStyle")?"":D.altclass,I=D.groupingView,O=!1,G=parseInt(D.rowNum,10),k=$.fn.jqGrid,N=!0===D.treeGrid&&-1<D.treeANode?C.rows[D.treeANode].rowIndex+1:C.rows.length,E=C.formatCol;for(N<=1&&(D.rowIndexes={}),("local"===D.datatype&&!D.deselectAfterSort||D.multiPageSelection)&&(q=!0),o&&(G*=o+1),n=0;n<Math.min(e,G);n++){for(u=t[n],p=r[n],h=null!=i?i[n]:p,d=((1===a?0:a)+n)%2==1?_:"",q?D.multiselect?(c=-1!==$.inArray(u,D.selarrrow))&&null===D.selrow&&(D.selrow=u):c=u===D.selrow:c=!1,f=F.length,F.push(""),s=0;s<D.colModel.length;s++)switch(g=D.colModel[s].name){case"rn":F.push(function(e,t,r,i){r=(parseInt(r,10)-1)*parseInt(i,10)+1+t;return"<td role='gridcell' class='"+k.getGuiStyles.call(S,"rowNum","jqgrid-rownum")+"' "+E(e,t,r,null,t,!0)+">"+r+"</td>"}(s,n,D.page,D.rowNum));break;case"cb":F.push((j=void 0,j="&nbsp;",x=!(x=void 0),y={rowid:m=u,iRow:b=n,iCol:v=s,data:y=p,checked:w=c},(x=$.jgrid.isFunction(D.hasMultiselectCheckBox)?D.hasMultiselectCheckBox.call(C,y):x)&&(j=$.jgrid.isFunction(D.checkboxHtml)?D.checkboxHtml.call(C,y):"<input type='checkbox' id='jqg_"+D.id+"_"+m+"' class='cbox' name='jqg_"+D.id+"_"+m+"'"+(w?" checked='checked' aria-checked='true'":" aria-checked='false'")+"/>"),"<td role='gridcell' "+E(v,b,"",null,m,!0)+">"+j+"</td>"));break;case"subgrid":F.push(k.addSubGridCell.call(S,s,n+a,u,p));break;default:F.push(function(e,t,r,i,a,o){t=C.formatter(e,t,r,a,"add",o);return"<td role='gridcell' "+E(r,i,t,a,e,o)+">"+t+"</td>"}(u,p[g],s,n+a,h,p))}D.grouping&&(k.groupingPrepare&&!I._locgr&&k.groupingPrepare.call(S,p,n),O=$.jgrid.isFunction(I.groupCollapse)?I.groupCollapse.call(C,{group:I.groups[I.groups.length-1],rowid:u,data:p}):I.groupCollapse),F[f]=C.constructTr(u,O,d,p,h,c),F.push("</tr>"),D.rowIndexes[u]=N,N++,D.grouping&&(R.push(F),F=[]),F.length>D.maxItemsToJoin&&(F=[F.join("")])}return D.grouping&&k.groupingRender&&(l&&(I._locgr=!0),F=[k.groupingRender.call(S,R,G)],jgrid.clearArray(R)),F},fillSelectOptions:function(e,t,r,i,a,o){function l(e,t){if(0<t)return e}var n,s,d,c,u,p,h,f,g=[],m=!1;if(t){if("string"==typeof(t="function"==typeof t?t():t))for(s=t.split(i),n=0;n<s.length;n++)2<(d=s[n].split(r)).length&&(d[1]=$.map(d,l).join(r)),g.push({value:d[0],innerHtml:d[1],selectValue:$.jgrid.trim(d[0]),selectText:$.jgrid.trim(d[1]),selected:!1}),""===d[0]&&(m=!0);else if(Array.isArray(t))for(n=0;n<t.length;n++)g.push({value:t[n][0],innerHtml:t[n][1],selectValue:$.jgrid.trim(t[n][0]),selectText:$.jgrid.trim(t[n][1]),selected:!1});else if("object"==typeof t)for(h in t)t.hasOwnProperty(h)&&g.push({value:h,innerHtml:t[h],selectValue:$.jgrid.trim(h),selectText:$.jgrid.trim(t[h]),selected:!1}),""===h&&(m=!0);if("string"==typeof o){for(f=a?$.map(o.split(","),function(e){return $.jgrid.trim(e)}):[$.jgrid.trim(o)],o=$.jgrid.trim(o),n=0;n<g.length;n++)u=g[n],a||u.selectValue!==o||(p=u.selected=!0),a&&-1<$.inArray(u.selectValue,f)&&(p=u.selected=!0);if(!p)for(n=0;n<g.length;n++)u=g[n],a||u.selectText!==o||(u.selected=!0),a&&-1<$.inArray(u.selectText,f)&&(u.selected=!0)}for(n=0;n<g.length;n++)u=g[n],(c=document.createElement("option")).value=u.value,c.innerHTML=u.innerHtml,u.selected&&(c.selected=!0),e.appendChild(c);return m}},getMethod:function(e){return this.getAccessor($.fn.jqGrid,e)},extend:function(e){$.extend($.fn.jqGrid,e),this.no_legacy_api||$.fn.extend(e)}}),jgrid.clearArray),jqID=jgrid.jqID,getGridComponentIdSelector=jgrid.getGridComponentIdSelector,getGridComponentId=jgrid.getGridComponentId,getGridComponent=jgrid.getGridComponent,stripPref=jgrid.stripPref,randId=jgrid.randId,getAccessor=jgrid.getAccessor,convertOnSaveLocally=jgrid.convertOnSaveLocally,stripHtml=jgrid.stripHtml,htmlEncode=jgrid.htmlEncode,htmlDecode=jgrid.htmlDecode,mergeCssClasses=jgrid.mergeCssClasses,hasOneFromClasses=jgrid.hasOneFromClasses,feedback=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift(""),e.unshift(this.p),jgrid.feedback.apply(this,e)},base=($.fn.jqGrid=function(Ke){var e,et=$.fn.jqGrid;if("string"!=typeof Ke)return this.each(function(){if(!this.grid){var D=this,p=$(D),Y=$.jgrid.isFunction,X=Array.isArray,S=$.extend,h=$.inArray,O=$.jgrid.trim,q=$.each,f=et.setSelection,G=et.getGridRes,k=Y(defaults.fatalError)?defaults.fatalError:alert,e=Ke.locale||defaults.locale||"en-US",t=null!=locales[e]&&"boolean"==typeof locales[e].isRTL&&locales[e].isRTL?"rtl":"ltr",r=Ke.iconSet||defaults.iconSet||("bootstrap"===(Ke.guiStyle||defaults.guiStyle)||"bootstrapPrimary"===(Ke.guiStyle||defaults.guiStyle)?"glyph":"jQueryUI"),i=Ke.guiStyle||defaults.guiStyle||"jQueryUI",x=function(e){return et.getIconRes.call(D,e)},C=function(e,t){return p.jqGrid("getGuiStyles",e,t)},Q=(void 0!==(Ke=null==Ke?{datatype:"local"}:Ke).datastr&&X(Ke.datastr)&&(j=Ke.datastr,Ke.datastr=[]),void 0!==Ke.data&&(de=Ke.data,Ke.data=[]),null!=jgrid.formatter&&null!=jgrid.formatter.unused||k("CRITICAL ERROR!!!\n\n\nOne uses probably\n\n\t$.extend($.jgrid.defaults, {...});\n\nto set default settings of jqGrid instead of the usage the DEEP version of jQuery.extend (with true as the first parameter):\n\n\t$.extend(true, $.jgrid.defaults, {...});\n\nOne other possible reason:\n\nyou included some OLD version of language file (grid.locale-en.js for example) AFTER jquery.jqGrid.min.js. For example all language files of jqGrid 4.7.0 uses non-deep call of jQuery.extend.\n\n\nSome options of jqGrid could still work, but another one will be broken."),void 0===Ke.datatype&&void 0!==Ke.dataType&&(Ke.datatype=Ke.dataType,delete Ke.dataType),void 0===Ke.mtype&&void 0!==Ke.type&&(Ke.mtype=Ke.type,delete Ke.type),D.p={iconSet:r},S(!0,{height:"auto",page:1,rowNum:20,maxRowNum:1e4,pagingDuringEditing:"prevent",sortingDuringEditing:"prevent",reloadingDuringEditing:"prevent",autoresizeOnLoad:!1,columnsToReResizing:[],autoResizing:{wrapperClassName:"ui-jqgrid-cell-wrapper",minColWidth:33,maxColWidth:300,adjustGridWidth:!0,compact:!1,fixWidthOnShrink:!1},doubleClickSensitivity:250,minResizingWidth:10,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],additionalProperties:[],arrayReader:[],rowList:[],colNames:[],sortorder:"asc",threeStateSort:!1,sortname:"",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],editingInfo:{},shrinkToFit:!0,xmlReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,singleSelectClickMode:"toggle",selectOnContextMenu:!0,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:function(e,t,r){var i,a,o;"abort"!==t&&"abort"!==r&&(i=e.getResponseHeader("Content-Type"),a=e.responseText||"",o=function(e){try{var t,r=$.parseJSON(e),i=[];for(t in r)r.hasOwnProperty(t)&&"StackTrace"!==t&&i.push(t+": "+r[t]);e=i.join("<br />")}catch(e){}return e},"text/html"===i?a=function(e){var t,r,i=document.createElement("div"),a=/<body[^>]*>([\s\S]*)<\/body\s*>/gim.exec(e);for(i.innerHTML=null!=a&&2===a.length?a[1]:e,r=(t=i.getElementsByTagName("script")).length;r--;)t[r].parentNode.removeChild(t[r]);e=i.innerHTML;try{""===$.jgrid.trim($(e).text())&&(e="")}catch(e){}return e}(a):"application/json"!==i&&"text/plain"!==i||(a=o(a)),500!==e.status&&0!==e.status&&(a=(t||r)+(r&&r!==t?": "+r:"")+" "+e.status+" "+e.statusText+(""!==a?"<hr />":"")+a),p.jqGrid("displayErrorMessage",a||t||r))},loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,forceClientSorting:!1,multiselect:!1,multikey:!1,editurl:"clientArray",search:!1,caption:"",hidegrid:!0,hiddengrid:!1,useUnformattedDataForCellAttr:!0,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",filters:"filters",nd:"nd",id:"id",idold:"idOld",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,iCol:-1,iRow:-1,nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,resetPageAfterSort:!0,multiPageSelection:!1,selectAllMode:"filtered",scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:16,multiselectWidth:16,multiselectPosition:"left",gridview:!0,rownumWidth:25,rownumbers:!1,pagerpos:"center",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!0,autoEncodeOnEdit:!1,remapColumns:[],cmNamesInputOrder:[],ajaxGridOptions:{},direction:t,toppager:!1,headertitles:!1,scrollTimeout:40,maxItemsToJoin:32768,data:[],lastSelectedData:[],quickEmpty:"quickest",_index:{},indexByColumnData:{},dataIndexById:{},iColByName:{},iPropByName:{},reservedColumnNames:["rn","cb","subgrid"],grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,useDefaultValuesOnGrouping:!0,summary:[],displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1,commonIconClass:x("grouping.common"),plusicon:x("grouping.plus"),minusicon:x("grouping.minus")},ignoreCase:!0,cmTemplate:{},idPrefix:"",iconSet:r,guiStyle:i,locale:e,multiSort:!1,showSortOrder:!0,sortOrderPosition:"afterSortIcons",multiSortOrder:"lastClickedFirstSorted",maxSortColumns:3,treeIcons:{commonIconClass:x("treeGrid.common"),plusLtr:x("treeGrid.plusLtr"),plusRtl:x("treeGrid.plusRtl"),minus:x("treeGrid.minus"),leaf:x("treeGrid.leaf")}},defaults,{navOptions:S(!0,{commonIconClass:x("nav.common"),editicon:x("nav.edit"),addicon:x("nav.add"),delicon:x("nav.del"),searchicon:x("nav.search"),refreshicon:x("nav.refresh"),viewicon:x("nav.view"),saveicon:x("nav.save"),cancelicon:x("nav.cancel"),buttonicon:x("nav.newbutton")},jgrid.nav||{}),actionsNavOptions:S(!0,{commonIconClass:x("actions.common"),editicon:x("actions.edit"),delicon:x("actions.del"),saveicon:x("actions.save"),cancelicon:x("actions.cancel")},jgrid.actionsNav||{}),formEditing:S(!0,{commonIconClass:x("form.common"),prevIcon:x("form.prev"),nextIcon:x("form.next"),saveicon:[!0,"left",x("form.save")],closeicon:[!0,"left",x("form.undo")]},jgrid.edit||{}),searching:S(!0,{commonIconClass:x("search.common"),findDialogIcon:x("search.search"),resetDialogIcon:x("search.reset"),queryDialogIcon:x("search.query")},jgrid.search||{}),formViewing:S(!0,{commonIconClass:x("form.common"),prevIcon:x("form.prev"),nextIcon:x("form.next"),closeicon:[!0,"left",x("form.cancel")]},jgrid.view||{}),formDeleting:S(!0,{commonIconClass:x("form.common"),delicon:[!0,"left",x("form.del")],cancelicon:[!0,"left",x("form.cancel")]},jgrid.del||{})},Ke||{})),N=function(e){return G.call(p,e)},F=function(e){var t=jgrid.getRes(Q,e);return void 0!==t?t:G.call(p,"defaults."+e)};if(Q.recordpos=Q.recordpos||("rtl"===Q.direction?"left":"right"),Q.autoResizing.widthOfVisiblePartOfSortIcon=void 0!==Q.autoResizing.widthOfVisiblePartOfSortIcon?Q.autoResizing.widthOfVisiblePartOfSortIcon:"fontAwesome"===Q.iconSet?13:12,Q.datatype=void 0!==Q.datatype?Q.datatype:void 0!==de||null==Q.url?"local":null!=Q.jsonReader&&"object"==typeof Q.jsonReader?"json":"xml",Q.jsonReader=Q.jsonReader||{},Q.url=Q.url||"",Q.cellsubmit=void 0!==Q.cellsubmit?Q.cellsubmit:void 0===Q.cellurl?"clientArray":"remote",Q.gridview=void 0!==Q.gridview?Q.gridview:null==Q.afterInsertRow,void 0!==de&&(Q.data=de,Ke.data=de),void 0!==j&&(Q.datastr=j,Ke.datastr=j),"TABLE"!==D.tagName.toUpperCase())k("Element is not a table!");else if(""===D.id&&p.attr("id",randId()),void 0!==document.documentMode&&document.documentMode<=5)k("Grid can not be used in this ('quirks') mode!");else{p.empty().attr("tabindex","0"),(D.p=Q).id=D.id,Q.idSel="#"+jqID(D.id),Q.gBoxId=getGridComponentId.call(D,COMPONENT_NAMES.GRID_BOX_DIV),Q.gBox=getGridComponentIdSelector.call(D,COMPONENT_NAMES.GRID_BOX_DIV),Q.gViewId=getGridComponentId.call(D,COMPONENT_NAMES.GRID_VIEW_DIV),Q.gView=getGridComponentIdSelector.call(D,COMPONENT_NAMES.GRID_VIEW_DIV),Q.rsId=getGridComponentId.call(D,COMPONENT_NAMES.COLUMN_RESIZER_DIV),Q.rs=getGridComponentIdSelector.call(D,COMPONENT_NAMES.COLUMN_RESIZER_DIV),Q.cbId=getGridComponentId.call(D,COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX),Q.cb=getGridComponentIdSelector.call(D,COMPONENT_NAMES.HEADER_SELECT_ALL_ROWS_CHECKBOX);for(var R,E,a,A=jgrid.fixScrollOffsetAndhBoxPadding,t=function(e){for(var t={},r=e.length,i=0;i<r;i++)t[e[i].name]=i;return t},T=function(){for(var e,t={},r=Q.colModel,i=r.length,a=0;a<i;a++)((e=r[a]).createColumnIndex||Q.createColumnIndex&&!1!==e.createColumnIndex||"select"===e.stype&&(e.searchoptions||{}).generateValue||"select"===e.edittype&&(e.editoptions||{}).generateValue)&&(t[r[a].name]={});return t},r=function(e){for(var t,r={},i=e.length,a=0;a<i;a++)r["string"==typeof(t=e[a])?t:t.name]=a;return r},K=function(){var e,t,r={};for(this.p.rowIndexes=r,t=0;t<this.rows.length;t++)e=this.rows[t],$(e).hasClass("jqgrow")&&(r[e.id]=e.rowIndex)},M=function(e){var t=$(this).data("pageX");t?(t=(t=String(t).split(";"))[t.length-1],$(this).data("pageX",t+";"+e.pageX)):$(this).data("pageX",e.pageX)},J=function(e,t){return e=parseInt(e,10),isNaN(e)?t||0:e},Z={headers:[],cols:[],footers:[],dragStart:function(e,t,r,i){var a=this,o=$(a.bDiv),l=o.closest(Q.gBox).offset(),i=i.offset().left+("rtl"===Q.direction?0:a.headers[e].width+(jgrid.cell_width?0:J(Q.cellLayout,0))-2);a.resizing={idx:e,startX:i,sOL:i,moved:!1,delta:i-t.pageX},a.curGbox=$(Q.rs),a.curGbox.prependTo("body"),a.curGbox.css({display:"block",left:i,top:r[1]+l.top+1,height:r[2]}),a.curGbox.css("height",r[2]-(a.curGbox.outerHeight()-a.curGbox.height())+"px"),a.curGbox.data("idx",e),a.curGbox.data("delta",i-t.pageX),M.call(this.curGbox,t),feedback.call(getGridComponent(COMPONENT_NAMES.BODY_TABLE,o)[0],"resizeStart",t,e),document.onselectstart=function(){return!1},$(document).on("mousemove.jqGrid",function(e){if(Z.resizing)return Z.dragMove(e),!1}).on("mouseup.jqGrid"+Q.id,function(){if(Z.resizing)return Z.dragEnd(),!1})},dragMove:function(e){var t,r,i,a,o=this,l=o.resizing;l&&(e=e.pageX+l.delta-l.startX,t=(i=o.headers)[l.idx],r="ltr"===Q.direction?t.width+e:t.width-e,a=((Q.colModel[l.idx]||{}).autoResizing||{}).minColWidth||Q.minResizingWidth,l.moved=!0,a<r)&&(null==o.curGbox&&(o.curGbox=$(Q.rs)),o.curGbox.css({left:l.sOL+e}),!0===Q.forceFit?(a=i[l.idx+Q.nv],(i="ltr"===Q.direction?a.width-e:a.width+e)>Q.autoResizing.minColWidth&&(t.newWidth=r,a.newWidth=i)):(o.newWidth="ltr"===Q.direction?Q.tblwidth+e:Q.tblwidth-e,t.newWidth=r))},resizeColumn:function(e,t,r){var i=this,a=i.headers,o=i.footers,l=a[e],n=l.newWidth||l.width,s=getGridComponent(COMPONENT_NAMES.BODY_TABLE,i.bDiv),d=getGridComponent(COMPONENT_NAMES.HEADER_TABLE,i.hDiv).children("thead").children("tr").first()[0].cells,n=parseInt(n,10);Q.colModel[e].width=n,l.width=n,d[e].style.width=n+"px",i.cols[e].style.width=n+"px",i.fbRows&&($(i.fbRows[0].cells[e]).css("width",n),$(getGridComponent(COMPONENT_NAMES.FROZEN_HEADER_TABLE,i.fhDiv)[0].rows[0].cells[e]).css("width",n),Q.footerrow)&&$(getGridComponent(COMPONENT_NAMES.FROZEN_FOOTER_TABLE,i.fsDiv)[0].rows[0].cells[e]).css("width",n),0<o.length&&(o[e].style.width=n+"px"),!0!==r&&A.call(s[0]),!0===Q.forceFit?(n=(l=a[e+Q.nv]).newWidth||l.width,l.width=n,d[e+Q.nv].style.width=n+"px",i.cols[e+Q.nv].style.width=n+"px",0<o.length&&(o[e+Q.nv].style.width=n+"px"),Q.colModel[e+Q.nv].width=n):(Q.tblwidth=i.newWidth||Q.tblwidth,!0!==r&&(i.hDiv.scrollLeft=i.bDiv.scrollLeft,Q.footerrow)&&(i.sDiv.scrollLeft=i.bDiv.scrollLeft)),Q.autowidth||void 0!==Q.widthOrg&&"auto"!==Q.widthOrg&&"100%"!==Q.widthOrg||!0===r||et.setGridWidth.call(s,i.newWidth+Q.scrollOffset,!1),t||feedback.call(s[0],"resizeStop",n,e)},dragEnd:function(){var e=this;e.hDiv.style.cursor="default",e.resizing&&(null!==e.resizing&&!0===e.resizing.moved&&($(e.headers[e.resizing.idx].el).removeData("autoResized"),e.resizeColumn(e.resizing.idx,!1)),$(Q.rs).removeData("pageX"),e.resizing=!1,setTimeout(function(){$(Q.rs).css("display","none").prependTo(Q.gBox)},Q.doubleClickSensitivity)),e.curGbox=null,document.onselectstart=function(){return!0},$(document).off("mousemove.jqGrid mouseup.jqGrid"+Q.id)},populateVisible:function(){var e,t,r,i,a,o=this,l=$(o),n=o.grid,s=n.bDiv,d=$(s),d=(n.timer&&clearTimeout(n.timer),n.timer=null,d.height());if(d){if(o.rows.length)try{t=(e=o.rows[1])&&$(e).outerHeight()||n.prevRowHeight}catch(e){t=n.prevRowHeight}t&&(n.prevRowHeight=t,e=Q.rowNum,n.scrollTop=s.scrollTop,s=n.scrollTop,t=t*e,(l=(e=Math.round(l.position().top)-s)+l.height())<d&&e<=0&&(void 0===Q.lastpage||(parseInt((l+s+t-1)/t,10)||0)<=Q.lastpage)&&(i=parseInt((d-l+t-1)/t,10)||1,e=0<=l||i<2||!0===Q.scroll?(r=(Math.round((l+s)/t)||0)+1,-1):1),0<e&&(r=(parseInt(s/t,10)||0)+1,i=(parseInt((s+d)/t,10)||0)+2-r,a=!0),!i||Q.lastpage&&(r>Q.lastpage||1===Q.lastpage||r===Q.page&&r===Q.lastpage)||(n.hDiv.loading?n.timer=setTimeout(function(){n.populateVisible.call(o)},Q.scrollTimeout):(Q.page=r,a&&(n.selectionPreserver.call(o),n.emptyRows.call(o,!1,!1)),n.populate.call(o,i))))}},scrollGrid:function(){var e;return Q.scroll&&(e=this.scrollTop,void 0===Z.scrollTop&&(Z.scrollTop=0),e!==Z.scrollTop)&&(Z.scrollTop=e,Z.timer&&clearTimeout(Z.timer),Z.timer=setTimeout(function(){Z.populateVisible.call(D)},Q.scrollTimeout)),Z.hDiv.scrollLeft=this.scrollLeft,Q.footerrow&&(Z.sDiv.scrollLeft=this.scrollLeft),!1},selectionPreserver:function(){var t=$(this),r=Q.selrow,i=Q.selarrrow?$.makeArray(Q.selarrrow):null,a=this.grid.bDiv,o=a.scrollLeft,l=function(){var e;if(Q.selrow=null,!Q.multiPageSelection){if(clearArray(Q.selarrrow),Q.multiselect&&i&&0<i.length)for(e=0;e<i.length;e++)i[e]!==r&&f.call(t,i[e],!1,null);r&&f.call(t,r,!1,null)}a.scrollLeft=o,t.off(".selectionPreserver",l)};t.on("jqGridGridComplete.selectionPreserver",l)}},i=(D.grid=Z,feedback.call(D,"beforeInitGrid"),Q.iColByName=t(Q.colModel),Q.iPropByName=r(Q.additionalProperties),jgrid.msie=0<jgrid.msiever(),$("<div class='"+C("gView","ui-jqgrid-view")+"' role='grid' aria-multiselectable='"+!!Q.multiselect+"'></div>")),B=jgrid.msie,e=(Q.direction=O(Q.direction.toLowerCase()),-1===h(Q.direction,["ltr","rtl"])&&(Q.direction="ltr"),R=Q.direction,$(i).insertBefore(D),p.removeClass("scroll").appendTo(i),$("<div class='"+C("gBox","ui-jqgrid")+"'></div>")),P=($(e).attr({id:Q.gBoxId,dir:R}).insertBefore(i),$(i).attr("id",Q.gViewId).appendTo(e),$("<div class='"+C("overlay","jqgrid-overlay")+"' id='lui_"+Q.id+"'></div>").insertBefore(i),$("<div class='"+C("loading","loading")+"' id='load_"+Q.id+"'>"+F("loadtext")+"</div>").insertBefore(i),p.attr({role:"presentation","aria-labelledby":"gbox_"+D.id}),function(e){return stripPref(Q.idPrefix,e)}),z=function(e,t,r,i,a,o){function l(e){return"string"==typeof e?e.replace(/'/g,"&#39;"):e}var n,s,d,c,u=Q.colModel[e],p=u.autoResizable?"<span class='"+Q.autoResizing.wrapperClassName+"'>":"",p=u.autoResizable?r.substring(p.length,r.length-"</span>".length):r,h=Q.useUnformattedDataForCellAttr&&null!=o?o[u.name]:u.autoResizable?p:r,f=u.classes,g=u.align?"text-align:"+u.align+";":"",m=" aria-describedby='"+Q.id+"_"+u.name+"'";if(!0===u.hidden&&(g+="display:none;"),0===t)g+="width: "+Z.headers[e].width+"px;";else if((Y(u.cellattr)||"string"==typeof u.cellattr&&null!=jgrid.cellattr&&Y(jgrid.cellattr[u.cellattr]))&&"string"==typeof(n=(Y(u.cellattr)?u.cellattr:jgrid.cellattr[u.cellattr]).call(D,a,h,i,u,o,p)))for(n=n.replace(/\n/g,"&#xA;");;){if(null===(s=/^\s*(\w+[\w|\-]*)\s*=\s*([\"|\'])(.*?)\2(.*)/.exec(n))||s.length<5)return!c&&u.title&&(c=h),m+" style='"+l(g)+"'"+(f?" class='"+l(f)+"'":"")+(c?" title='"+l(c)+"'":"");switch(d=s[3],n=s[4],s[1].toLowerCase()){case"class":f?f+=" "+d:f=d;break;case"title":c=d;break;case"style":g+=d;break;default:m+=" "+s[1]+"="+s[2]+d+s[2]}}return(""!==g?"style='"+g+"'":"")+((void 0!==f?" class='"+f+"'":"")+(u.title&&h?" title='"+stripHtml(r).replace(/'/g,"&apos;")+"'":""))+m},L=function(e){return null==e||""===e?"&#160;":(Q.autoencode?htmlEncode:String)(e)},ee=function(e){function t(e){return!0===e||"true"===e||"1"===e}var r,i=Q.treeReader,a=i.loaded,o=i.leaf_field,l=i.expanded_field;"nested"!==Q.treeGridModel||e[o]||(r=parseInt(e[i.left_field],10),i=parseInt(e[i.right_field],10),e[o]=i===r+1),void 0!==e[a]&&(e[a]=t(e[a])),e[o]=t(e[o]),e[l]=t(e[l])},te=function(e,t){var r,i;for(r in Q.indexByColumnData)Q.indexByColumnData.hasOwnProperty(r)&&(i=e[r],e.hasOwnProperty(r))&&void 0!==i&&""!==i&&(Q.ignoreCase&&(i=String(i).toLowerCase()),void 0===Q.indexByColumnData[r][i]&&(Q.indexByColumnData[r][i]={}),Q.indexByColumnData[r][i][t]=e[r],void 0===Q.dataIndexById[t]&&(Q.dataIndexById[t]={}),void 0===Q.dataIndexById[t][r]&&(Q.dataIndexById[t][r]={}),Q.dataIndexById[t][r][i]=Q.indexByColumnData[r][i])},V=function(){var e,t,r,i,a,o,l,n,s,d,c,u=Q.data,p=u.length,h=Q.localReader,f=Q.additionalProperties,g=h.cell,m=Q.arrayReaderInfos;if("local"!==Q.datatype||!0!==h.repeatitems){if(Q.treeGrid)for(e=0;e<p;e++)ee(u[e])}else for(i=!1===Q.keyName?Y(h.id)?h.id.call(D,u):h.id:Q.keyName,isNaN(i)?Y(i)||null!=Q.arrayReaderInfos[i]&&(a=Q.arrayReaderInfos[i].order):a=Number(i),e=0;e<p;e++){for(s in t=u[e],r=g&&getAccessor(t,g)||t,d=X(r),l={},m)m.hasOwnProperty(s)&&(c=m[s],o=getAccessor(r,d?c.order:c.name),void 0!==(o=1===c.type&&null!=(c=f[c.index])&&Y(c.convert)?c.convert(o,r):o))&&(l[s]=o);void 0!==l[i]?n=void 0!==l[i]?l[i]:randId():void 0===(n=void 0===(n=getAccessor(t,X(t)?a:i))?getAccessor(r,X(r)?a:i):n)&&(n=randId()),n=String(n),l[h.id]=n,Q.treeGrid&&ee(l),S(u[e],l)}},H=function(){var e,t,r,i=Q.data.length,a=!1===Q.keyName||Q.loadonce&&Q.dataTypeOrg?Q.localReader.id:Q.keyName;for(Q._index={},Q.dataIndexById={},Q.indexByColumnData=T(),e=0;e<i;e++)r=Q.data[e],void 0===(t=getAccessor(r,a))&&null!=r&&(t=String(randId()),void 0===r[a])&&(r[a]=t),Q._index[t]=e,te.call(this,r,t)},re=function(){for(var e,t=$.fn.fmatter,r=0;r<Q.colModel.length;r++)"string"==typeof(e=Q.colModel[r].formatter)&&null!=t&&Y(t[e])&&Y(t[e].pageFinalization)&&t[e].pageFinalization.call(this,r)},ie=function(e,t){for(var r,i,a=Q.colModel,o=a.length,l=function(e){return null==e||""===e?"&#160;":htmlEncode(e)},n=function(e){return null==e||""===e?"&#160;":String(e)},s=0;s<o;s++)(r=a[s]).cellBuilder=null,e||(i={colModel:r,gid:Q.id,pos:s},void 0===r.formatter?r.cellBuilder=Q.autoencode?l:n:"string"==typeof r.formatter&&null!=$.fn.fmatter&&Y($.fn.fmatter.getCellBuilder)?r.cellBuilder=$.fn.fmatter.getCellBuilder.call(D,r.formatter,i,t||"add"):Y(r.getCellBuilder)&&(r.cellBuilder=r.getCellBuilder.call(D,i,t||"add")))},W=function(e,t,A,r){var i=this,a=$(i),T=new Date,o=Q.datatype,l="local"!==o&&Q.loadonce||"xmlstring"===o||"jsonstring"===o,n=("xmlstring"===o||"xml"===o)&&$.isXMLDoc(e),s="_id_",d=Q.localReader,c=getAccessor;if(e&&("xml"!==o||n)){switch(t=-1!==Q.treeANode||Q.scroll?1<t?t:1:(Z.emptyRows.call(i,!1,!0),1),l&&(clearArray(Q.data),clearArray(Q.lastSelectedData),Q._index={},Q.grouping&&null!=Q.groupingView&&(Q.groupingView.groups=[],Q.groupingView._locgr=!1),Q.localReader.id=s),Q.reccount=0,o){case"xml":case"xmlstring":d=Q.xmlReader,c=jgrid.getXmlData;break;case"json":case"jsonp":case"jsonstring":d=Q.jsonReader}var u,p,h,f,g,m,v,b,w,y,j,x,C,D,S={},M=Q.colModel,q=M.length,F=Q.arrayReaderInfos,R={},B=function(t){return function(e){e=null!=e&&Y(e.getAttribute)?e.getAttribute(t):null;return null!==e?e:void 0}},P=function(t){return function(){var e=R[t];return null!=e&&0<(e=e.childNodes).length?e[0].nodeValue:void 0}},_=(Q.page=J(c(e,d.page),Q.page),Q.lastpage=J(c(e,d.total),1),Q.records=J(c(e,d.records)),Y(d.userdata)?Q.userData=d.userdata.call(i,e)||{}:n?c(e,d.userdata,!0).each(function(){Q.userData[this.getAttribute("name")]=$(this).text()}):Q.userData=c(e,d.userdata)||{},ie(),{}),I=Q.additionalProperties,z=function(e,t){n&&"string"==typeof t&&(/^\w+$/.test(t)?_[e]=P(t):/^\[\w+\]$/.test(t)&&(_[e]=B(t.substring(1,t.length-1))))},L=function(e){var t=e.name,r=n?e.xmlmap||t:("local"===o&&!Q.dataTypeOrg||"jsonstring"===o||"json"===o||"jsonp"===o)&&e.jsonmap||t;!1!==Q.keyName&&!0===e.key&&(Q.keyName=t),"string"!=typeof r&&!Y(r)||(_[t]=r),Y(r)||z(t,r)};for(E=0;E<q;E++)L(M[E]);for(q=I.length,E=0;E<q;E++)"object"==typeof(D=I[E])&&null!=D?L(D):z(D,D);if(f=!1===Q.keyName?Y(d.id)?d.id.call(i,e):d.id:Q.keyName,isNaN(f)?Y(f)||(F[f]&&(g=F[f].order),n&&!1===Q.keyName&&("string"==typeof f&&/^\[\w+\]$/.test(f)?f=B(f.substring(1,f.length-1)):"string"==typeof f&&/^\w+$/.test(f)&&(f=P(f)))):g=Number(f),h=c(e,d.root,!0),d.row)if(1===h.length&&"string"==typeof d.row&&/^\w+$/.test(d.row)){for(N=[],w=(b=h[0].childNodes).length,v=0;v<w;v++)1===(y=b[v]).nodeType&&y.nodeName===d.row&&N.push(y);h=N}else h=c(h,d.row,!0);0<(p=(h=(h=null==h&&X(e)?e:h)||[]).length)&&Q.page<=0&&(Q.page=1);var O,G,k=parseInt(Q.rowNum,10),V=(r&&(k*=r+1),[]),H=[],N=[];for(E=0;E<p;E++){if(G=h[E],u=d.repeatitems&&d.cell&&c(G,d.cell,!0)||G,x=d.repeatitems&&(n||X(u)),S={},R={},n&&!x&&null!=u)for(w=(b=u.childNodes).length,v=0;v<w;v++)1===(y=b[v]).nodeType&&(R[y.nodeName]=y);for(m in F)F.hasOwnProperty(m)&&(j=F[m],x?(C=u[j.order],n&&null!=C&&(C=C.textContent||C.text)):C=null!=_[m]&&"string"!=typeof _[m]?_[m].call(i,u,{cmName:m,iItem:E}):c(u,"string"==typeof _[m]?_[m]:j.name),void 0!==(C=1===j.type&&null!=(D=I[j.index])&&Y(D.convert)?D.convert(C,u):C))&&(S[m]=C);if(void 0!==S[f]?O=void 0!==S[f]?S[f]:randId():void 0===(O=void 0===(O=c(G,X(G)?g:f))?c(u,X(u)?g:f):O)&&(O=randId()),void 0===S[f]&&(S[f]=O),O=String(O),G=Q.idPrefix+O,Q.treeGrid&&ee(S),E<k)H.push(G),V.push(u),N.push(S);else if(!l)break;!l&&!0!==Q.treeGrid||(S[s]=O,Q.data.push(S),te(S,O),Q._index[S[s]]=Q.data.length-1)}if(l&&!0!==Q.treeGrid){if(Q.forceClientSorting)return;Q.lastSelectedData=Q.data.slice()}e=jgrid.parseDataToHtml.call(i,p,H,N,V,t,r,l),t=(ie(!0),-1<Q.treeANode?Q.treeANode:0),r=$(i.tBodies[0]);if(!0===Q.treeGrid&&0<t?$(i.rows[t]).after(e.join("")):Q.scroll?r.append(e.join("")):(null==i.firstElementChild||void 0!==document.documentMode&&document.documentMode<=9?r.html(r.html()+e.join("")):i.firstElementChild.innerHTML+=e.join(""),i.grid.cols=i.rows[0].cells),Q.grouping){K.call(i);for(var W,U=function(e){var t=$(this).closest("tr.jqgroup").attr("id");return a.jqGrid("groupingToggle",t,this,e),!1},E=0;E<i.rows.length;E++)(W=$(i.rows[E])).hasClass("jqgroup")&&W.children("td").children("span.tree-wrap").click(U)}if(!0===Q.subGrid)try{et.addSubGrid.call(a,Q.iColByName.subgrid)}catch(e){}if(!1===Q.gridview||Y(Q.afterInsertRow))for(E=0;E<Math.min(p,k);E++)feedback.call(i,"afterInsertRow",H[E],N[E],V[E]);if(Q.totaltime=new Date-T,0<E&&0===Q.records&&(Q.records=p),clearArray(e),!0===Q.treeGrid)try{et.setTreeNode.call(a,t+1,E+t+1)}catch(e){}Q.reccount=Math.min(p,k),Q.treeANode=-1,Q.userDataOnFooter&&et.footerData.call(a,"set",Q.userData,!0),l&&(Q.records=p,Q.lastpage=Math.ceil(p/k)),A||i.updatepager(!1,!0),re.call(i)}},U=function(){var e=$(this),n=Q.multiSort?[]:"",t={},s=!1,c={},d=[],u=[],p=N("formatter.date.srcformat"),h=N("formatter.date.newformat");if(!X(Q.data))return{};Q.multiSort&&ce(n,t);function r(e,t,r){var i,a,o=e.index||e.name,l=e.sorttype||"text";if(c[e.name]={reader:!Q.dataTypeOrg&&e.jsonmap||e.name,iCol:t,stype:l,srcfmt:"",newfmt:"",sfunc:e.sortfunc||null,isAddProp:!0===r},"date"!==l&&"datetime"!==l||(e.formatter&&"string"==typeof e.formatter&&"date"===e.formatter?(i=e.formatoptions&&e.formatoptions.srcformat?e.formatoptions.srcformat:p,a=e.formatoptions&&e.formatoptions.newformat?e.formatoptions.newformat:h):i=a=e.datefmt||"Y-m-d",c[e.name].srcfmt=i,c[e.name].newfmt=a),Q.grouping)for(g=0,f=m.groupField.length;g<f;g++)e.name===m.groupField[g]&&(d[g]=c[o],u[g]=o);Q.multiSort||s||e.index!==Q.sortname&&e.name!==Q.sortname||(n=e.name,s=!0)}var f,g,m=!!Q.grouping&&Q.groupingView;if(q(Q.colModel,function(e){r(this,e)}),q(Q.additionalProperties,function(e){r("string"==typeof this?{name:this}:this,e,!0)}),Q.treeGrid)return et.SortTree.call(e,n,Q.sortorder,null!=c[n]&&c[n].stype?c[n].stype:"text",null!=c[n]&&c[n].srcfmt?c[n].srcfmt:""),!1;var v={eq:function(e){return e.equals},ne:function(e){return e.notEquals},lt:function(e){return e.less},le:function(e){return e.lessOrEquals},gt:function(e){return e.greater},ge:function(e){return e.greaterOrEquals},cn:function(e){return e.contains},nc:function(e,t){return("OR"===t?e.orNot():e.andNot()).contains},bw:function(e){return e.startsWith},bn:function(e,t){return("OR"===t?e.orNot():e.andNot()).startsWith},en:function(e,t){return("OR"===t?e.orNot():e.andNot()).endsWith},ew:function(e){return e.endsWith},ni:function(e,t){return("OR"===t?e.orNot():e.andNot()).inSet},in:function(e){return e.inSet},nu:function(e){return e.isNull},nn:function(e,t){return("OR"===t?e.orNot():e.andNot()).isNull}},b=jgrid.from.call(this,Q.data);if(Q.ignoreCase&&(b=b.ignoreCase()),!0===Q.search){var i=Q.postData[(Q.searching||{}).sFilter||Q.prmNames.filters];if(i)!function e(t){var r,i,a,o,l,n,s,d=0;if(null!=t.groups){for((i=t.groups.length&&"OR"===t.groupOp.toString().toUpperCase())&&b.orBegin(),r=0;r<t.groups.length;r++){0<d&&i&&b.or();try{e(t.groups[r])}catch(e){k(e)}d++}i&&b.orEnd()}if(null!=t.rules)try{for((a=t.rules.length&&"OR"===t.groupOp.toString().toUpperCase())&&b.orBegin(),r=0;r<t.rules.length;r++)l=t.rules[r],o=t.groupOp.toString().toUpperCase(),v[l.op]&&l.field?(0<d&&o&&"OR"===o&&(b=b.or()),null!=(s=c[l.field])&&(n=s.reader,b=v[l.op](b,o)(Y(n)?'jQuery.jgrid.getAccessor(this,jQuery("'+Q.idSel+'")[0].p.colModel['+s.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+n+"')",l.data,c[l.field]))):null!=Q.customSortOperations&&null!=Q.customSortOperations[l.op]&&Y(Q.customSortOperations[l.op].filter)&&(b=b.custom(l.op,l.field,l.data)),d++;a&&b.orEnd()}catch(e){k(e)}}(i="string"==typeof i?$.parseJSON(i):i);else try{var a=c[Q.postData.searchField],b=v[Q.postData.searchOper](b)(Y(a.reader)?'jQuery.jgrid.getAccessor(this,jQuery("'+Q.idSel+'")[0].p.colModel['+a.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+a.reader+"')",Q.postData.searchString,c[Q.postData.searchField])}catch(e){}}if(Q.grouping)for(g=0;g<f&&g<u.length&&g<d.length;g++)b.orderBy(u[g],m.groupOrder[g],d[g].stype,d[g].srcfmt);Q.multiSort?q(n,function(){b.orderBy(this,t[this],c[this].stype,c[this].srcfmt,c[this].sfunc)}):n&&Q.sortorder&&s&&b.orderBy(Q.sortname,"DESC"===Q.sortorder.toUpperCase()?"d":"a",c[n].stype,c[n].srcfmt,c[n].sfunc),Q.lastSelectedData=b.select();var o,l,w,y=parseInt(Q.rowNum,10),j=Q.lastSelectedData.length,i=parseInt(Q.page,10),a=Math.ceil(j/y),x={};if(Q.grouping&&Q.groupingView._locgr){if(Q.groupingView.groups=[],Q.footerrow&&Q.userDataOnFooter){for(l in Q.userData)Q.userData.hasOwnProperty(l)&&(Q.userData[l]=0);w=!0}for(o=0;o<j;o++){if(w)for(l in Q.userData)Q.userData.hasOwnProperty(l)&&(Q.userData[l]+=parseFloat(Q.lastSelectedData[o][l]||0));et.groupingPrepare.call(e,Q.lastSelectedData[o],o,y)}}var c=b=null,C=Q.localReader;return x[C.total]=a,x[C.page]=i,x[C.records]=j,x[C.root]=Q.lastSelectedData.slice((i-1)*y,i*y),x[C.userdata]=Q.userData,x},ae=function(e){var t,r=e.outerWidth();return r<=0&&(t=$(this).closest(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='"+C("gBox","ui-jqgrid")+"' style='font-size:"+t+";visibility:hidden;margin:0;padding:0;' ></div>"),$(e).clone().appendTo("#testpg"),r=$("#testpg>.ui-pg-table").width(),$("#testpg").remove()),0<r&&e.parent().width(r),r},oe=function(){this.grid.hDiv.loading=!0,Q.hiddengrid||et.progressBar.call($(this),{method:"show",loadtype:Q.loadui,htmlcontent:F("loadtext")})},le=function(){this.grid.hDiv.loading=!1,et.progressBar.call($(this),{method:"hide",loadtype:Q.loadui})},_=function(i){var a=this,t=$(a),r=a.grid;if(!r.hDiv.loading){var e,o,l=Q.scroll&&!1===i,n={},s=Q.prmNames,d=(Q.page<=0&&(Q.page=Math.min(1,Q.lastpage)),null!==s.search&&(n[s.search]=Q.search),null!==s.nd&&(n[s.nd]=(new Date).getTime()),(isNaN(parseInt(Q.rowNum,10))||parseInt(Q.rowNum,10)<=0)&&(Q.rowNum=Q.maxRowNum),null!==s.rows&&(n[s.rows]=Q.rowNum),null!==s.page&&(n[s.page]=Q.page),null!==s.sort&&(n[s.sort]=Q.sortname),null!==s.order&&(n[s.order]=Q.sortorder),null!==Q.rowTotal&&null!==s.totalrows&&(n[s.totalrows]=Q.rowTotal),Y(Q.loadComplete)),c=d?Q.loadComplete:null,u=0;if(1<(i=i||1)?null!==s.npage?(n[s.npage]=i,u=i-1,i=1):c=function(e){Q.page++,r.hDiv.loading=!1,d&&Q.loadComplete.call(a,e),_.call(a,i-1)}:null!==s.npage&&delete Q.postData[s.npage],Q.grouping&&et.groupingSetup){et.groupingSetup.call(t);for(var p,h,f,g=Q.groupingView,m="",v=0;v<g.groupField.length;v++){for(p=g.groupField[v],h=0;h<Q.colModel.length;h++)(f=Q.colModel[h]).name===p&&f.index&&(p=f.index);m+=p+" "+g.groupOrder[v]+", "}n[s.sort]=m+n[s.sort]}S(Q.postData,n);var b=Q.scroll?a.rows.length-1:1,w=function(){A.call(a),Q.autowidth||void 0!==Q.widthOrg&&"auto"!==Q.widthOrg&&"100%"!==Q.widthOrg||et.setGridWidth.call(t,Q.tblwidth+Q.scrollOffset,!1)},y=function(){var e;if(Q.autoresizeOnLoad)et.autoResizeAllColumns.call(t),clearArray(Q.columnsToReResizing),Q.autowidth&&et.setGridWidth.call(t,t.closest(".ui-jqgrid").parent().width(),!0);else{for(e=0;e<Q.columnsToReResizing.length;e++)et.autoResizeColumn.call(t,Q.columnsToReResizing[e]);clearArray(Q.columnsToReResizing)}},j=function(){feedback.call(a,"loadComplete",o),y(),t.triggerHandler("jqGridAfterLoadComplete",[o]),le.call(a),Q.datatype="local",Q.datastr=null,w()},x=function(e){t.triggerHandler("jqGridLoadComplete",[e]),c&&c.call(a,e),y(),t.triggerHandler("jqGridAfterLoadComplete",[e]),l&&r.populateVisible.call(a),1===i&&le.call(a),w()},C=function(){var e=U.call(a);W.call(a,e,b,1<i,u),x(e)};if(feedback.call(a,"beforeRequest"))if(Y(Q.datatype))Q.datatype.call(a,Q.postData,"load_"+Q.id,b,i,u);else switch(e=Q.datatype.toLowerCase(),$(Z.eDiv).hide(),e){case"json":case"jsonp":case"xml":case"script":$.ajax(S({url:Q.url,type:Q.mtype,dataType:e,data:jgrid.serializeFeedback.call(D,Q.serializeGridData,"jqGridSerializeGridData",Q.postData),success:function(e,t,r){Q.jqXhr=null,$(Z.eDiv).hide(),Y(Q.beforeProcessing)&&!1===Q.beforeProcessing.call(a,e,t,r)?le.call(a):(W.call(a,e,b,1<i,u),x(e),(Q.loadonce||Q.treeGrid)&&(Q.dataTypeOrg=Q.datatype,Q.datatype="local",Q.forceClientSorting)&&C())},error:function(e,t,r){Q.jqXhr=null,Y(Q.loadError)&&Q.loadError.call(a,e,t,r),1===i&&le.call(a)},beforeSend:function(e,t){var r=!0;if(!1===(r=void 0===(r=Y(Q.loadBeforeSend)?Q.loadBeforeSend.call(a,e,t):r)?!0:r))return!1;Q.jqXhr=e,oe.call(a)}},jgrid.ajaxOptions,Q.ajaxGridOptions));break;case"xmlstring":oe.call(a),o="string"==typeof Q.datastr?$.parseXML(Q.datastr):Q.datastr,W.call(a,o),j(),Q.forceClientSorting&&C();break;case"jsonstring":oe.call(a),o=Q.datastr&&"string"==typeof Q.datastr?$.parseJSON(Q.datastr):Q.datastr,W.call(a,o),j(),Q.forceClientSorting&&C();break;case"local":case"clientside":oe.call(a),Q.datatype="local",C()}}},ne=function(e){var t=this.grid;$(Q.cb,t.hDiv).prop("checked",e),Q.frozenColumns&&$(Q.cb,t.fhDiv).prop("checked",e)},se=function(e){for(var t,r=0;r<Q.savedRow.length;r++)t=Q.savedRow[r],"save"===e?t.hasOwnProperty("ic")?p.jqGrid("saveCell",t.id,t.ic):p.jqGrid("saveRow",t.id):t.hasOwnProperty("ic")?p.jqGrid("restoreCell",t.id,t.ic):p.jqGrid("restoreRow",t.id)},de=function(e,d){function c(e,t,r){return!(0<Q.savedRow.length&&"prevent"===Q.pagingDuringEditing||!feedback.call(D,"onPaging",e,{newPage:t,currentPage:J(Q.page,1),lastPage:J(Q.lastpage,1),currentRowNum:J(Q.rowNum,10),newRowNum:r})||(Q.selrow=null,Q.multiselect&&(Q.multiPageSelection||clearArray(Q.selarrrow),ne.call(D,!1)),se(Q.pagingDuringEditing),0))}var t,r,i,a,o,l,n,s=C("states.hover"),u=C("states.disabled"),p="<td class='ui-pg-button "+u+"'><span class='ui-separator'></span></td>",h="",f="<table style='table-layout:auto;white-space: pre;"+("left"===Q.pagerpos?"margin-right:auto;":"right"===Q.pagerpos?"margin-left:auto;":"margin-left:auto;margin-right:auto;")+"' class='ui-pg-table'><tbody><tr>",g="";if(d+="_"+e,t="pg_"+e,v=e+"_left",i=e+"_center",r=e+"_right",$("#"+jqID(e)).append("<div id='"+t+"' class='ui-pager-control' role='group'><table class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+v+"' class='ui-jqgrid-pg-left'"+(void 0!==Q.pagerLeftWidth?" style='width:"+Q.pagerLeftWidth+"px;'":"")+"></td><td id='"+i+"' class='ui-jqgrid-pg-center'"+(void 0!==Q.pagerCenterWidth?" style='width:"+Q.pagerCenterWidth+"px;'":"")+"></td><td id='"+r+"' class='ui-jqgrid-pg-right'"+(void 0!==Q.pagerRightWidth?" style='width:"+Q.pagerRightWidth+"px;'":"")+"></td></tr></tbody></table></div>").attr("dir","ltr"),t="#"+jqID(t),0<Q.rowList.length){var m,g="<td dir='"+R+"'>",v=F("pgrecs");for(g+="<select class='"+C("pager.pagerSelect","ui-pg-selbox")+"' "+(v?"title='"+v+"'":"")+">",a=0;a<Q.rowList.length;a++)1===(m=Q.rowList[a].toString().split(":")).length&&(m[1]=m[0]),g+="<option value='"+m[0]+"'"+(J(Q.rowNum,0)===J(m[0],0)?" selected='selected'":"")+">"+m[1]+"</option>";g+="</select></td>"}if("rtl"===R&&(f+=g),!0===Q.pginput&&(h="<td dir='"+R+"'>"+jgrid.format(F("pgtext")||"","<input aria-label='Page No.' class='"+C("pager.pagerInput","ui-pg-input")+"' type='text' size='2' maxlength='7' value='0'/>","<span id='sp_1_"+e+"'>0</span>")+"</td>"),e="#"+jqID(e),!0===Q.pgbuttons){var b=["first","prev","next","last"],w=b.slice(),y=C("pager.pagerButton","ui-pg-button");for("rtl"===R&&b.reverse(),a=0;a<b.length;a++)f+=(o=b[a],l=w[a],n=void 0,n=F("pg"+o),"<td role='button' tabindex='0' id='"+o+d+"' class='"+y+"' "+(n?"title='"+n+"'":"")+"><span class='"+x("pager."+l)+"'></span></td>"),1===a&&(f+=""!==h?p+h+p:"")}else""!==h&&(f+=h);"ltr"===R&&(f+=g),f+="</tr></tbody></table>",!0===Q.viewrecords&&$("td"+e+"_"+Q.recordpos,t).append("<span dir='"+R+"' style='text-align:"+Q.recordpos+"' class='ui-paging-info'></span>");var j=$("td"+e+"_"+Q.pagerpos,t);j.append(f),i=ae.call(this,j.children(".ui-pg-table")),Q._nvtd=[],Q._nvtd[0]=i?Math.floor((Q.width-i)/2):Math.floor(Q.width/3),Q._nvtd[1]=0,f=null,$(".ui-pg-selbox",t).on("change",function(){var e=J(this.value,10),t=Math.round(Q.rowNum*(Q.page-1)/e-.5)+1;return c("records",t,e)&&(Q.page=t,Q.rowNum=e,Q.pager&&$(".ui-pg-selbox",Q.pager).val(e),Q.toppager&&$(".ui-pg-selbox",Q.toppager).val(e),_.call(D)),!1}),!0===Q.pgbuttons&&($(".ui-pg-button",t).hover(function(){hasOneFromClasses(this,u)?this.style.cursor="default":($(this).addClass(s),this.style.cursor="pointer")},function(){hasOneFromClasses(this,u)||($(this).removeClass(s),this.style.cursor="default")}),$("#first"+jqID(d)+", #prev"+jqID(d)+", #next"+jqID(d)+", #last"+jqID(d)).click(function(){var e,t,r,i,a,o,l,n,s;return hasOneFromClasses(this,u)||(t=e=J(Q.page,1),r=this.id,s=n=l=o=!(a=!1),0===(i=J(Q.lastpage,1))||1===i?(e<=1&&(l=o=!1),s=n=!1):1<i&&1<=e?1===e?l=o=!1:e===i&&(s=n=!1):1<i&&0===e&&(s=n=!1,e=i-1),this.id==="first"+d&&o&&(r="first",t=1,a=!0),this.id==="prev"+d&&l&&(r="prev",t=e-1,a=!0),this.id==="next"+d&&n&&(r="next",t=e+1,a=!0),this.id==="last"+d&&s&&(r="last",t=i,a=!0),c(r,t,J(Q.rowNum,10))&&(Q.page=t,a)&&_.call(D)),!1})),!0===Q.pginput&&$("input.ui-pg-input",t).on("keypress.jqGrid",function(e){var e=e.charCode||e.keyCode||0,t=J($(this).val(),1);return 13===e?(c("user",t,J(Q.rowNum,10))&&($(this).val(t),Q.page=0<$(this).val()?$(this).val():Q.page,_.call(D)),!1):this}),j.children(".ui-pg-table").on("keydown.jqGrid",function(e){13===e.which&&0<(e=j.find(":focus")).length&&e.trigger("click")})},ce=function(r,i,e){var t;q((Q.sortname+" "+Q.sortorder).split(","),function(){var e=$.jgrid.trim(this).split(" ");2===e.length&&r.push(e[0])}),null!=e&&(t=$.inArray(e.index||e.name,r),""!==e.lso&&t<0?r.push(e.index||e.name):""===e.lso&&0<=t&&r.splice(t,1)),q(Q.colModel,function(){var e,t=this.index||this.name;this.lso&&(e=this.lso.split("-"),$.inArray(t,r)<0&&r.push(t),i[t]=e[e.length-1])})},ue=function(e,t){var r,i="",a=Q.colModel[e],o=C("states.disabled"),t=Q.frozenColumns?$(D.grid.headers[e].el).add($(t)):$(D.grid.headers[e].el),e=t.find("span.s-ico"),l=e.children("span.ui-icon-asc"),n=e.children("span.ui-icon-desc"),s=l,d=n,c=[],u={};if(t.find("span.ui-grid-ico-sort").addClass(o),t.attr("aria-selected","false"),a.lso?(e.show(),"desc"===(r=a.lso.split("-"))[r.length-1]&&(s=n,d=l),s.removeClass(o).css("display",""),Q.showOneSortIcon&&d.hide(),t.attr("aria-selected","true")):Q.viewsortcols[0]||e.hide(),ce(c,u,a),"string"==typeof Q.sortname&&""!==Q.sortname&&Q.sortname.split(",").length<c.length){var p=function(i){q(Q.colModel,function(){var e,t="#jqgh_"+jgrid.jqID(Q.id+"_"+this.name),r=$(t);if(this.lso&&(this.index||this.name)===i){if("function"==typeof c.indexOf)e=c.indexOf(i);else{for(e=0;e<c.length&&c[e]!==i;e++);e===c.length&&(e=-1)}0<=e&&(c.splice(e,1),this.lso="")}(r=Q.frozenColumns?r.add($(Z.fhDiv).find(t)):r).children(".s-ico")[this.lso?"show":"hide"]()})};if("lastClickedFirstSorted"===Q.multiSortOrder&&1<c.length)for(c.unshift(c[c.length-1]),c.pop();c.length>Q.maxSortColumns;)p(c[c.length-1]);else Y(Q.multiSortOrder)&&(c=Q.multiSortOrder.call(D,{sortNames:c,cm:a,sortDirs:u,removeSorting:p})||c)}q(c,function(){0<i.length&&(i+=", "),i+=this+" "+u[this],Q.sortorder=u[this]}),Q.sortname=i.substring(0,i.length-Q.sortorder.length-1),Q.showSortOrder&&q(Q.colModel,function(){var e,t,r;this.sortable&&(e=h(this.name,c),t="#jqgh_"+jgrid.jqID(Q.id+"_"+this.name),r=$(t),(r=Q.frozenColumns?r.add($(Z.fhDiv).find(t)):r).children(".ui-jqgrid-sort-order").html(e<0?"&nbsp;":Y(Q.formatSortOrder)?Q.formatSortOrder.call(D,{cm:this,sortIndex:e}):e+1))})},pe=function(e,t,r,i,a,o){var l=this,n=l.grid,s=Q.colModel[t],d=C("states.disabled");if(null!=s&&s.sortable&&!(0<Q.savedRow.length&&"prevent"===Q.sortingDuringEditing)){if(Q.lastsort===t&&""!==Q.sortname?"asc"===Q.sortorder?Q.sortorder="desc":"desc"===Q.sortorder?Q.sortorder="asc":Q.sortorder=s.firstsortorder||"asc":Q.sortorder=s.firstsortorder||"asc",s.lso?"asc"===s.lso?s.lso+="-desc":"desc"===s.lso?s.lso+="-asc":"asc-desc"!==s.lso&&"desc-asc"!==s.lso||!Q.threeStateSort&&!Q.multiSort||(s.lso=""):s.lso=s.firstsortorder||"asc",!r&&Q.resetPageAfterSort&&(Q.page=1),Q.multiSort)ue(t,a);else{if(i){if(Q.lastsort===t&&Q.sortorder===i&&!r)return;Q.sortorder=i}var r=n.headers,i=n.fhDiv,c=r[Q.lastsort]?$(r[Q.lastsort].el):$(),a=Q.frozenColumns?$(a):$(r[t].el),r=a.find("span.s-ico"),u=r.children(".ui-icon-"+Q.sortorder),p=r.children(".ui-icon-"+("asc"===Q.sortorder?"desc":"asc")),s=Q.colModel[Q.lastsort];c.find(".ui-grid-ico-sort").addClass(d),c.attr("aria-selected","false"),Q.frozenColumns&&(i.find(".ui-grid-ico-sort").addClass(d),i.find("th").attr("aria-selected","false")),Q.viewsortcols[0]||(Q.lastsort!==t?(Q.frozenColumns&&i.find("span.s-ico").hide(),c.find("span.s-ico").hide(),r.show()):""===Q.sortname&&r.show()),Q.lastsort!==t&&"true"===c.data("autoResized")&&(null!=s&&null!=s.autoResizing&&s.autoResizing.compact||Q.autoResizing.compact)&&Q.columnsToReResizing.push(Q.lastsort),s=Q.colModel[t],r.css("display",""),""!==s.lso?(u.removeClass(d).css("display",""),Q.showOneSortIcon&&p.removeClass(d).hide(),a.attr("aria-selected","true")):(a.attr("aria-selected","false"),Q.threeStateSort&&(Q.sortorder="",Q.viewsortcols[0]||r.hide())),Q.lastsort!==t&&"true"===a.data("autoResized")&&(null!=s&&null!=s.autoResizing&&s.autoResizing.compact||Q.autoResizing.compact)&&Q.columnsToReResizing.push(t),Q.sortname=s.index||e}feedback.call(l,"onSortCol",Q.sortname,t,Q.sortorder,o||{})&&("local"===Q.datatype?Q.deselectAfterSort&&!Q.multiPageSelection&&et.resetSelection.call($(l)):Q.multiPageSelection||(Q.selrow=null,Q.multiselect&&(ne.call(l,!1),clearArray(Q.selarrrow))),se(Q.sortingDuringEditing),Q.scroll&&(i=n.bDiv.scrollLeft,Z.emptyRows.call(l,!0,!1),n.hDiv.scrollLeft=i),Q.subGrid&&"local"===Q.datatype&&$("td.sgexpanded","#"+jqID(Q.id)).each(function(){$(this).trigger("click")}),_.call(l),Q.lastsort=t,Q.sortname===e||!t)||(Q.lastsort=t)}},he=function(e){return Q.iColByName[(e.id||"").substring(Q.id.length+1)]},fe=(-1===h(Q.multikey,["shiftKey","altKey","ctrlKey"])&&(Q.multikey=!1),Q.keyName=!1,Q.sortorder=Q.sortorder.toLowerCase(),jgrid.cell_width=jgrid.cellWidth(),jgrid.cmTemplate),o=0;o<Q.colModel.length;o++)E="string"==typeof(a=Q.colModel[o]).template?null==fe||"object"!=typeof fe[a.template]&&!Y(fe[a.template])?{}:fe[a.template]:a.template,Y(E)&&(E=E.call(D,{cm:a,iCol:o})),a=S(!0,{},Q.cmTemplate,E||{},a),!1===Q.keyName&&!0===a.key&&(Q.keyName=a.name),Q.colModel[o]=a;for(Q.indexByColumnData=T(),o=0;o<Q.additionalProperties.length;o++)a=Q.additionalProperties[o],!1===Q.keyName&&!0===a.key&&(Q.keyName=a.name);if(0===Q.colNames.length)for(o=0;o<Q.colModel.length;o++)Q.colNames[o]=void 0!==Q.colModel[o].label?Q.colModel[o].label:Q.colModel[o].name;if(Q.colNames.length!==Q.colModel.length)k(N("errors.model"));else{if(!0===Q.grouping&&(Q.scroll=!1,Q.rownumbers=!1,Q.treeGrid=!1,Q.gridview=!0),Q.subGrid&&Y(et.setSubGrid))try{et.setSubGrid.call(p)}catch(e){}if(!Q.multiselect||"left"!==Q.multiselectPosition&&"right"!==Q.multiselectPosition||(j="left"===Q.multiselectPosition?"unshift":"push",Q.colNames[j]("<input id='"+Q.cbId+"' class='cbox' type='checkbox' aria-checked='false'/>"),Q.colModel[j]({name:"cb",width:jgrid.cell_width?Q.multiselectWidth+Q.cellLayout:Q.multiselectWidth,labelClasses:"jqgh_cbox",classes:"td_cbox",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),Q.rownumbers&&(Q.colNames.unshift(""),Q.colModel.unshift({name:"rn",width:jgrid.cell_width?Q.rownumWidth+Q.cellLayout:Q.rownumWidth,labelClasses:"jqgh_rn",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),Q.iColByName=t(Q.colModel),Q.xmlReader=S(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},Q.xmlReader),Q.jsonReader=S(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},Q.jsonReader),Q.localReader=S(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},Q.localReader),Q.scroll&&(Q.pgbuttons=!1,Q.pginput=!1,Q.rowList=[]),!0===Q.treeGrid){try{et.setTreeGrid.call(p)}catch(e){}"local"!==Q.datatype&&(Q.localReader={id:"_id_"}),Q.iPropByName=r(Q.additionalProperties)}for(var ge,me,ve=Q.remapColumns,be=Q.colModel,we=be.length,ye=[],l=0;l<we;l++)me=be[l].name,h(me,Q.reservedColumnNames)<0&&ye.push(me);if(null!=ve)for(ge=ye.slice(),l=0;l<ve.length;l++)ye[l]=ge[ve[l]];Q.cmNamesInputOrder=ye;var n,s,d,$e,c,je=Q.colModel,xe=Q.cmNamesInputOrder,Ce=Q.additionalProperties,De=xe.length;for(Q.arrayReaderInfos={},s=Q.arrayReaderInfos,c=0;c<De;c++)d=xe[c],h(d,Q.reservedColumnNames)<0&&!s.hasOwnProperty(d)&&(void 0!==($e=Q.iColByName[d])?s[d]={name:d,index:$e,order:c,type:0}:void 0!==($e=Q.iPropByName[d])?s[d]={name:d,index:$e,order:c,type:1}:d===(Q.prmNames.rowidName||"rowid")&&(s[d]={index:$e,type:2}));for(De=je.length,n=0;n<De;n++)d=je[n].name,h(d,Q.reservedColumnNames)<0&&!s.hasOwnProperty(d)&&(s[d]={name:d,index:n,order:c,type:0},c++);for(De=Ce.length,n=0;n<De;n++)null==(d=Ce[n])||s.hasOwnProperty(d)||(s[d="object"==typeof d&&"string"===$.type(d.name)?d.name:d]={name:d,index:n,order:c,type:1},c++);if(Q.data.length&&(V.call(D),H.call(D)),!0===Q.shrinkToFit&&!0===Q.forceFit)for(o=Q.colModel.length-1;0<=o;o--)if(!0!==Q.colModel[o].hidden){Q.colModel[o].resizable=!1;break}var Se,u,qe,Fe,Re,_e,Ie=[],Oe=[],g=[],m="<thead><tr class='ui-jqgrid-labels' role='row'>",Ge="<tbody><tr style='display:none;'>",ke=C("states.hover"),Ne=C("states.hoverTh")||ke,Ee=C("states.disabled");if(Q.multiSort)for(var Ie=Q.sortname.split(","),Ae=0;Ae<Ie.length;Ae++)g=O(Ie[Ae]).split(" "),Ie[Ae]=O(g[0]),Oe[Ae]=g[1]?O(g[1]):Q.sortorder||"asc";for(o=0;o<Q.colNames.length;o++){switch(a=Q.colModel[o],qe=Q.headertitles||a.headerTitle?" title='"+stripHtml("string"==typeof a.headerTitle?a.headerTitle:Q.colNames[o])+"'":"",m+="<th id='"+Q.id+"_"+a.name+"' class='"+C("colHeaders","ui-th-column ui-th-"+R+" "+(a.labelClasses||""))+"'"+qe+">",qe=a.index||a.name,a.labelAlign){case"left":Fe="text-align:left;";break;case"right":Fe="text-align:right;";break;case"likeData":Fe=void 0===a.align||"left"===a.align?"text-align:left;":"right"===a.align?"text-align:right;":"";break;default:Fe=""}m+="<div id='jqgh_"+Q.id+"_"+a.name+"'"+(B?" class='ui-th-div-ie'":"")+(""===Fe?"":" style='"+Fe+"'")+" role='columnheader'>",_e=a.autoResizable&&"actions"!==a.formatter||a.rotated?"<span class='"+Q.autoResizing.wrapperClassName+"'>"+Q.colNames[o]+"</span>":Q.colNames[o],m=Q.sortIconsBeforeText?m+(Q.builderSortIcons||jgrid.builderSortIcons).call(D,o)+_e:(m+=_e)+(Q.builderSortIcons||jgrid.builderSortIcons).call(D,o),m+="</div></th>",Ge+="<td></td>",a.width=a.width?parseInt(a.width,10):150,"boolean"!=typeof a.title&&(a.title=!0),a.lso="",qe===Q.sortname&&(Q.lastsort=o,a.lso=Q.sortorder||a.firstsortorder||"asc"),Q.multiSort&&-1!==(g=h(qe,Ie))&&(a.lso=Oe[g])}m+="</tr></thead>",Ge+="</tr></tbody>";var Te,Me,Be,v,b,w,y,Pe,j=$("<table class='"+C("hTable","ui-jqgrid-htable")+"' style='width:1px' role='presentation' aria-labelledby='gbox_"+Q.id+"'>"+m+Ge+"</table>"),ze=($(j[0].tHead).children("tr").children("th").hover(function(){$(this).addClass(Ne)},function(){$(this).removeClass(Ne)}),Q.multiselect&&$(Q.cb,j).on("click",function(){function t(e,t){$(e)[t?"addClass":"removeClass"](a).attr(t?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"}),void 0!==l&&$(e.cells[l]).children("input.cbox").prop("checked",t)}var r,e,i,a=C("states.select"),o=[],l=Q.iColByName.cb,n=Z.fbRows,s=Ee+" ui-subgrid jqgroup jqfoot jqgfirstrow jqgskipselect",d=Q._index;if(clearArray(Q.selarrrow),this.checked){if(r=!0,Q.selrow=1<D.rows.length?D.rows[D.rows.length-1].id:null,Q.multiPageSelection&&("local"===Q.datatype||Q.treeGrid))if("filtered"===Q.selectAllMode&&null!=Q.lastSelectedData&&0<Q.lastSelectedData.length)for(Q.selarrrow=[],i=0;i<Q.lastSelectedData.length;i++)Q.lastSelectedData[i].hasOwnProperty(Q.localReader.id)&&Q.selarrrow.push(Q.idPrefix+Q.lastSelectedData[i][Q.localReader.id]);else if(null!=Q.data&&0<Q.data.length&&null!=d)for(e in d)d.hasOwnProperty(e)&&Q.selarrrow.push(Q.idPrefix+e)}else r=!1,Q.selrow=null;var c=r?Q.selarrrow:o;$(D.rows).each(function(e){hasOneFromClasses(this,s)||(t(this,r),$.inArray(this.id,c)<0&&c.push(this.id),n&&t(n[e],r))}),feedback.call(D,"onSelectAll",r?Q.selarrrow:o,r)}),!0===Q.autowidth&&(t=Math.floor($(e).innerWidth()),Q.width=0<t?t:"nw"),isNaN(Q.width)?isNaN(parseFloat(Q.width))||(Q.width=parseFloat(Q.width)):Q.width=Number(Q.width),Q.widthOrg=Q.width,v=0,b=jgrid.cell_width?0:J(Q.cellLayout,0),w=0,r=J(Q.scrollOffset,0),t=!1,y=0,Pe=jgrid.isCellClassHidden,q(Q.colModel,function(){var e;void 0===this.hidden&&(this.hidden=!1),Q.grouping&&Q.autowidth&&0<=(e=h(this.name,Q.groupingView.groupField))&&Q.groupingView.groupColumnShow.length>e&&(this.hidden=!Q.groupingView.groupColumnShow[e]),this.widthOrg=Me=J(this.width,0),!1!==this.hidden||Pe(this.classes)||(v+=Me+b,this.fixed?y+=Me+b:w++)}),isNaN(Q.width)&&(Q.width=v+(!1!==Q.shrinkToFit||isNaN(Q.height)?0:r)),Z.width=Q.width,Q.tblwidth=v,!1===Q.shrinkToFit&&!0===Q.forceFit&&(Q.forceFit=!1),!0===Q.shrinkToFit&&0<w&&(Be=Z.width-b*w-y,isNaN(Q.height)||(Be-=r,t=!0),v=0,q(Q.colModel,function(e){!1!==this.hidden||Pe(this.classes)||this.fixed||(Me=Math.round(Be*this.width/(Q.tblwidth-b*w-y)),this.width=Me,v+=Me,Te=e)}),Je=0,t?Z.width-y-(v+b*w)!==r&&(Je=Z.width-y-(v+b*w)-r):1!==Math.abs(Z.width-y-(v+b*w))&&(Je=Z.width-y-(v+b*w)),Q.colModel[Te].width+=Je,Q.tblwidth=v+Je+b*w+y,Q.tblwidth>Q.width)&&(Q.colModel[Te].width-=Q.tblwidth-parseInt(Q.width,10),Q.tblwidth=Q.width),$(e).css("width",Z.width+"px").append("<div class='"+C("resizer","ui-jqgrid-resize-mark")+"' id='"+Q.rsId+"'>&#160;</div>"),$(Q.rs).on("selectstart",function(){return!1}).click(M).dblclick(function(e){var t,r,i=$(this).data("idx"),a=$(this).data("pageX"),o=Q.colModel[i];return null==a||null==o||(a=String(a).split(";"),t=parseFloat(a[0]),r=parseFloat(a[1]),2===a.length&&(5<Math.abs(t-r)||5<Math.abs(e.pageX-t)||5<Math.abs(e.pageX-r)))||(feedback.call(D,"resizeDblClick",i,o,e)&&o.autoResizable&&et.autoResizeColumn.call(p,i),feedback.call(D,"afterResizeDblClick",{iCol:i,cm:o,cmName:o.name})),!1}),$(i).css("width",Z.width+"px"),""),Le=(Q.footerrow&&(ze+="<table role='presentation' style='width:1px' class='"+C("gridFooter","ui-jqgrid-ftable")+"'><tbody><tr role='row' class='"+C("rowFooter","footrow footrow-"+R)+"'>"),"<tr class='"+C("gridRow","jqgfirstrow ui-row-"+Q.direction)+"' role='row' style='height:auto'>");if(Q.disableClick=!1,$("th",j[0].tHead.rows[0]).each(function(e){var t=Q.colModel[e],r=t.name,i=$(this),a=i.children("div"),o=a.children("span.s-ico"),l=Q.showOneSortIcon,n=(u=t.width,void 0===t.resizable&&(t.resizable=!0),t.resizable?(Se=document.createElement("span"),$(Se).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+R).on("selectstart",function(){return!1}),i.addClass(Q.resizeclass)):Se="",i.css("width",u+"px").prepend(Se),"");!(Se=null)===t.hidden&&(i.css("display","none"),n="display:none;"),Le+="<td role='gridcell' "+(t.classes?"class='"+t.classes+"' ":"")+"style='height:0;width:"+u+"px;"+n+"'></td>",Z.headers[e]={width:u,el:this},"boolean"!=typeof(u=t.sortable)&&(t.sortable=!0,u=!0),"cb"!==r&&"subgrid"!==r&&"rn"!==r&&u&&Q.viewsortcols[2]&&a.addClass("ui-jqgrid-sortable"),u&&(Q.multiSort?(i="desc"===t.lso?"asc":"desc",Q.viewsortcols[0]?(o.css("display",""),t.lso&&(o.children("span.ui-icon-"+t.lso).removeClass(Ee),l)&&o.children("span.ui-icon-"+i).hide()):t.lso&&(o.css("display",""),o.children("span.ui-icon-"+t.lso).removeClass(Ee),l)&&o.children("span.ui-icon-"+i).hide(),Q.showSortOrder&&(g=h(r,Ie),o["beforeSortIcons"===Q.sortOrderPosition?"before":"after"]("<span class='ui-jqgrid-sort-order'>"+(g<0?"&nbsp;":Y(Q.formatSortOrder)?Q.formatSortOrder.call(D,{cm:this,sortIndex:g}):g+1)+"</span>"))):(n="desc"===Q.sortorder?"asc":"desc",Q.viewsortcols[0]?(o.css("display",""),e===Q.lastsort&&(o.children("span.ui-icon-"+Q.sortorder).removeClass(Ee),l)&&o.children("span.ui-icon-"+n).hide()):e===Q.lastsort&&""!==t.lso&&(o.css("display",""),o.children("span.ui-icon-"+Q.sortorder).removeClass(Ee),l)&&o.children("span.ui-icon-"+n).hide())),Q.footerrow&&(ze+="<td role='gridcell' "+z(e,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(e){var t,r=$(this),i=r.closest(".ui-jqgrid-hdiv").hasClass("frozen-div");if(1===$(e.target).closest("th>span.ui-jqgrid-resize").length)return null!=(t=he(this))&&(!0===Q.forceFit&&(Q.nv=function(e){for(var t=e,r=e,i=e+1;i<Q.colModel.length;i++)if(!0!==Q.colModel[i].hidden){r=i;break}return r-t}(t)),Z.dragStart(t,e,(t=[r.position().left+r.outerWidth()],"rtl"===Q.direction&&(t[0]=Q.width-t[0]),t[0]-=i?0:Z.bDiv.scrollLeft,t.push($(Z.hDiv).position().top),t.push($(Z.bDiv).offset().top-$(Z.hDiv).offset().top+$(Z.bDiv).height()+(Z.sDiv?$(Z.sDiv).height():0)),t),r)),!1}).click(function(e){var t,r,i;return Q.disableClick?Q.disableClick=!1:(i="th.ui-th-column>div",Q.viewsortcols[2]?i+=".ui-jqgrid-sortable":i+=">span.s-ico>span.ui-grid-ico-sort",1===(i=$(e.target).closest(i)).length?(Q.viewsortcols[2]||(t=!0,r=i.hasClass("ui-icon-desc")?"asc":"desc"),null!=(i=he(this))&&pe.call(D,$("div",this)[0].id.substring(5+Q.id.length+1),i,t,r,this,e),!1):void 0)}),Q.sortable&&Y(et.sortableColumns))try{et.sortableColumns.call(p,$(j[0].tHead.rows[0]))}catch(e){}Q.footerrow&&(ze+="</tr></tbody></table>"),Le+="</tr>",p.html("<tbody>"+Le+"</tbody>"),p.addClass(C("grid","ui-jqgrid-btable"+(!0===Q.altRows&&p.jqGrid("isBootstrapGuiStyle")?" table-striped":"")));var Ve,He,We,I=!(!Q.caption||!0!==Q.hiddengrid),t=$("<div class='ui-jqgrid-hbox"+("rtl"===R?"-rtl":"")+"'></div>"),r=C("top"),Ue=C("bottom"),Ye=(Z.hDiv=document.createElement("div"),$(Z.hDiv).css({width:Z.width+"px"}).addClass(C("hDiv","ui-jqgrid-hdiv")).append(t).scroll(function(){var e=$(this).next(".ui-jqgrid-bdiv")[0];return e&&(e.scrollLeft=this.scrollLeft),!1}),$(t).append(j),I&&$(Z.hDiv).hide(),Q.rowNum=parseInt(Q.rowNum,10),(isNaN(Q.rowNum)||Q.rowNum<=0)&&(Q.rowNum=Q.maxRowNum),Q.pager&&("string"==typeof Q.pager&&"#"!==Q.pager.substr(0,1)?(He=Q.pager,Ve=$("#"+jqID(Q.pager))):!0===Q.pager?(He=randId(),(Ve=$("<div id='"+He+"'></div>")).appendTo("body"),Q.pager="#"+jqID(He)):He=(Ve=$(Q.pager)).attr("id"),0<Ve.length?(Ve.css({width:Z.width+"px"}).addClass(C("pager.pager","ui-jqgrid-pager "+Ue)).appendTo(e),I&&Ve.hide(),de.call(D,He,""),Q.pager="#"+jqID(He)):Q.pager=""),!1===Q.cellEdit&&!0===Q.hoverrows&&p.on("mouseover.jqGrid",function(e){Re=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(Re).attr("class")&&$(Re).addClass(ke)}).on("mouseout.jqGrid",function(e){Re=$(e.target).closest("tr.jqgrow"),$(Re).removeClass(ke)}),function(e){var t,r,i;do{if(0<(t=$(e).closest("td")).length){if(i=(r=t.parent()).parent().parent(),r.is(".jqgrow")&&(i[0]===this||i.is("table.ui-jqgrid-btable")&&(i[0].id||"").replace("_frozen","")===this.id))break;e=t.parent()}}while(0<t.length);return t}),Xe=(p.before(Z.hDiv).click(function(e){var i=C("states.select"),t=e.target,r=Ye.call(D,t),a=r.parent();if(0!==a.length&&!hasOneFromClasses(a,Ee)){var o,l=a[0].id,n=r[0].cellIndex,s=$(t).hasClass("cbox")&&$(t).is(":enabled")&&!hasOneFromClasses(t,Ee),d=feedback.call(D,"beforeSelectRow",l,e),c=!1,u=jgrid.detectRowEditing.call(D,l),u=null!=u&&"cellEditing"!==u.mode;if("A"!==t.tagName&&(!u||s)){if(feedback.call(D,"onCellSelect",l,n,r.html(),e),!0===Q.cellEdit){if(d&&Q.multiselect&&s){if(f.call(p,l,!0,e),s&&!Q.noCellSelection)return;c=!0}try{et.editCell.call(p,a[0].rowIndex,n,!0)}catch(e){}if(!Q.multiselect||!Q.noCellSelection||Q.multiboxonly&&c)return}d?Q.multikey?e[Q.multikey]&&!c?f.call(p,l,!0,e):Q.multiselect&&s&&(s=$("#jqg_"+jqID(Q.id)+"_"+l).is(":checked"),$("#jqg_"+jqID(Q.id)+"_"+l).prop("checked",!s)):Q.multiselect&&Q.multiboxonly?(!s||c)&&(o=Q.frozenColumns?Q.id+"_frozen":"",$(Q.selarrrow).each(function(e,t){var r=et.getGridRowById.call(p,t);r&&$(r).removeClass(i),$("#jqg_"+jqID(Q.id)+"_"+jqID(t)).prop("checked",!1),o&&($("#"+jqID(t),"#"+jqID(o)).removeClass(i),$("#jqg_"+jqID(Q.id)+"_"+jqID(t),"#"+jqID(o)).prop("checked",!1))}),clearArray(Q.selarrrow),c)||f.call(p,l,!0,e):(u=Q.selrow,c||f.call(p,l,!0,e),"toggle"!==Q.singleSelectClickMode||Q.multiselect||u!==l||((a=D.grid.fbRows?a.add((D.grid.fbRows[a[0].rowIndex]===a[0]?D.rows:D.grid.fbRows)[a[0].rowIndex]):a).removeClass(i).attr({"aria-selected":"false",tabindex:"-1"}),Q.selrow=null)):s&&$(t).prop("checked",!1)}}}).on("reloadGrid",function(e,t){var r,i=this,a=i.grid,o=$(this),l=i.p;return 0<l.savedRow.length&&"prevent"===l.reloadingDuringEditing||(!0===l.treeGrid&&(l.datatype=l.treedatatype),t=S({},defaults.reloadGridOptions||{},l.reloadGridOptions||{},t||{}),"local"===l.datatype&&l.dataTypeOrg&&l.loadonce&&t.fromServer&&(l.datatype=l.dataTypeOrg,delete l.dataTypeOrg),t.current&&a.selectionPreserver.call(i),"local"===l.datatype?(l.multiPageSelection||et.resetSelection.call(o),l.data.length&&(V.call(i),H.call(i))):l.treeGrid||l.multiPageSelection||(l.selrow=null,l.multiselect&&(clearArray(l.selarrrow),ne.call(i,!1)),clearArray(l.savedRow),l.editingInfo={}),se(l.reloadingDuringEditing),l.iRow=-1,l.iCol=-1,l.scroll&&Z.emptyRows.call(i,!0,!1),t.page&&((r=parseInt(t.page,10))>l.lastpage&&(r=l.lastpage),l.page=r=r<1?1:r,a.prevRowHeight?a.bDiv.scrollTop=(r-1)*a.prevRowHeight*l.rowNum:a.bDiv.scrollTop=0),(a.prevRowHeight&&l.scroll&&void 0===t.page?(delete l.lastpage,a.populateVisible):a.populate).call(i),!0===l._inlinenav&&o.jqGrid("showAddEditButtons",!1)),!1}).dblclick(function(e){var t=Ye.call(D,e.target),r=t.parent();if(0<t.length&&!feedback.call(D,"ondblClickRow",r.attr("id"),r[0].rowIndex,t[0].cellIndex,e))return!1}).on("contextmenu",function(e){var t=Ye.call(D,e.target),r=t.parent(),i=r.attr("id");if(0!==t.length)return Q.multiselect||Q.selrow===i||!0!==Q.selectOnContextMenu||f.call(p,i,!0,e),!!feedback.call(D,"onRightClickRow",i,r[0].rowIndex,t[0].cellIndex,e)&&void 0}),Z.bDiv=document.createElement("div"),B&&"auto"===String(Q.height).toLowerCase()&&(Q.height="100%"),$(Z.bDiv).append($("<div style='position:relative;'></div>").append("<div></div>").append(D)).addClass("ui-jqgrid-bdiv").css({height:Q.height+(isNaN(Q.height)?"":"px"),width:Z.width+"px"}).scroll(Z.scrollGrid),Q.maxHeight&&$(Z.bDiv).css("max-height",Q.maxHeight+(isNaN(Q.maxHeight)?"":"px")),p.css({width:"1px"}),$.support.tbody||2===$(">tbody",D).length&&$(">tbody:gt(0)",D).remove(),Q.multikey&&$(Z.bDiv).on(jgrid.msie?"selectstart":"mousedown",function(){return!1}),I&&$(Z.bDiv).hide(),Z.cDiv=document.createElement("div"),x("gridMinimize.visible")),Qe=x("gridMinimize.hidden"),Je=F("showhide"),Ze=!0===Q.hidegrid?$("<a role='link' class='"+C("titleButton","ui-jqgrid-titlebar-close")+"'"+(Je?" title='"+Je+"'":"")+"/>").hover(function(){Ze.addClass(ke)},function(){Ze.removeClass(ke)}).append("<span class='"+Xe+"'></span>"):"";$(Z.cDiv).append("<span class='ui-jqgrid-title'>"+Q.caption+"</span>").append(Ze).addClass(C("gridTitle","ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===R?"-rtl ":" ")+r)),$(Z.cDiv).insertBefore(Z.hDiv),Q.toolbar[0]&&(Z.uDiv=document.createElement("div"),"top"===Q.toolbar[1]?$(Z.uDiv).insertBefore(Z.hDiv):"bottom"===Q.toolbar[1]&&$(Z.uDiv).insertAfter(Z.hDiv),i=C("toolbarUpper","ui-userdata"),"both"===Q.toolbar[1]?(Z.ubDiv=document.createElement("div"),$(Z.uDiv).addClass(i).attr("id","t_"+Q.id).insertBefore(Z.hDiv),$(Z.ubDiv).addClass(C("toolbarBottom","ui-userdata")).attr("id","tb_"+Q.id).insertAfter(Z.hDiv),I&&$(Z.ubDiv).hide()):$(Z.uDiv).width(Z.width).addClass(i).attr("id","t_"+Q.id),I)&&$(Z.uDiv).hide(),"string"==typeof Q.datatype&&(Q.datatype=Q.datatype.toLowerCase()),Q.toppager?(Q.toppager=Q.id+"_toppager",Z.topDiv=$("<div id='"+Q.toppager+"'></div>")[0],$(Z.topDiv).addClass(C("pager.pager","ui-jqgrid-toppager"+(Q.caption?"":" "+r))).css({width:Z.width+"px"}).insertBefore(Z.hDiv),de.call(D,Q.toppager,"_t"),Q.toppager="#"+jqID(Q.toppager)):""!==Q.pager||Q.scroll||(Q.rowNum=Q.maxRowNum),Q.footerrow&&(Z.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],t=$("<div class='ui-jqgrid-hbox"+("rtl"===R?"-rtl":"")+"'></div>"),$(Z.sDiv).append(t).width(Z.width).insertAfter(Z.hDiv),$(t).append(ze),Z.footers=$(".ui-jqgrid-ftable",Z.sDiv)[0].rows[0].cells,Q.rownumbers&&(Z.footers[0].className=C("rowNum","jqgrid-rownum")),I)&&$(Z.sDiv).hide(),t=null,Q.caption?(We=Q.datatype,!0===Q.hidegrid&&($(".ui-jqgrid-titlebar-close",Z.cDiv).click(function(e){var t=".ui-jqgrid-bdiv,.ui-jqgrid-hdiv,.ui-jqgrid-pager,.ui-jqgrid-sdiv",r=this,i=(!0===Q.toolbar[0]&&("both"===Q.toolbar[1]&&(t+=",#"+jqID($(Z.ubDiv).attr("id"))),t+=",#"+jqID($(Z.uDiv).attr("id"))),$(t,Q.gView).length);return Q.toppager&&(t+=","+Q.toppager),"visible"===Q.gridstate?$(t,Q.gBox).slideUp("fast",function(){0===--i&&($("span",r).removeClass(Xe).addClass(Qe),Q.gridstate="hidden",$(Q.gBox).hasClass("ui-resizable")&&$(".ui-resizable-handle",Q.gBox).hide(),$(Z.cDiv).addClass(Ue),I||feedback.call(D,"onHeaderClick",Q.gridstate,e))}):"hidden"===Q.gridstate&&($(Z.cDiv).removeClass(Ue),$(t,Q.gBox).slideDown("fast",function(){0===--i&&($("span",r).removeClass(Qe).addClass(Xe),I&&(Q.datatype=We,_.call(D),I=!1),Q.gridstate="visible",$(Q.gBox).hasClass("ui-resizable")&&$(".ui-resizable-handle",Q.gBox).show(),I||feedback.call(D,"onHeaderClick",Q.gridstate,e))})),!1}),I)&&(Q.datatype="local",$(".ui-jqgrid-titlebar-close",Z.cDiv).trigger("click"))):($(Z.cDiv).hide(),$(Z.cDiv).nextAll("div:visible").first().addClass("ui-corner-top")),$(Z.hDiv).after(Z.bDiv),Z.eDiv=$("<div class='"+C("gridError","ui-jqgrid-errorbar ui-jqgrid-errorbar-"+R)+"' style='display:none;'><span class='"+C("gridErrorText","ui-jqgrid-error")+"'></span></div>")[0],$(Z.hDiv).after(Z.eDiv),$(e).click(M).dblclick(function(e){var t,r,i=$(Q.rs),a=i.offset(),o=i.data("idx"),l=i.data("delta"),n=Q.colModel[o],s=$(this).data("pageX")||i.data("pageX");return null==s||null==n||(s=String(s).split(";"),t=parseFloat(s[0]),r=parseFloat(s[1]),2===s.length&&(5<Math.abs(t-r)||5<Math.abs(e.pageX-t)||5<Math.abs(e.pageX-r)))||(feedback.call(D,"resizeDblClick",o,n)&&a.left-1<=e.pageX+l&&e.pageX+l<=a.left+i.outerWidth()+1&&n.autoResizable&&et.autoResizeColumn.call(p,o),feedback.call(D,"afterResizeDblClick",{iCol:o,cm:n,cmName:n.name})),!1}),Q.pager||$(Z.cDiv).nextAll("div:visible").filter(":last").addClass(Ue),$(".ui-jqgrid-labels",Z.hDiv).on("selectstart",function(){return!1}),D.formatCol=z,D.sortData=pe,D.updatepager=function(e,t){var r,i,a,o,l,n,s=this,d=$(s),c=s.grid,u=Q.pager||"",p=Q.pager?"_"+Q.pager.substr(1):"",h=c.bDiv,f=$.fmatter?$.fmatter.NumberFormat:null,g=Q.toppager?"_"+Q.toppager.substr(1):"",m=C("states.hover"),v=C("states.disabled");(i=parseInt(Q.page,10)-1)<0&&(i=0),r=(i*=parseInt(Q.rowNum,10))+Q.reccount,Q.scroll&&(n=$(getGridComponent(COMPONENT_NAMES.BODY_TABLE,h)[0].rows).slice(1),i=r-n.length,Q.reccount=n.length,(n=n.outerHeight()||c.prevRowHeight)&&(l=i*n,o=jgrid.fixMaxHeightOfDiv.call(s,parseInt(Q.records,10)*n),$(h).children("div").first().css({height:o+"px"}).children("div").first().css({height:l+"px",display:""}),0===h.scrollTop)&&1<Q.page&&(h.scrollTop=Q.rowNum*(Q.page-1)*n),h.scrollLeft=c.hDiv.scrollLeft),(u+=Q.toppager?(u?",":"")+Q.toppager:"")&&(o=N("formatter.integer")||{},l=J(Q.page),n=J(Q.lastpage),$(".selbox",u).prop("disabled",!1),!0===Q.pginput&&(h=$(".ui-pg-input",u),a=String(Q.page).length,h.val(Q.page),h.each(function(){var e=parseInt($(this).attr("size"),10);0<e&&e<a&&$(this).attr("size",a)}),c=Q.toppager?"#sp_1"+p+",#sp_1"+g:"#sp_1"+p,$(c).html($.fmatter?f(Q.lastpage,o):Q.lastpage).closest(".ui-pg-table").each(function(){ae.call(s,$(this))})),Q.viewrecords&&(0===Q.reccount?$(".ui-paging-info",u).html(F("emptyrecords")):(h=i+1,c=Q.records,$.fmatter&&(h=f(h,o),r=f(r,o),c=f(c,o)),$(".ui-paging-info",u).html(jgrid.format(F("recordtext"),h,r,c)))),!0===Q.pgbuttons)&&(1===(l=(l=n<=0?0:l)<=0?n=0:l)||0===l?($("#first"+p+", #prev"+p).addClass(v).removeClass(m),Q.toppager&&$("#first_t"+g+", #prev_t"+g).addClass(v).removeClass(m)):($("#first"+p+", #prev"+p).removeClass(v),Q.toppager&&$("#first_t"+g+", #prev_t"+g).removeClass(v)),l===n||0===l?($("#next"+p+", #last"+p).addClass(v).removeClass(m),Q.toppager&&$("#next_t"+g+", #last_t"+g).addClass(v).removeClass(m)):($("#next"+p+", #last"+p).removeClass(v),Q.toppager&&$("#next_t"+g+", #last_t"+g).removeClass(v))),!0===e&&!0===Q.rownumbers&&$(">td.jqgrid-rownum",s.rows).each(function(e){$(this).html(i+1+e)}),t&&Q.jqgdnd&&d.jqGrid("gridDnD","updateDnD"),feedback.call(s,"gridComplete"),d.triggerHandler("jqGridAfterGridComplete")},D.refreshIndex=H,D.addItemDataToColumnIndex=te,D.removeItemDataFromColumnIndex=function(e){var t,r,i,a=Q.dataIndexById[e];if(null!=a){for(t in a)if(a.hasOwnProperty(t))for(i in r=a[t])r.hasOwnProperty(i)&&(delete Q.indexByColumnData[t][i][e],$.isEmptyObject(Q.indexByColumnData[t][i]))&&delete Q.indexByColumnData[t][i];delete Q.dataIndexById[e]}},D.generateValueFromColumnIndex=function(e,t,r){var i,a,o=$(this).jqGrid("getUniqueValueFromColumnIndex",e),l="";if(null!=o)for(r=r||";",t=t||":",i=0,a=o.length;i<a;i++)""!==l&&(l+=r||";"),l+=o[i]+(t||":")+o[i];return l},D.setHeadCheckBox=ne,D.fixScrollOffsetAndhBoxPadding=A,D.constructTr=function(e,t,r,i,a,o){var l,n="-1",s="",d=t?"display:none;":"",r=C("gridRow","jqgrow ui-row-"+Q.direction)+(r?" "+r:"")+(o?" "+C("states.select"):""),c=$(this).triggerHandler("jqGridRowAttr",[i,a,e]);if(null!=(c="object"!=typeof c?Y(Q.rowattr)?Q.rowattr.call(this,i,a,e):"string"==typeof Q.rowattr&&null!=jgrid.rowattr&&Y(jgrid.rowattr[Q.rowattr])?jgrid.rowattr[Q.rowattr].call(this,i,a,e):{}:c)&&!$.isEmptyObject(c)){c.hasOwnProperty("id")&&(e=c.id,delete c.id),c.hasOwnProperty("tabindex")&&(n=c.tabindex,delete c.tabindex),c.hasOwnProperty("style")&&(d+=c.style,delete c.style),c.hasOwnProperty("class")&&(r+=" "+c.class,delete c.class);try{delete c.role}catch(e){}for(l in c)c.hasOwnProperty(l)&&(s+=" "+l+"="+c[l])}return Q.treeGrid&&parseInt(i[Q.treeReader.level_field],10)!==parseInt(Q.tree_root_level,10)&&(o=et.getNodeParent.call($(this),i))&&o.hasOwnProperty(Q.treeReader.expanded_field)&&!o[Q.treeReader.expanded_field]&&!t&&(d+="display:none;"),"<tr role='row' id='"+e+"' tabindex='"+n+"' class='"+r+"'"+(""===d?"":" style='"+d+"'")+s+">"},D.formatter=function(e,t,r,i,a,o){var l,n=Q.colModel[r];return l=void 0!==n.formatter?(l={rowId:e=""!==String(Q.idPrefix)?P(e):e,colModel:n,gid:Q.id,pos:r,rowData:o||i},Y(n.cellBuilder)?n.cellBuilder.call(D,t,l,i,a):Y(n.formatter)?n.formatter.call(D,t,l,i,a):$.fmatter?$.fn.fmatter.call(D,n.formatter,t,l,i,a):L(t)):L(t),l=n.autoResizable&&"actions"!==n.formatter?"<span class='"+Q.autoResizing.wrapperClassName+"'>"+l+"</span>":l,Q.treeGrid&&"edit"!==a&&(null==Q.ExpandColumn&&0===r||Q.ExpandColumn===n.name)&&(null==o&&(o=Q.data[Q._index[e]]),i=parseInt(o[Q.treeReader.level_field]||0,10),t=0===parseInt(Q.tree_root_level,10)?i:i-1,a=o[Q.treeReader.leaf_field],r=o[Q.treeReader.expanded_field],n=o[Q.treeReader.icon_field],e=a?(null!=n&&""!==n?n:Q.treeIcons.leaf)+" tree-leaf":r?Q.treeIcons.minus+" tree-minus":Q.treeIcons.plus+" tree-plus",!a&&n&&"string"==typeof n&&2===(i=n.split(",")).length&&(e=r?i[0]:i[1]),l="<div class='tree-wrap' style='width:"+18*(t+1)+"px;'><div class='"+mergeCssClasses(Q.treeIcons.commonIconClass,e,"treeclick")+"' style='"+(!0===Q.ExpandColClick?"cursor:pointer;":"")+("rtl"===Q.direction?"margin-right:":"margin-left:")+18*t+"px;'></div></div><span class='cell-wrapper"+(a?"leaf":"")+"'"+(Q.ExpandColClick?" style='cursor:pointer;'":"")+">"+l+"</span>"),l},S(Z,{populate:_,emptyRows:function(e,t){function r(e){if(e){var t=e.rows,r=t[0];if(Q.deepempty)t&&$(t).slice(1).remove();else if(Q.quickEmpty)if("quickest"===Q.quickEmpty)e.replaceChild(document.createElement("tbody"),e.tBodies[0]),e.firstChild.appendChild(r);else for(;1<t.length;)e.deleteRow(t.length-1);else $(e.firstChild).empty().append(r)}}var i=Z.bDiv,a=null!=Z.fbDiv?Z.fbDiv.children(".ui-jqgrid-btable")[0]:null;$(this).off(".jqGridFormatter"),r(this),r(a),e&&Q.scroll&&($(i.firstChild).css({height:"auto"}),$(i.firstChild.firstChild).css({height:0,display:"none"}),0!==i.scrollTop)&&(i.scrollTop=0),!0===t&&Q.treeGrid&&(clearArray(Q.data),clearArray(Q.lastSelectedData),Q._index={},Q.dataIndexById={},Q.indexByColumnData={}),Q.rowIndexes={},Q.iRow=-1,Q.iCol=-1},beginReq:oe,endReq:le}),D.addXmlData=W,D.addJSONData=W,D.rebuildRowIndexes=K,D.grid.cols=D.rows[0].cells,feedback.call(D,"onInitGrid"),Q.treeGrid&&"local"===Q.datatype&&null!=Q.data&&0<Q.data.length&&(Q.datatype="jsonstring",Q.datastr=Q.data,Q.data=[]),_.call(D),Q.hiddengrid=!1}}}});if(e=et[Ke])return e.apply(this,$.makeArray(arguments).slice(1));throw"jqGrid - No such method: "+Ke},$.fn.jqGrid),getTdByColumnIndex=(jgrid.extend({getGridRes:function(e){var t=this[0];return t&&t.grid&&t.p?(t=jgrid.getRes(locales[t.p.locale],e)||jgrid.getRes(locales["en-US"],e),e=jgrid.getRes(jgrid,e),"object"!=typeof t||null===t||Array.isArray(t)?void 0!==e?e:t:$.extend(!0,{},t,e||{})):null},getGuiStyles:function(e,t){var r,i=this instanceof $&&0<this.length?this[0]:this;return i&&i.grid&&i.p?(i=i.p.guiStyle||jgrid.defaults.guiStyle||"jQueryUI",void 0===(r=jgrid.getRes(jgrid.guiStyles[i],e))&&"string"==typeof(i=jgrid.getRes(jgrid.guiStyles[i],"baseGuiStyle"))&&(r=jgrid.getRes(jgrid.guiStyles[i],e)),jgrid.mergeCssClasses(r||"",t||"")):""},isBootstrapGuiStyle:function(){return 0<=$.inArray("ui-jqgrid-bootstrap",$(this).jqGrid("getGuiStyles","gBox").split(" "))},displayErrorMessage:function(e){var t,r,i=this instanceof $&&0<this.length?this[0]:this;i&&i.grid&&i.p&&e&&(t=$(i.grid.eDiv),(r=t.children(".ui-jqgrid-error")).html(e),t.show(),i.p.errorDisplayTimeout)&&setTimeout(function(){r.empty(),t.hide()},i.p.errorDisplayTimeout)},getIconRes:function(e){var t,r,i,a=this instanceof $&&0<this.length?this[0]:this;return a&&a.p&&(a=a.p,r=function(e,t,r){var i,a,o,l=t.split("."),n=l.length,s=[];if(null==(e="string"==typeof e?jgrid.icons[e]:e))return"";for((i=e).common?s.push(i.common):r&&r.common&&s.push(r.common),o=0;o<n&&(a=l[o]);o++){if(o+1===n&&i.ignoreParents&&(s=[]),void 0===(i=i[a])){if("common"===a)break;return""}if("string"==typeof i){s.push(i);break}null!=i&&i.common&&s.push(i.common)}return jgrid.mergeCssClasses.apply(this,s)},null!=(t=jgrid.icons[a.iconSet]))&&(""===(i=r(a.iconSet,e))&&null!=t.baseIconSet?r(t.baseIconSet,e,jgrid.icons[a.iconSet]):i)||""},isInCommonIconClass:function(e){var t=this instanceof $&&0<this.length?this[0]:this;if(!t||!t.p)return"";t=t.p,t=jgrid.icons[t.iconSet];if(null==t)return!1;var r=t.common;if(void 0===r){if(null==t.baseIconSet)return!1;if(null==(t=jgrid.icons[t.baseIconSet]))return!1;r=t.common}return"string"==typeof r&&0<=$.inArray(e,r.split(" "))},getUniqueValueFromColumnIndex:function(e){var t=this[0];if(!t||!t.grid)return null;var r,i=[],a="",o=t.p.indexByColumnData[e];if(null!=o){for(a in o)if(o.hasOwnProperty(a)){for(r in o[a])if(o[a].hasOwnProperty(r)){a=String(o[a][r]);break}i.push(a)}t.p.ignoreCase?void 0===String.prototype.localeCompare?i.sort(function(e,t){e=e.toLowerCase(),t=t.toLowerCase();return e===t?0:t<e?1:-1}):i.sort(function(e,t){return String(e).toLowerCase().localeCompare(String(t).toLowerCase())}):i.sort()}return i},generateDatalistFromColumnIndex:function(e){if(!this[0]||!this[0].grid)return null;var t,r,i=this.jqGrid("getUniqueValueFromColumnIndex",e),a=$("<datalist></datalist>");if(!(null!=i&&0<i.length))return $();for(t=0,r=i.length;t<r;t++)a.append($("<option></option>").attr("value",i[t]));return a},getGridParam:function(e){var t=this[0];return t&&t.grid?e?void 0!==t.p[e]?t.p[e]:null:t.p:null},setGridParam:function(e,t){return this.each(function(){null==t&&(t=!1),this.grid&&"object"==typeof e&&(!0===t?$.extend(this.p,e):$.extend(!0,this.p,e))})},abortAjaxRequest:function(){return this.each(function(){null!=this.p.jqXhr&&this.p.jqXhr.abort(),this.grid.endReq.call(this)})},getGridRowById:function(i){var a,o;return null==i?null:(o=i.toString(),this.each(function(){var e,t,r=this.rows;if(!(a=null!=this.p.rowIndexes&&(t=r[this.p.rowIndexes[o]])&&t.id===o?t:a))try{for(e=r.length;e--;)if(t=r[e],o===t.id){a=t;break}}catch(e){a=0<(a=$(this.grid.bDiv).find("#"+jqID(i))).length?a[0]:null}}),a)},getDataIDs:function(){var a=[];return this.each(function(){var e,t,r=this.rows,i=r.length;if(i&&0<i)for(e=0;e<i;e++)t=r[e],$(t).hasClass("jqgrow")&&a.push(t.id)}),a},setSelection:function(f,g,m){return this.each(function(){function e(e,t){function r(e){$(e)[i](p).attr(o),void 0!==a&&$(e.cells[a]).children("input.cbox").prop("checked",t)}var i=t?"addClass":"removeClass",a=d.iColByName.cb,o=t?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"};r(e),h&&r(h[e.rowIndex])}var t,r,i,a,o,l,n=this,s=$(n),d=n.p,c=base.getGuiStyles,u=base.getGridRowById,p=c.call(s,"states.select"),c=c.call(s,"states.disabled"),h=n.grid.fbRows;void 0!==f&&(g=!1!==g,r=null==(r=null!=m&&0<(i=$(m.target).closest("tr.jqgrow")).length&&(r=i[0],h)?n.rows[r.rowIndex]:r)?u.call(s,f):r)&&r.className&&!(-1<r.className.indexOf(c))&&(!0===d.scrollrows&&null!=(i=u.call(s,f))&&0<=(i=i.rowIndex)&&(c=n.rows[i],i=n.grid.bDiv,a=i.clientHeight,o=i.scrollTop,l=$(c).position().top,c=c.clientHeight,a+o<=l+c?i.scrollTop=l-(a+o)+c+o:l<a+o&&l<o&&(i.scrollTop=l)),d.multiselect?(n.setHeadCheckBox(!1),d.selrow=r.id,c=jgrid.detectRowEditing.call(n,r.id),-1===(a=$.inArray(d.selrow,d.selarrrow))?(t=!0,d.selarrrow.push(d.selrow)):null===c||"inlineEditing"!==c.mode&&$(m.target).hasClass("cbox")?(t=!1,d.selarrrow.splice(a,1),o=d.selarrrow[0],d.selrow=void 0===o?null:o):t=!0,"ui-subgrid"!==r.className&&e(r,t),g&&feedback.call(n,"onSelectRow",r.id,t,m||{})):"ui-subgrid"!==r.className&&(t=d.selrow!==r.id&&(null!==d.selrow&&(l=u.call(s,d.selrow))&&e(l,!1),e(r,!0),!0),d.selrow=r.id,g)&&feedback.call(n,"onSelectRow",r.id,t,m||{}))})},resetSelection:function(h){return this.each(function(){function t(e){var t="removeClass",r={"aria-selected":"false",tabindex:"-1"};$(e)[t](s).attr(r),u&&$(e.cells[c]).children("input.cbox").prop("checked",!1),p&&(e=p[e.rowIndex],$(e)[t](s).attr(r),u)&&$(e.cells[c]).children("input.cbox").prop("checked",!1)}var e,r,i=this,a=$(this),o=i.p,l=base.getGuiStyles,n=base.getGridRowById,s=l.call(a,"states.select"),d="edit-cell "+s,l="selected-row "+l.call(a,"states.hover"),c=o.iColByName.cb,u=void 0!==c,p=i.grid.fbRows;void 0!==h?(r=n.call(a,h),t(r),u&&(i.setHeadCheckBox(!1),-1!==(e=$.inArray(h,o.selarrrow)))&&o.selarrrow.splice(e,1)):o.multiselect?($(i.rows).each(function(){var e=$.inArray(this.id,o.selarrrow);-1!==e&&(t(this),o.selarrrow.splice(e,1))}),i.setHeadCheckBox(!1),o.multiPageSelection||clearArray(o.selarrrow),o.selrow=null):o.selrow&&(r=n.call(a,o.selrow),t(r),o.selrow=null),!0===o.cellEdit&&0<=parseInt(o.iCol,10)&&0<=parseInt(o.iRow,10)&&(null!=(r=i.rows[o.iRow])&&($(r.cells[o.iCol]).removeClass(d),$(r).removeClass(l)),p)&&null!=(r=p[o.iRow])&&($(r.cells[o.iCol]).removeClass(d),$(r).removeClass(l))})},isCellEditing:function(e,t,r){var i=this[0],a=jgrid.detectRowEditing.call(i,e);if(null!=a&&("inlineEditing"===a.mode||"cellEditing"===a.mode&&a.savedRow.ic===t)){t=isNaN(t)?i.p.iColByName[t]:parseInt(t,10);var r=null!=r&&r.id===e?r:base.getGridRowById.call($(i),e),o=i.p.colModel[t],l=o.editable;if(!0===(l=$.jgrid.isFunction(l)?l.call(i,{rowid:e,id:stripPref(i.p.idPrefix,e),iCol:t,iRow:r.rowIndex,cmName:o.name,cm:o,mode:a.mode,td:r.cells[t],tr:r,dataElement:jgrid.getDataFieldOfCell.call(i,r,t)[0]}):l))return!0}return!1},getRowData:function(p,h){var f,g={};return"object"==typeof p&&(h=p,p=void 0),h=h||{},this.each(function(){var e,t,r,i,a,o,l,n=this,s=n.p,d=!1,c=1,u=n.rows;if(void 0===p)d=!0,f=[],c=u.length;else if(!(e=base.getGridRowById.call($(n),p)))return g;for(t=0;t<c;t++)if(d&&(e=u[t]),$(e).hasClass("jqgrow")){for(jgrid.detectRowEditing.call(n,p),i=$(e).find("td[role=gridcell]"),r=0;r<i.length;r++)if(o=(a=s.colModel[r]).name,$.inArray(o,s.reservedColumnNames)<0&&"actions"!==a.formatter&&(!h.skipHidden||!a.hidden))if(l=i[r],base.isCellEditing.call($(n),p,r,e))g[o]=jgrid.getEditedValue.call(n,jgrid.getDataFieldOfCell.call(n,e,r),a,{},a.editable);else if(!0===s.treeGrid&&o===s.ExpandColumn)g[o]=htmlDecode($("span",l).first().html());else try{g[o]=$.unformat.call(n,l,{rowId:p,colModel:a},r)}catch(e){g[o]=htmlDecode($(l).html())}!h.includeId||!1!==s.keyName&&null!=g[s.keyName]||(g[s.prmNames.id]=stripPref(s.idPrefix,e.id)),d&&(f.push(g),g={})}}),f||g},delRowData:function(n){var s=!1;return this.each(function(){var e,r,i,t=this,a=t.p,o=$.jgrid.detectRowEditing.call(t,n),l=base.getGridRowById.call($(t),n);if(l){if(a.subGrid&&(e=$(l).next()).hasClass("ui-subgrid")&&e.remove(),null!=o)try{"inlineEditing"===o.mode&&null!=base.restoreRow?base.restoreRow.call($(t),n):"cellEditing"===o.mode&&null!=base.restoreCell&&base.restoreCell.call($(t),o.savedRow.id,o.savedRow.ic)}catch(e){}l.rowIndex===a.iRow&&(a.iRow=-1,a.iCol=-1),$(l).remove(),a.records--,a.reccount--,t.updatepager(!0,!1)}s=!0,a.multiselect&&-1!==(e=$.inArray(n,a.selarrrow))&&a.selarrrow.splice(e,1),a.multiselect&&0<a.selarrrow.length?a.selrow=a.selarrrow[a.selarrrow.length-1]:a.selrow===n&&(a.selrow=null),"local"===a.datatype&&(o=stripPref(a.idPrefix,n),void 0!==(e=a._index[o]))&&(t.removeItemDataFromColumnIndex(o),a.data.splice(e,1),t.refreshIndex(),l||(o=parseInt(a.rowNum,10),a.records=a.data.length,a.reccount=Math.min(a.records,o),a.lastpage=Math.ceil(a.records/o),t.updatepager(!0,!1))),t.rebuildRowIndexes(),!0===a.altRows&&s&&!$(t).jqGrid("isBootstrapGuiStyle")&&(r=a.altclass,i=t.grid.fbRows,$(t.rows).each(function(e){var t=$(this);(t=i?t.add(i[this.rowIndex]):t)[e%2==0?"addClass":"removeClass"](r)})),feedback.call(t,"afterDelRow",n)}),s},setRowData:function(p,h,i){var o=!0;return this.each(function(){var l,n=this,s=n.p,e=typeof i,d={};if(!n.grid)return!1;if(!(l=base.getGridRowById.call($(n),p)))return!1;if(h)try{var t,a=stripPref(s.idPrefix,p),r=s._index[a],c={},u=null!=r?s.data[r]:void 0;if($(s.colModel).each(function(e){var t=this,r=t.name,i=getAccessor(h,r);void 0!==i&&("local"===s.datatype&&null!=u&&(i=convertOnSaveLocally.call(n,i,t,u[r],a,u,e),$.jgrid.isFunction(t.saveLocally)?t.saveLocally.call(n,{newValue:i,newItem:d,oldItem:u,id:a,cm:t,cmName:r,iCol:e}):d[r]=i),c[r]=i)}),$(s.colModel).each(function(e){var t,r,i=this.name,a=getAccessor(h,i),o=$(l.cells[e]);void 0!==a&&("local"===s.datatype&&null!=u&&(a=d[i]),t=this.title?{title:a}:{},a=n.formatter(p,a,e,h,"edit",c),"select"===this.formatter&&(t=this.title?{title:stripHtml(a)}:{}),r=o,(r=!0===s.treeGrid&&i===s.ExpandColumn?r.children("span.cell-wrapperleaf,span.cell-wrapper").first():r).html(a),o.attr(t),s.frozenColumns)&&(r=$(n.grid.fbRows[l.rowIndex].cells[e]),(r=!0===s.treeGrid&&i===s.ExpandColumn?r.children("span.cell-wrapperleaf,span.cell-wrapper").first():r).html(a).attr(t))}),"local"===s.datatype){if(s.treeGrid)for(t in s.treeReader)s.treeReader.hasOwnProperty(t)&&delete d[s.treeReader[t]];void 0!==u&&(s.data[r]=$.extend(!0,u,d),n.removeItemDataFromColumnIndex(a),n.addItemDataToColumnIndex(s.data[r],a))}feedback.call(n,"afterSetRow",{rowid:p,inputData:h,iData:r,iRow:l.rowIndex,tr:l,localData:d,cssProp:i})}catch(e){o=!1}o&&("string"==e?$(l).addClass(i):null!==i&&"object"==e&&$(l).css(i))}),o},changeRowid:function(p,h){return this.each(function(){var e,t,r,i,a,o=this,l=$(o),n=o.p;if(o.grid&&n&&p!==h&&(r=l.jqGrid("getGridRowById",p))&&null==l.jqGrid("getGridRowById",h)){var s=jgrid.stripPref(n.idPrefix,p),d=jgrid.stripPref(n.idPrefix,h),c=!1===n.keyName?n.prmNames.id:n.keyName,u=function(){var e=this.id,t=e.length-s.length;0<t&&e.substr(t)===s&&$(this).attr("id",e.substr(0,t)+d)};for(0<=n.iColByName[c]&&l.jqGrid("setCell",p,c,d),"local"===n.datatype&&void 0!==n._index[s]&&(n._index[d]=n._index[s],t=n.data[n._index[s]],delete n._index[s],t.hasOwnProperty(c))&&(t[c]=d),n.rowIndexes[h]=r.rowIndex,delete n.rowIndexes[p],(i=null==o.grid.fbRows?$(r):$(r).add(o.grid.fbRows[r.rowIndex])).attr("id",h),n.selrow===p&&(n.selrow=h),Array.isArray(n.selarrrow)&&0<=(e=$.inArray(p,n.selarrrow))&&(n.selarrrow[e]=h),n.multiselect&&(t="jqg_"+n.id+"_"+h,i.find("input.cbox").attr("id",t).attr("name",t)),e=0;e<n.colModel.length;e++)"actions"===(a=n.colModel[e]).formatter?i.find(".ui-jqgrid-actions .ui-pg-div").each(u):("showlink"===a.formatter||null!=a.unformat&&null!=a.formatter)&&(a=l.jqGrid("getCell",h,e),l.jqGrid("setCell",h,e,a,!1,!1,!0));feedback.call(o,"afterChangeRowid",{rowid:h,oldRowid:p,iRow:r.rowIndex,tr:r})}})},addRowData:function(u,p,h,f){$.inArray(h,["first","last","before","after","afterSelected","beforeSelected"])<0&&(h="last");var g,m,v,b,w,y,j,x,C,D,S,q=!1;return p&&(Array.isArray(p)?(y=!0,j=u):y=!(p=[p]),this.each(function(){var e,t,r=this,i=r.p,a=p.length,o=$(r),l=r.rows,n=0,s=base.getGridRowById,d=i.colModel,c=i.additionalProperties;for(y||(void 0!==u?u=String(u):(u=randId(),!1!==i.keyName&&(j=i.keyName,void 0!==p[0][j])&&(u=p[0][j]))),x=i.altclass;n<a;){if(C=p[n],m=[],y)try{void 0===(u=C[j])&&(u=randId())}catch(e){u=randId()}for(S=jgrid.stripPref(i.idPrefix,u),e={},b=0;b<d.length;b++)D=d[b],"rn"!==(g=D.name)&&"cb"!==g&&"subgrid"!==g&&(w=convertOnSaveLocally.call(r,getAccessor(C,g),D,void 0,S,{},b),$.jgrid.isFunction(D.saveLocally)?D.saveLocally.call(r,{newValue:w,newItem:e,oldItem:{},id:S,rowid:u,cm:D,cmName:g,iCol:b}):void 0!==w&&(e[g]=w));for(b=0;b<c.length;b++)"object"==typeof(g=c[b])&&g.hasOwnProperty("name")&&(g=g.name),void 0!==(w=getAccessor(C,g))&&(e[g]=w);if("local"===i.datatype&&(e[i.localReader.id]=S,i._index[S]=i.data.length,i.data.push(e),r.addItemDataToColumnIndex(e,S)),t=i.grouping,i.grouping=!1,m=jgrid.parseDataToHtml.call(r,1,[u],[e]),i.grouping=t,m=m.join(""),0===l.length)$(r.tBodies[0]).append(m);else switch(h="afterSelected"!==h&&"beforeSelected"!==h?h:void 0===f&&null!==i.selrow?(f=i.selrow,"afterSelected"===h?"after":"before"):"afterSelected"===h?"last":"first"){case"last":$(l[l.length-1]).after(m),v=l.length-1;break;case"first":$(l[0]).after(m),v=1;break;case"after":v=(v=s.call(o,f))&&($(l[v.rowIndex+1]).hasClass("ui-subgrid")?($(l[v.rowIndex+1]).after(m),v.rowIndex+2):($(v).after(m),v.rowIndex+1));break;case"before":(v=s.call(o,f))&&($(v).before(m),v=v.rowIndex-1)}!0===i.subGrid&&base.addSubGrid.call(o,i.iColByName.subgrid,v),i.records++,i.reccount++,0===i.lastpage&&(i.lastpage=1),feedback.call(r,"afterAddRow",{rowid:u,inputData:p,position:h,srcRowid:f,iRow:v,tr:l[v],localData:e,iData:i.data.length-1}),n++}!0!==i.altRows||y||o.jqGrid("isBootstrapGuiStyle")||("last"===h?(l.length-1)%2==0&&$(l[l.length-1]).addClass(x):$(l).each(function(e){e%2==1?$(this).addClass(x):$(this).removeClass(x)})),r.rebuildRowIndexes(),r.updatepager(!0,!0),q=!0})),q},footerData:function(c,u,p){var h=!1,f={};return"boolean"!=typeof p&&(p=!0),c=(c=null==c?"get":c).toLowerCase(),this.each(function(){var e,t,r,i,a=this,o=a.p;if(!a.grid||!o.footerrow)return!1;if("set"===c&&function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(u))return!1;h=!0;var l=$(a.grid.sDiv).children(".ui-jqgrid-hbox"+("rtl"===o.direction?"-rtl":"")).children(".ui-jqgrid-ftable")[0];if(null==l||null==l.rows)return!1;var n=l.rows[0].cells,s=o.colModel,d=null==a.grid.fsDiv?{}:a.grid.fsDiv.children(".ui-jqgrid-ftable")[0].rows[0].cells;if("get"===c)for(i=0;i<s.length;i++)r=s[i].name,$.inArray(r,o.reservedColumnNames)<0&&(!1!==u?(e=$(n[i]).text(),$.jgrid.trim(e)&&(f[r]=e)):f[r]=$(n[i]).html());else if("set"===c)for(r in u)i=o.iColByName[r],u.hasOwnProperty(r)&&void 0!==i&&(e=p?a.formatter("",u[r],i,u,"edit"):u[r],(t=$(n[i]).add(d[i])).html(e),s[i].title)&&t.attr({title:stripHtml(e)})}),"get"===c?f:h},resetColumnResizerHeight:function(){return this.each(function(){if($.jgrid.msie)for(var e,t,r,i=this.grid.headers,a=0;a<i.length;a++)(r=(e=$(i[a].el)).height())&&0<(t=e.children(".ui-jqgrid-resize")).length&&.5<Math.abs(r-t.height())&&e.children(".ui-jqgrid-resize").height(r)})},rotateColumnHeaders:function(g,m){return this.each(function(){var e,t,r,i,a,o,l,n,s,d,c,u,p=$(this),h=this.p,f=h.frozenColumns&&$.jgrid.isFunction(base.getNumberOfFrozenColumns)?p.jqGrid("getNumberOfFrozenColumns"):0;for(Array.isArray(g)||(g=[g]),e=0;e<g.length;e++)r=g[e],0<=(r=isNaN(r)?h.iColByName[r]:parseInt(r,10))&&(t=this.grid.headers[r].el,t=r<f?$(t).add($(this.grid.fhDiv.find("#"+jqID(t.id)))):$(t),i=t.children("div"),a=i.children("span.s-ico"),o=i.children("span.ui-jqgrid-sort-order"),(n=i.children("span."+h.autoResizing.wrapperClassName)).length<1&&(a.detach(),o.detach(),i.wrapInner("<span class='"+h.autoResizing.wrapperClassName+"'></span>"),n=i.children("span."+h.autoResizing.wrapperClassName),i.each(function(e){e<a.length&&$(this).append(a[e]),e<o.length&&$(this).append(o[e])})),l=a.outerWidth(!0),n=n.outerWidth(),c=parseFloat(t.css("padding-top")||0),u=parseFloat(t.css("padding-bottom")||0),s=parseFloat(t.css("padding-left")||0),d=parseFloat(t.css("padding-right")||0),h.showSortOrder&&(l+=.5*l),t.height(n=void 0===m||0===m?n+l+s+d:m),t.css({paddingTop:d+"px",paddingBottom:s+"px",paddingLeft:c+"px",paddingRight:u+"px"}),i.css("min-width",n-s-d+"px").addClass("ui-jqgrid-rotate").css({bottom:0}),h.colModel[r].rotated=!0);p.jqGrid("resetColumnResizerHeight"),h.frozenColumns&&setTimeout(function(){p.triggerHandler("jqGridResetFrozenHeights",{header:{resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:-1,iRowEnd:-1}}})},0)})},showHideCol:function(c,f,g){return this.each(function(){var t,r=this,e=$(r),i=r.grid,a=!1,p=r.p,o=jgrid.cell_width?0:p.cellLayout;if(i){"string"==typeof c&&(c=[c]),g=g||{};var l,h=""===(f="none"!==f&&!1!==f?"":"none"),n=p.groupHeader,n=n&&("object"==typeof n||$.jgrid.isFunction(n));if(n&&!g.skipSetGroupHeaders&&base.destroyGroupHeader.call(e,!1),$(p.colModel).each(function(u){function e(e){for(var t,r,i,a,o,l,n,s,d=0,c=e.length;d<c;d++)i=(r=e[d]).cells[u],(!$(r).hasClass("jqgroup")||null!=i&&1===i.colSpan)&&(t=$(i),0===d&&$(r).hasClass("jqgfirstrow")?(t.css("height","1px"),t.css("display",f),t.css("height","0")):t.css("display",f),h)&&null!=i&&"TH"===i.tagName.toUpperCase()&&t.hasClass("ui-th-column")&&(r=t.children("div")).hasClass("ui-jqgrid-rotate")&&(i=r.children("span.s-ico"),(o=r.children("span."+p.autoResizing.wrapperClassName)).outerHeight(),a=o.outerWidth(),i.outerHeight(),i=i.outerWidth(!0),0<o.length)&&(o=parseFloat(t.css("padding-top")||0),l=parseFloat(t.css("padding-bottom")||0),n=parseFloat(t.css("padding-left")||0),s=parseFloat(t.css("padding-right")||0),p.showSortOrder&&(i+=.5*i),t.height(a=a+i+n+s),t.css({paddingTop:s+"px",paddingBottom:n+"px",paddingLeft:o+"px",paddingRight:l+"px"}),r.css("min-width",a-n-s+"px").css({bottom:0}))}if(-1!==$.inArray(this.name,c)&&this.hidden===h){if(!0===p.frozenColumns&&!0===this.frozen&&!g.notSkipFrozen)return!0;e($(i.hDiv).find(".ui-jqgrid-htable>thead>tr")),!0===p.frozenColumns&&null!=i.fhDiv&&e($(i.fhDiv).find(".ui-jqgrid-htable>thead>tr")),e(r.rows),!0===p.frozenColumns&&null!=i.fbRows&&e(r.rows),p.footerrow&&(e($(i.sDiv).find("tr.footrow")),!0===p.frozenColumns)&&null!=i.fsDiv&&e($(i.fsDiv).find("tr.footrow")),t=parseInt(this.width,10),"none"===f?p.tblwidth-=t+o:p.tblwidth+=t+o,this.hidden=!h,a=!0,g.skipFeedback?(g.toReport=g.toReport||{},g.toReport[this.name]=h):feedback.call(r,"onShowHideCol",h,this.name,u,g)}}),!0===a&&(l=p.autowidth||void 0!==p.widthOrg&&"auto"!==p.widthOrg&&"100%"!==p.widthOrg?p.width:p.tblwidth+parseInt(p.scrollOffset,10),g.skipSetGridWidth?g.newGridWidth=l:base.setGridWidth.call(e,l)),n&&!g.skipSetGroupHeaders)if(null!=p.pivotOptions&&null!=p.pivotOptions.colHeaders&&1<p.pivotOptions.colHeaders.length)for(var s=p.pivotOptions.colHeaders,d=0;d<s.length;d++)s[d]&&s[d].groupHeaders.length&&base.setGroupHeaders.call(e,s[d]);else base.setGroupHeaders.call(e,p.groupHeader)}})},hideCol:function(e,t){return this.each(function(){base.showHideCol.call($(this),e,"none",t)})},showCol:function(e,t){return this.each(function(){base.showHideCol.call($(this),e,"",t)})},remapColumns:function(a,e,t){var r,i,o,l,n=this[0],s=n.p,d=n.grid,c=$.makeArray,u=!0===s.frozenColumns,p=this.jqGrid("getNumberOfFrozenColumns");function h(t){var r=t.length?c(t):$.extend({},t);$.each(l,function(e){t[e]=r[this]})}function f(e,t){(t?e.children(t):e.children()).each(function(){var i=this,a=c(i.cells);$.each(l,function(e){var t=a[this],r=i.cells[e];null!=t&&null!=r&&t.cellIndex!==e&&t.parentNode.insertBefore(t,r)})})}if(null!=d&&null!=s){for(l=function(){for(var e=[],t=[],r=a.length,i=0;i<r;i++)(u&&a[i]<p?e:t).push(a[i]);return e.concat(t)}(),h(s.colModel),h(s.colNames),h(d.headers),o=$(d.hDiv).children("div").children("table.ui-jqgrid-htable").children("thead"),f(o=u&&null!=d.fhDiv?o.add(d.fhDiv.children("table.ui-jqgrid-htable").children("thead")):o,t&&":not(.ui-jqgrid-labels)"),e&&(o=$(n.tBodies[0]),f(o=u&&null!=d.fbDiv?o.add(d.fbDiv.children("table.ui-jqgrid-btable").children("tbody").first()):o,"tr.jqgfirstrow,tr.jqgrow,tr.jqfoot")),s.footerrow&&(o=$(d.sDiv).children("div").children("table.ui-jqgrid-ftable").children("tbody").first(),f(o=u&&null!=d.fsDiv?o.add(d.fsDiv.children("table.ui-jqgrid-ftable").children("tbody").first()):o)),s.remapColumns&&(s.remapColumns.length?h(s.remapColumns):s.remapColumns=c(l)),s.lastsort=$.inArray(s.lastsort,l),s.iColByName={},r=0,i=s.colModel.length;r<i;r++)s.iColByName[s.colModel[r].name]=r;feedback.call(n,"onRemapColumns",l,e,t)}},remapColumnsByName:function(e,t,r){var i,a,o=this[0].p,l=[],n=e.slice(),e=$.inArray;for(o.subGrid&&e("subgrid",n)<0&&n.unshift("subgrid"),o.multiselect&&e("cb",n)<0&&n.unshift("cb"),o.rownumbers&&e("rn",n)<0&&n.unshift("rn"),i=0,a=n.length;i<a;i++)l.push(o.iColByName[n[i]]);return base.remapColumns.call(this,l,t,r),this},setGridWidth:function(q,F){return this.each(function(){var t,r,e=this,i=e.p,a=e.grid,o=0,l=0,n=!1,s=0,d=jgrid.isCellClassHidden,c=q;if(a&&null!=i){e.fixScrollOffsetAndhBoxPadding();var u,p,h,f=i.colModel,g=i.scrollOffset,m=jgrid.cell_width?0:i.cellLayout,v=a.headers,b=a.footers,w=a.bDiv,y=a.hDiv,j=a.sDiv,x=a.cols,C=$(y).find(">div>.ui-jqgrid-htable>thead>tr").first()[0].cells,D=function(e){a.width=i.width=e,$(i.gBox).css("width",e+"px"),$(i.gView).css("width",e+"px"),$(w).css("width",e+"px"),$(y).css("width",e+"px"),i.pager&&$(i.pager).css("width",e+"px"),i.toppager&&$(i.toppager).css("width",e+"px"),!0===i.toolbar[0]&&($(a.uDiv).css("width",e+"px"),"both"===i.toolbar[1])&&$(a.ubDiv).css("width",e+"px"),i.footerrow&&$(j).css("width",e+"px")};if("boolean"!=typeof F&&(F=i.shrinkToFit),!isNaN(c)){if(D(c=parseInt(c,10)),!1===F&&!0===i.forceFit&&(i.forceFit=!1),!0===F){if($.each(f,function(){!1!==this.hidden||d(this.classes)||(t=this.widthOrg,o+=t+m,this.fixed?s+=this.width+m:l++)}),0===l)return;if(i.tblwidth=parseInt(o,10),S=c-m*l-s,isNaN(i.height)||(w.clientHeight<w.scrollHeight||1===e.rows.length)&&(n=!0,S-=g),(h=S/(i.tblwidth-m*l-s))<0)return;if(p=(o=0)<x.length,$.each(f,function(e){!1!==this.hidden||d(this.classes)||this.fixed||(t=Math.round(this.widthOrg*h),this.width=t,o+=t,v[e].width=t,C[e].style.width=t+"px",i.footerrow&&(b[e].style.width=t+"px"),p&&(x[e].style.width=t+"px"),r=e)}),!r)return;S=0,n?c-s-(o+m*l)!==g&&(S=c-s-(o+m*l)-g):1!==Math.abs(c-s-(o+m*l))&&(S=c-s-(o+m*l)),(f=f[r]).width+=S,i.tblwidth=parseInt(o+S+m*l+s,10),i.tblwidth>c&&(u=i.tblwidth-parseInt(c,10),i.tblwidth=c,f.width=f.width-u),t=f.width,v[r].width=t,C[r].style.width=t+"px",p&&(x[r].style.width=t+"px"),i.footerrow&&(b[r].style.width=t+"px"),i.tblwidth+(n?g:0)<i.width&&D(i.tblwidth+(n?g:0)),w.offsetWidth>w.clientWidth&&(i.autowidth||void 0!==i.widthOrg&&"auto"!==i.widthOrg&&"100%"!==i.widthOrg||D(w.offsetWidth))}i.tblwidth&&(i.tblwidth=parseInt(i.tblwidth,10),c=i.tblwidth,y.scrollLeft=w.scrollLeft,u=Math.abs(c-i.width),i.shrinkToFit)&&!F&&u<3&&0<u&&(c<i.width&&D(c),w.offsetWidth>w.clientWidth)&&(i.autowidth||void 0!==i.widthOrg&&"auto"!==i.widthOrg&&"100%"!==i.widthOrg||D(w.offsetWidth)),e.fixScrollOffsetAndhBoxPadding();var S={resizeDiv:!0,resizedRows:{iRowStart:F?0:-1,iRowEnd:-1}};$(e).triggerHandler("jqGridResetFrozenHeights",[{header:S,resizeFooter:!0,body:S}])}}})},setGridHeight:function(a){return this.each(function(){var e,t=this,r=t.grid,i=t.p;r&&((e=$(r.bDiv)).css({height:a+(isNaN(a)?"":"px")}),!0===i.frozenColumns&&$(i.idSel+"_frozen").parent().height(e.height()-16),i.height=a,i.scroll&&r.populateVisible.call(t),t.fixScrollOffsetAndhBoxPadding(),$(t).triggerHandler("jqGridResetFrozenHeights"))})},setCaption:function(t){return this.each(function(){var e=this.grid.cDiv;this.p.caption=t,$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",e).html(t),$(e).show(),$(e).nextAll("div").removeClass(base.getGuiStyles.call(this,"top")),$(this).triggerHandler("jqGridResetFrozenHeights")})},setLabel:function(i,a,o,l){return this.each(function(){var e,t,r=this.p;if(this.grid){if(isNaN(i)){if(void 0===(e=r.iColByName[i]))return}else e=parseInt(i,10);0<=e&&(t=$(this.grid.headers[e].el),r.frozenColumns&&(t=t.add(this.grid.fhDiv.find("#"+jqID(t)))),a&&(t.each(function(){var e=$("[id^=jqgh_]",this),t=e.children("span.ui-jqgrid-cell-wrapper");0<t.length?t.html(a):(t=$(".s-ico",this),e.empty().html(a)[r.sortIconsBeforeText?"prepend":"append"](t))}),r.colNames[e]=a),o&&("string"==typeof o?t.addClass(o):t.css(o)),"object"==typeof l)&&t.attr(l)}})},setCell:function(g,m,v,b,w,y){return this.each(function(){var e,t,r,i,a,o,l,n,s,d=this,c=d.p,u=c.colModel,p={};if(d.grid&&0<=(e=isNaN(m)?c.iColByName[m]:parseInt(m,10))&&(a=base.getGridRowById.call($(d),g))){if(o=jgrid.getCell.call(d,a,e),""!==v||!0===y){if(r=u[e],null==(i="local"===c.datatype&&(s=stripPref(c.idPrefix,g),void 0!==(h=c._index[s]))?c.data[h]:i)){for(t=0;t<a.cells.length;t++)if(t!==e&&0<(l=jgrid.getDataFieldOfCell.call(d,a,t)).length){try{n=$.unformat.call(d,l,{rowId:g,colModel:u[t]},t)}catch(e){n=htmlDecode(l[0].innerHTML)}p[u[t].name]=n}}else p=i;p[r.name]=v;var h=d.formatter(g,v,e,p,"edit"),f=o;(f=!0===c.treeGrid&&r.name===c.ExpandColumn?f.children("span.cell-wrapperleaf,span.cell-wrapper").first():f).html(h),r.title&&o.attr({title:v}),null!=i&&(h=convertOnSaveLocally.call(d,v,r,i[r.name],s,i,e),$.jgrid.isFunction(r.saveLocally)?r.saveLocally.call(d,{newValue:h,newItem:i,oldItem:i,id:s,cm:r,cmName:r.name,iCol:e}):i[r.name]=h)}(b||w)&&(o=jgrid.getCell.call(d,a,e),b&&o["string"==typeof b?"addClass":"css"](b),"object"==typeof w)&&o.attr(w)}})},getCell:function(o,l){var n=!1;return this.each(function(){var e,t,r,i=this,a=i.p;if(i.grid&&0<=(e=isNaN(l)?a.iColByName[l]:parseInt(l,10))&&(t=base.getGridRowById.call($(i),o))){r=jgrid.getDataFieldOfCell.call(i,t,e).first(),a=a.colModel[e];try{n=base.isCellEditing.call($(i),o,e,t)?jgrid.getEditedValue.call(i,r,a,{},a.editable):$.unformat.call(i,r,{rowId:t.id,colModel:a},e)}catch(e){n=htmlDecode(r.html())}}}),n},getCol:function(u,p,h){var f,g,m,v,b=[],w=0;return p="boolean"==typeof p&&p,void 0===h&&(h=!1),this.each(function(){var e,t,r=this,i=r.p;if(r.grid&&0<=(e=isNaN(u)?i.iColByName[u]:parseInt(u,10))){var a,o,l=r.rows,n=l.length,s=0,d=0,c=i.colModel[e];if(n&&0<n){for(;s<n;){if(a=l[s],$(a).hasClass("jqgrow")){t=jgrid.getDataFieldOfCell.call(r,a,e).first(),o=a.id;try{f=base.isCellEditing.call($(r),o,e,a)?jgrid.getEditedValue.call(r,t,c,{},c.editable):$.unformat.call(r,t,{rowId:o,colModel:c},e)}catch(e){f=htmlDecode(t.html())}h?(v=parseFloat(f),isNaN(v)||(w+=v,void 0===m&&(m=g=v),g=Math.min(g,v),m=Math.max(m,v),d++)):p?b.push({id:o,value:f}):b.push(f)}s++}if(h)switch(h.toLowerCase()){case"sum":b=w;break;case"avg":b=w/d;break;case"count":b=n-1;break;case"min":b=g;break;case"max":b=m}}}}),b},clearGridData:function(a){return this.each(function(){var e=this,t=e.p,r=e.rows,i=e.grid;i&&t&&r&&("boolean"!=typeof a&&(a=!1),$(e).off(".jqGridFormatter"),i.emptyRows.call(e,!1,!0),t.footerrow&&a&&$(".ui-jqgrid-ftable td",i.sDiv).html("&#160;"),t.selrow=null,clearArray(t.selarrrow),clearArray(t.savedRow),t.editingInfo={},clearArray(t.data),clearArray(t.lastSelectedData),t._index={},t.rowIndexes={},t.dataIndexById={},t.indexByColumnData={},t.records=0,t.page=1,t.lastpage=0,t.reccount=0,e.updatepager(!0,!1))})},getInd:function(e,t){e=base.getGridRowById.call($(this),e);return!!e&&(!0===t?e:e.rowIndex)},bindKeys:function(e){var d=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var l=this,n=l.p,s=$(l);n.scrollrows=d.scrollingRows,s.on("keydown.jqGrid",function(t){function e(e){do{if(null===(i=i[e]))return}while($(i).is(":hidden")||!$(i).hasClass("jqgrow"));base.setSelection.call(s,i.id,!0),t.preventDefault()}function r(e){var t;n.treeGrid&&(t=n.data[n._index[stripPref(n.idPrefix,i.id)]][n.treeReader.expanded_field],t="Right"===e?!t:t)&&$(i).find("div.treeclick").trigger("click"),o(e,"Key")}var i=$(this).find("tr[tabindex=0]")[0],a=jgrid.detectRowEditing.call(l,$(t.target).closest("tr.jqgrow").attr("id")),o=function(e,t){t=d["on"+e+(t||"")];s.triggerHandler("jqGridKey"+e,[n.selrow]),$.jgrid.isFunction(t)&&t.call(l,n.selrow)};if(i&&null===a)switch(t.keyCode){case 38:e("previousSibling");break;case 40:e("nextSibling");break;case 37:r("Left");break;case 39:r("Right");break;case 13:o("Enter");break;case 32:o("Space")}})})},unbindKeys:function(){return this.each(function(){$(this).off("keydown.jqGrid")})},getLocalRow:function(t){var r,i=!1;return this.each(function(){var e=this.p;void 0!==t&&null!=e&&null!=e._index&&null!=e.data&&0<=(r=e._index[stripPref(e.idPrefix,t)])&&(i=e.data[r])}),i},progressBar:function(i){return i=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},i||{}),this.each(function(){var e="show"===i.method,t=jqID(this.p.id),r=$("#load_"+t);switch(""!==i.htmlcontent&&r.html(i.htmlcontent),i.loadtype){case"disable":break;case"enable":r.toggle(e);break;case"block":$("#lui_"+t).toggle(e),r.toggle(e)}})},setColWidth:function(a,o,l,n){return this.each(function(){var e,t=$(this),r=this.grid,i=this.p;if("string"==typeof a){if(void 0===(a=i.iColByName[a]))return}else if("number"!=typeof a)return;null!=(e=r.headers[a])&&(e.newWidth=o,r.newWidth=i.tblwidth+o-e.width,r.resizeColumn(a,!i.frozenColumns,n),!1===l||n||(this.fixScrollOffsetAndhBoxPadding(),base.setGridWidth.call(t,r.newWidth+i.scrollOffset,!1)))})},getAutoResizableWidth:function(e){if(0===this.length)return-1;(t=this[0]).rows;var t,r,i,a,o,l,n=t.p,s=n.colModel[e],d=$(t.grid.headers[e].el),c=d.children("div"),u=parseFloat(d.css(s.rotated?"padding-top":"padding-left")||0),d=parseFloat(d.css(s.rotated?"padding-bottom":"padding-right")||0),p=c.children("span.s-ico"),h=c.children(".ui-jqgrid-sort-order"),f=c.children("."+n.autoResizing.wrapperClassName),g=s.rotated?f.outerHeight():f.outerWidth(),m=parseFloat(f.css(s.rotated?"height":"width")||0),v=0,b=0,w=(null!=s.autoResizing&&void 0!==s.autoResizable.compact?s.autoResizable:n.autoResizing).compact,y=n.autoResizing.wrapperClassName;if(null==s||!s.autoResizable||0===f.length||s.hidden||jgrid.isCellClassHidden(s.classes)||s.fixed)return-1;for(w&&!p.is(":visible")&&"none"===p.css("display")||(b=s.rotated?p.outerHeight(!0):p.outerWidth(!0)+(0<h.length?h.outerWidth(!0):0),n.sortIconsBeforeText)||(b-="rtl"===n.direction?parseFloat(p.css("padding-left")||0)+parseFloat(p.css("margin-left")||0):parseFloat(p.css("padding-right")||0)+parseFloat(p.css("margin-right")||0)),s.rotated?b=Math.max(b,g+u+d):b+=g+u+(m===g?u+d:0)+parseFloat(c.css("margin-left")||0)+parseFloat(c.css("margin-right")||0),a=0,r=t.rows;a<r.length;a++)l=(i=r[a]).cells[e],o=$(i.cells[e]),null!=l&&($(i).hasClass("jqgrow")&&"none"!==i.style.display&&"none"!==l.style.display||$(i).hasClass("jqgroup")&&1===l.colSpan)?(l=$(l.firstChild)).hasClass(y)?b=Math.max(b,l.outerWidth()+v):n.treeGrid&&n.ExpandColumn===s.name&&(l=o.children(".cell-wrapper,.cell-wrapperleaf"),b=Math.max(b,l.outerWidth()+v+o.children(".tree-wrap").outerWidth())):$(i).hasClass("jqgfirstrow")&&(v=(jgrid.cell_width?parseFloat(o.css("padding-left")||0)+parseFloat(o.css("padding-right")||0):0)+parseFloat(o.css("border-right")||0)+parseFloat(o.css("border-left")||0));return b=Math.max(b,(null!=s.autoResizing&&void 0!==s.autoResizing.minColWidth?s:n).autoResizing.minColWidth),Math.min(b,(null!=s.autoResizing&&void 0!==s.autoResizing.maxColWidth?s:n).autoResizing.maxColWidth)},autoResizeColumn:function(l,n){return this.each(function(){var e=$(this),t=this.p,r=t.colModel[l],i=$(this.grid.headers[l].el),a=base.getAutoResizableWidth.call(e,l),o=(r.autoResizing||{}).resetWidthOrg;null==r||a<0||a===r.width||(base.setColWidth.call(e,l,a,t.autoResizing.adjustGridWidth&&!t.autoResizing.fixWidthOnShrink&&!n,n),t.autoResizing.fixWidthOnShrink&&t.shrinkToFit&&!n&&(r.fixed=!0,a=r.widthOrg,r.widthOrg=r.width,base.setGridWidth.call(e,t.width,!0),r.widthOrg=a,r.fixed=!1),(o||void 0===o&&t.autoResizing.resetWidthOrg)&&(r.widthOrg=r.width),i.data("autoResized","true"))})},autoResizeAllColumns:function(){return this.each(function(){var e,t,r=$(this),i=this.p,a=i.colModel,o=a.length,l=i.shrinkToFit,n=i.autoResizing.adjustGridWidth,s=i.autoResizing.fixWidthOnShrink,d=parseInt(i.widthOrg,10),c=this.grid,u=base.autoResizeColumn;for(i.shrinkToFit=!1,i.autoResizing.adjustGridWidth=!0,i.autoResizing.fixWidthOnShrink=!1,e=0;e<o;e++)(t=a[e]).autoResizable&&"actions"!==t.formatter&&u.call(r,e,!0);c.hDiv.scrollLeft=c.bDiv.scrollLeft,i.footerrow&&(c.sDiv.scrollLeft=c.bDiv.scrollLeft),this.fixScrollOffsetAndhBoxPadding(),isNaN(d)?n&&base.setGridWidth.call(r,c.newWidth+i.scrollOffset,!1):base.setGridWidth.call(r,d,!1),i.autoResizing.fixWidthOnShrink=s,i.autoResizing.adjustGridWidth=n,i.shrinkToFit=l})}}),function(e,t){var r=this.grid.fbRows;return null!=(e=null!=r&&r[0].cells.length>t?r[e.rowIndex]:e)&&null!=e.cells?$(e.cells[t]):$()}),safeHeightSet=function(e,t){var r=e.height();1<=Math.abs(r-t)&&0<t&&(e.height(t),r=e.height(),1<=Math.abs(t-r))&&e.height(t+Math.round(t-r))},getGuiStyles=(jgrid.extend({editCell:function(b,w,y){return this.each(function(){var e,t,r,i=this,a=$(i),o=i.p,l=i.rows;if(i.grid&&!0===o.cellEdit&&null!=l&&null!=l[b]&&(b=parseInt(b,10),w=parseInt(w,10),!isNaN(b))&&!isNaN(w)){var n=l[b],s=null!=n?n.id:null,d=$(n),c=parseInt(o.iCol,10),u=parseInt(o.iRow,10),l=$(l[u]),p=o.savedRow;if(null!=s){if(o.selrow=s,o.knv||a.jqGrid("GridNav"),0<p.length&&0<l.length){if(!0===y&&b===u&&w===c)return;a.jqGrid("saveCell",p[0].id,p[0].ic)}else setTimeout(function(){$("#"+jgrid.jqID(o.knv)).attr("tabindex","-1").focus()},1);if("subgrid"!==(e=(r=o.colModel[w]).name)&&"cb"!==e&&"rn"!==e){var h=getTdByColumnIndex.call(i,n,w),f=r.editable,g=($.jgrid.isFunction(f)&&(f=f.call(i,{rowid:s,iCol:w,iRow:b,cmName:e,cm:r,mode:"cell"})),a.jqGrid("getGuiStyles","states.select","edit-cell")),m=a.jqGrid("getGuiStyles","states.hover","selected-row");if(!0!==f||!0!==y||h.hasClass("not-editable-cell"))o.noCellSelection||(0<=c&&0<=u&&(getTdByColumnIndex.call(i,l[0],c).removeClass(g),l.removeClass(m)),h.addClass(g),d.addClass(m)),t=h.html().replace(/&#160;/gi,""),feedback.call(i,"onSelectCell",s,e,t,b,w);else{o.noCellSelection||(0<=c&&0<=u&&(getTdByColumnIndex.call(i,l[0],c).removeClass(g),l.removeClass(m)),h.addClass(g),d.addClass(m)),r.edittype||(r.edittype="text"),u=r.edittype;try{t=$.unformat.call(i,h,{rowId:s,colModel:r},w)}catch(e){t="textarea"===u?h.text():h.html()}("&nbsp;"===(t=o.autoEncodeOnEdit?jgrid.oldDecodePostedData(t):t)||"&#160;"===t||1===t.length&&160===t.charCodeAt(0))&&(t=""),$.jgrid.isFunction(o.formatCell)&&void 0!==(c=o.formatCell.call(i,s,e,t,b,w))&&(t=c),feedback.call(i,"beforeEditCell",s,e,t,b,w),p.push({id:b,ic:w,name:e,v:t}),o.editingInfo[s]={mode:"cellEditing",savedRow:p[p.length-1],editable:{}},o.editingInfo[s].editable[e]=f;var l=$.extend({},r.editoptions||{},{id:b+"_"+e,name:e,rowId:s,mode:"cell",cm:r,iCol:w}),v=jgrid.createEl.call(i,u,l,t,!0,$.extend({},jgrid.ajaxOptions,o.ajaxSelectOptions||{})),g=h,d=!0===o.treeGrid&&e===o.ExpandColumn;(g=d?h.children("span.cell-wrapperleaf,span.cell-wrapper"):g).html("").append(v).attr("tabindex","0"),d&&$(v).width(h.width()-h.children("div.tree-wrap").outerWidth()),jgrid.bindEv.call(i,v,l),o.frozenColumns&&w<a.jqGrid("getNumberOfFrozenColumns")&&safeHeightSet($(i.rows[n.rowIndex].cells[w]),h.height()),setTimeout(function(){$(v).focus()},0),$("input, select, textarea",h).on("keydown",function(e){if(27===e.keyCode&&(!(0<$("input.hasDatepicker",h).length)||$(".ui-datepicker").is(":hidden")?a.jqGrid("restoreCell",b,w):$("input.hasDatepicker",h).datepicker("hide")),13===e.keyCode&&!e.shiftKey)return a.jqGrid("saveCell",b,w),!1;if(9===e.keyCode){if(i.grid.hDiv.loading)return!1;e.shiftKey?a.jqGrid("prevCell",b,w):a.jqGrid("nextCell",b,w)}e.stopPropagation()}),feedback.call(i,"afterEditCell",s,e,t,b,w)}o.iCol=w,o.iRow=b}}}})},saveCell:function(D,S){return this.each(function(){var i=this,a=$(i),o=i.p,r=i.grid,l=jgrid.info_dialog,e=jgrid.jqID;if(r&&!0===o.cellEdit){var t=a.jqGrid("getGridRes","errors"),n=t.errcap,s=a.jqGrid("getGridRes","edit").bClose,d=o.savedRow,c=1<=d.length?0:null;if(null!==c){var u=i.rows[D],p=null!=u?u.id:null,h=null!=u?$(u):$(),f=o.colModel[S],g=f.name,m=getTdByColumnIndex.call(i,u,S),v={},b=jgrid.getEditedValue.call(i,m,f,v);if(b!==d[c].v){void 0!==(y=a.triggerHandler("jqGridBeforeSaveCell",[p,g,b,D,S]))&&(b=y),$.jgrid.isFunction(o.beforeSaveCell)&&void 0!==(y=o.beforeSaveCell.call(i,p,g,b,D,S))&&(b=y);var w=jgrid.checkValues.call(i,b,S,void 0,void 0,{oldValue:d[c].v,newValue:b,cmName:g,rowid:p,iCol:S,iRow:D,cm:f,tr:u,td:m,mode:"cell"}),y=f.formatoptions||{};if(null==w||!0===w||!0===w[0]){c=a.triggerHandler("jqGridBeforeSubmitCell",[p,g,b,D,S])||{};if($.jgrid.isFunction(o.beforeSubmitCell)&&(c=(c=o.beforeSubmitCell.call(i,p,g,b,D,S))||{}),0<$("input.hasDatepicker",m).length&&$("input.hasDatepicker",m).datepicker("hide"),"date"===f.formatter&&!0!==y.sendFormatted&&(b=$.unformat.date.call(i,b,f)),"remote"===o.cellsubmit)if(o.cellurl){var j={},y=(j[g]=b,o.prmNames),x=y.id,C=y.oper;j[x]=jgrid.stripPref(o.idPrefix,p),j[C]=y.editoper,j=$.extend(c,j),o.autoEncodeOnEdit&&$.each(j,function(e,t){$.jgrid.isFunction(t)||(j[e]=jgrid.oldEncodePostedData(t))}),a.jqGrid("progressBar",{method:"show",loadtype:o.loadui,htmlcontent:a.jqGrid("getGridRes","defaults.savetext")||"Saving..."}),r.hDiv.loading=!0,$.ajax($.extend({url:$.jgrid.isFunction(o.cellurl)?o.cellurl.call(i,o.cellurl,D,S,p,b,g):o.cellurl,data:jgrid.serializeFeedback.call(i,o.serializeCellData,"jqGridSerializeCellData",j),type:"POST",complete:function(e){var t;r.endReq.call(i),!(e.status<300||304===e.status)||0===e.status&&4===e.readyState||(null==(t=!0===(t=a.triggerHandler("jqGridAfterSubmitCell",[i,e,j.id,g,b,D,S])||[!0,""])||!0===t[0]&&$.jgrid.isFunction(o.afterSubmitCell)?o.afterSubmitCell.call(i,e,j.id,g,b,D,S):t)||!0===t||!0===t[0]?(a.jqGrid("setCell",p,S,b,!1,!1,!0),m.addClass("dirty-cell"),h.addClass("edited"),feedback.call(i,"afterSaveCell",p,g,b,D,S),d.splice(0,1),delete o.editingInfo[p]):(l.call(i,n,t[1],s),a.jqGrid("restoreCell",D,S)))},error:function(e,t,r){a.triggerHandler("jqGridErrorCell",[e,t,r]),$.jgrid.isFunction(o.errorCell)?o.errorCell.call(i,e,t,r):l.call(i,n,e.status+" : "+e.statusText+"<br/>"+t,s),a.jqGrid("restoreCell",D,S)}},jgrid.ajaxOptions,o.ajaxCellOptions||{}))}else try{l.call(i,n,t.nourl,s),a.jqGrid("restoreCell",D,S)}catch(e){}if("clientArray"===o.cellsubmit){if(a.jqGrid("setCell",p,S,"select"===f.edittype&&"select"!==f.formatter?v.text:b,!1,!1,!0),m.addClass("dirty-cell"),h.addClass("edited"),feedback.call(i,"afterSaveCell",p,g,b,D,S),o.frozenColumns&&S<a.jqGrid("getNumberOfFrozenColumns"))try{i.rows[u.rowIndex].cells[S].style.height=""}catch(e){}d.splice(0,1),delete o.editingInfo[p]}}else try{setTimeout(function(){var e=jgrid.getRelativeRect.call(i,m);l.call(i,n,b+" "+w[1],s,{top:e.top,left:e.left+$(i).closest(".ui-jqgrid").offset().left})},50),a.jqGrid("restoreCell",D,S)}catch(e){}}else a.jqGrid("restoreCell",D,S)}setTimeout(function(){$("#"+e(o.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(s,d){return this.each(function(){var e,t,r=this,i=r.p,a=r.rows[s],o=a.id;if(r.grid&&!0===i.cellEdit){var l=i.savedRow,n=getTdByColumnIndex.call(r,a,d);if(1<=l.length){if($.jgrid.isFunction($.fn.datepicker))try{$("input.hasDatepicker",n).datepicker("hide")}catch(e){}if(e=i.colModel[d],(!0===i.treeGrid&&null!=e&&e.name===i.ExpandColumn?n.children("span.cell-wrapperleaf,span.cell-wrapper"):n).empty(),n.attr("tabindex","-1"),n=l[0].v,null!=e&&(t=e.formatoptions||{},"date"===e.formatter&&!0!==t.sendFormatted&&(n=$.unformat.date.call(r,n,e)),$(r).jqGrid("setCell",o,d,n,!1,!1,!0),i.frozenColumns)&&d<$(r).jqGrid("getNumberOfFrozenColumns"))try{r.rows[a.rowIndex].cells[d].style.height=""}catch(e){}feedback.call(r,"afterRestoreCell",o,n,s,d),l.splice(0,1),delete i.editingInfo[o]}setTimeout(function(){$("#"+i.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(s,d){return this.each(function(){var e,t,r,i=this,a=$(i),o=i.p,l=!1,n=i.rows;if(i.grid&&!0===o.cellEdit&&null!=n&&null!=n[s]){for(e=d+1;e<o.colModel.length;e++)if(t=(r=o.colModel[e]).editable,!0===(t=$.jgrid.isFunction(t)?t.call(i,{rowid:n[s].id,iCol:e,iRow:s,cmName:r.name,cm:r,mode:"cell"}):t)){l=e;break}!1!==l?a.jqGrid("editCell",s,l,!0):0<o.savedRow.length&&a.jqGrid("saveCell",s,d)}})},prevCell:function(s,d){return this.each(function(){var e,t,r,i=this,a=$(i),o=i.p,l=!1,n=i.rows;if(i.grid&&!0===o.cellEdit&&null!=n&&null!=n[s]){for(e=d-1;0<=e;e--)if(t=(r=o.colModel[e]).editable,!0===(t=$.jgrid.isFunction(t)?t.call(i,{rowid:n[s].id,iCol:e,iRow:s,cmName:r.name,cm:r,mode:"cell"}):t)){l=e;break}!1!==l?a.jqGrid("editCell",s,l,!0):0<o.savedRow.length&&a.jqGrid("saveCell",s,d)}})},GridNav:function(){return this.each(function(){var i,a,n,e,s=this,o=$(s),l=s.p,t=s.grid;function d(e,t,r){var i,a,o,l,e=s.rows[e];"v"===r.substr(0,1)&&(i=n.clientHeight,l=n.scrollTop,a=e.offsetTop+e.clientHeight,o=e.offsetTop,"vd"===r&&l+i<=a&&(n.scrollTop=n.scrollTop+e.clientHeight),"vu"===r)&&o<l&&(n.scrollTop=n.scrollTop-e.clientHeight),"h"===r&&(i=n.clientWidth,a=n.scrollLeft,l=(o=e.cells[t]).offsetLeft+o.clientWidth,r=o.offsetLeft,l>=i+parseInt(a,10)?n.scrollLeft=n.scrollLeft+o.clientWidth:r<a&&(n.scrollLeft=n.scrollLeft-o.clientWidth))}function c(e,t){var r,i=0,a=l.colModel;if("lft"===t)for(i=e+1,r=e;0<=r;r--)if(!0!==a[r].hidden){i=r;break}if("rgt"===t)for(i=e-1,r=e;r<a.length;r++)if(!0!==a[r].hidden){i=r;break}return i}t&&!0===l.cellEdit&&(n=t.bDiv,l.knv=l.id+"_kn",e=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+l.knv+"'></div></div>"),$(e).insertBefore(t.cDiv),$("#"+l.knv).focus().keydown(function(e){var t=parseInt(l.iRow,10),r=parseInt(l.iCol,10);switch(a=e.keyCode,"rtl"===l.direction&&(37===a?a=39:39===a&&(a=37)),a){case 38:0<t-1&&(d(t-1,r,"vu"),o.jqGrid("editCell",t-1,r,!1));break;case 40:t+1<=s.rows.length-1&&(d(t+1,r,"vd"),o.jqGrid("editCell",t+1,r,!1));break;case 37:0<=r-1&&(d(t,i=c(r-1,"lft"),"h"),o.jqGrid("editCell",t,i,!1));break;case 39:r+1<=l.colModel.length-1&&(d(t,i=c(r+1,"rgt"),"h"),o.jqGrid("editCell",t,i,!1));break;case 13:0<=r&&0<=t&&o.jqGrid("editCell",t,r,!0);break;default:return!0}return!1}))})},getChangedCells:function(u){var e=[];return u=u||"all",this.each(function(){var n=this,s=n.p,d=jgrid.htmlDecode,c=n.rows;n.grid&&!0===s.cellEdit&&$(c).each(function(a){var o,l={};$(this).hasClass("edited")&&($((o=this).cells).each(function(e){var t=s.colModel[e],r=t.name,i=getTdByColumnIndex.call(n,o,e);if("cb"!==r&&"subgrid"!==r&&"rn"!==r&&("dirty"!==u||i.hasClass("dirty-cell")))try{l[r]=$.unformat.call(n,i[0],{rowId:c[a].id,colModel:t},e)}catch(e){l[r]=d(i.html())}}),l.id=this.id,e.push(l))})}),e}}),base.getGuiStyles),getGridRes=base.getGridRes,xmlJsonClass=(jgrid.jqModal=jgrid.jqModal||{},$.extend(!0,jgrid.jqModal,{toTop:!0}),$.extend(jgrid,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(e,t){var r=!(!(t=$.extend({jqm:!0,gb:"",removemodal:!1},t||{})).gb||"string"!=typeof t.gb||"#gbox_"!==t.gb.substr(0,6))&&$("#"+t.gb.substr(6))[0],i=$(e);if(t.onClose){r=r?t.onClose.call(r,e):t.onClose(e);if("boolean"==typeof r&&!r)return}if($.fn.jqm&&!0===t.jqm)i.attr("aria-hidden","true").jqmHide();else{if(""!==t.gb)try{$(">.jqgrid-overlay",t.gb).first().hide()}catch(e){}i.hide().attr("aria-hidden","true")}t.removemodal&&i.remove()},createModal:function(e,t,r,i,a,o,l){var n=jgrid.jqID,s=this.p,s=(r=$.extend(!0,{resizingRightBottomIcon:base.getIconRes.call(this,"form.resizableLtr")},jgrid.jqModal||{},null!=s&&s.jqModal||{},r),document.createElement("div")),d="#"+n(e.themodal),c="rtl"===$(r.gbox).attr("dir"),u=!!e.resizeAlso&&"#"+n(e.resizeAlso),p=(l=$.extend({},l||{}),s.className=getGuiStyles.call(this,"dialog.window","ui-jqdialog"),s.id=e.themodal,s.dir=c?"rtl":"ltr",document.createElement("div")),h=(p.className=getGuiStyles.call(this,"dialog.document"),$(p).attr("role","document"),document.createElement("div")),p=(h.className=getGuiStyles.call(this,"dialog.subdocument"),p.appendChild(h),s.appendChild(p),document.createElement("div")),f=(p.className=getGuiStyles.call(this,"dialog.header","ui-jqdialog-titlebar "+(c?"ui-jqdialog-titlebar-rtl":"ui-jqdialog-titlebar-ltr")),p.id=e.modalhead,$(p).append("<span class='ui-jqdialog-title'>"+r.caption+"</span>"),getGuiStyles.call(this,"states.hover")),g=$("<a aria-label='Close' class='"+getGuiStyles.call(this,"dialog.closeButton","ui-jqdialog-titlebar-close")+"'></a>").hover(function(){g.addClass(f)},function(){g.removeClass(f)}).append("<span class='"+base.getIconRes.call(this,"form.close")+"'></span>"),c=($(p).append(g),document.createElement("div")),t=($(c).addClass(getGuiStyles.call(this,"dialog.content","ui-jqdialog-content")).attr("id",e.modalcontent),$(c).append(t),h.appendChild(c),$(h).prepend(p),!0===o?$("body").append(s):"string"==typeof o?$(o).append(s):$(s).insertBefore(i),$(s).css(l),void 0===r.jqModal&&(r.jqModal=!0),{});if($.fn.jqm&&!0===r.jqModal?(0===r.left&&0===r.top&&r.overlay&&((r=$(a).offset()).left+=4,r.top+=4),t.top=r.top+"px",t.left=r.left):0===r.left&&0===r.top||(t.left=r.left,t.top=r.top+"px"),$("a.ui-jqdialog-titlebar-close",p).click(function(){var e=$(d).data("onClose")||r.onClose,t=$(d).data("gbox")||r.gbox;return jgrid.hideModal(d,{gb:t,jqm:r.jqModal,onClose:e,removemodal:r.removemodal||!1}),!1}),0!==r.width&&r.width||(r.width=300),0!==r.height&&r.height||(r.height=200),r.zIndex||((h=$(i).parents("*[role=dialog]").first().css("z-index"))?(r.zIndex=parseInt(h,10)+2,r.toTop=!0):r.zIndex=950),t.left&&(t.left+="px"),$(s).css($.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex},t)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":e.modalhead,"aria-hidden":"true"}),void 0===r.drag&&(r.drag=!0),void 0===r.resize&&(r.resize=!0),r.drag)if($.fn.jqDrag)$(p).css("cursor","move"),$(s).jqDrag(p);else try{$(s).draggable({handle:$("#"+n(p.id))})}catch(e){}if(r.resize)if($.fn.jqResize)$(c).append("<div class='jqResize ui-resizable-handle ui-resizable-se "+r.resizingRightBottomIcon+"'></div>"),$(d).jqResize(".jqResize",u);else try{$(s).resizable({handles:"se, sw",alsoResize:u})}catch(e){}!0===r.closeOnEscape&&$(s).keydown(function(e){27===e.which&&(e=$(d).data("onClose")||r.onClose,jgrid.hideModal(d,{gb:r.gbox,jqm:r.jqModal,onClose:e,removemodal:r.removemodal||!1,formprop:!r.recreateForm||!1,form:r.form||""}))})},viewModal:function(e,t){if(t=$.extend(!0,{overlay:30,modal:!1,overlayClass:getGuiStyles.call(this,"overlay"),onShow:jgrid.showModal,onHide:jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},jgrid.jqModal||{},t||{}),$.fn.jqm&&!0===t.jqm)(t.jqM?$(e).attr("aria-hidden","false").jqm(t):$(e).attr("aria-hidden","false")).jqmShow();else{""!==t.gbox&&($(">.jqgrid-overlay",t.gbox).first().show(),$(e).data("gbox",t.gbox)),$(e).show().attr("aria-hidden","false");try{$(":input:visible",e)[0].focus()}catch(e){}}},info_dialog:function(e,t,r,i){var a,o=this,l=o.p,n=$.extend(!0,{width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},jgrid.jqModal||{},null!=l&&l.jqModal||{},{caption:"<b>"+e+"</b>"},i||{}),s=n.jqModal,d=($.fn.jqm&&!s&&(s=!1),""),c=getGuiStyles.call(o,"states.hover");if(0<n.buttons.length)for(a=0;a<n.buttons.length;a++)void 0===n.buttons[a].id&&(n.buttons[a].id="info_button_"+a),d+=jgrid.builderFmButon.call(o,n.buttons[a].id,n.buttons[a].text);var l=isNaN(n.dataheight)?n.dataheight:n.dataheight+"px",e="text-align:"+n.align+";",u=$("#info_dialog"),i="<div id='info_id'>";i+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+l+";"+e+"'>"+t+"</div>",!r&&""===d||(i+="<hr class='"+getGuiStyles.call(o,"dialog.hr")+"' style='margin:1px'/><div style='text-align:"+n.buttonalign+";padding:.8em 0 .5em 0;background-image:none;border-width: 1px 0 0 0;'>"+(r?jgrid.builderFmButon.call(o,"closedialog",r):"")+d+"</div>"),i+="</div>";try{"false"===u.attr("aria-hidden")&&jgrid.hideModal("#info_dialog",{jqm:s}),u.remove()}catch(e){}jgrid.createModal.call(o,{themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",resizeAlso:"infocnt"},i,n,"","",!0),u=$("#info_dialog"),d&&$.each(n.buttons,function(){$("#"+jgrid.jqID(this.id),"#info_id").on("click",{click:this.onClick},function(e){return $.jgrid.isFunction(e.data.click)&&e.data.click.call(o,e,u),!1})}),$("#closedialog","#info_id").click(function(){return jgrid.hideModal("#info_dialog",{jqm:s,onClose:u.data("onClose")||n.onClose,gb:u.data("gbox")||n.gbox}),!1}),$(".fm-button","#info_dialog").hover(function(){$(this).addClass(c)},function(){$(this).removeClass(c)}),$.jgrid.isFunction(n.beforeOpen)&&n.beforeOpen(),jgrid.viewModal.call(o,"#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:n.modal,jqm:s}),$.jgrid.isFunction(n.afterOpen)&&n.afterOpen();try{u.focus()}catch(e){}},bindEv:function(t,r){var i=this.p;$.jgrid.isFunction(r.dataInit)&&r.dataInit.call(this,t,r),r.dataEvents&&$.each(r.dataEvents,function(){var e=void 0===this.data?$.extend({gridId:i.id,gridIdSel:i.idSel},r):"object"==typeof this.data&&null!==this.data?$.extend(!0,{gridId:i.id,gridIdSel:i.idSel},r,this.data):this.data;$(t).on(this.type,e,this.fn)})},createEl:function(e,t,r,i,a){function o(e){return getGridRes.call($(c),e)}var l="",c=this,n=c.p,s=jgrid.info_dialog,d=o("errors.errcap"),u=o("edit"),p=u.msg,h=u.bClose;function f(r,e,t){var i=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","generateValue","postData","selectFilled","rowId","column","mode","cm","iCol"];void 0!==t&&Array.isArray(t)&&$.merge(i,t),$.each(e,function(e,t){-1===$.inArray(e,i)&&$(r).attr(e,t)}),e.hasOwnProperty("id")||$(r).attr("id",jgrid.randId())}if(null==t)return"";switch(e){case"textarea":l=document.createElement("textarea"),i?t.cols||$(l).css({width:"100%","box-sizing":"border-box"}):t.cols||(t.cols=19),t.rows||(t.rows=2),("&nbsp;"===r||"&#160;"===r||1===r.length&&160===r.charCodeAt(0))&&(r=""),l.value=r,f(l,t),$(l).attr({role:"textbox"});break;case"checkbox":(l=document.createElement("input")).type="checkbox",""!==r&&null!=r||(r=t.hasOwnProperty("defaultValue")?$.jgrid.isFunction(t.defaultValue)?t.defaultValue.call(c,{cellValue:r,options:t}):t.defaultValue:"false"),t.value?(r===(m=t.value.split(":"))[0]&&(l.checked=!0,l.defaultChecked=!0),l.value=r,$(l).data("offval",m[1])):((m=String(r).toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==m?(l.checked=!0,l.defaultChecked=!0,l.value=r):l.value="on",$(l).data("offval","off")),f(l,t,["value"]),$(l).attr({role:"checkbox","aria-checked":l.checked?"true":"false"});break;case"select":l=document.createElement("select");var g,m=[],v=null;!0===t.multiple||"multiple"===t.multiple?(g=!0,l.multiple="multiple",$(l).attr("aria-multiselectable","true"),m=r.split(","),m=$.map(m,function(e){return $.jgrid.trim(e)})):(g=!1,m[0]=$.jgrid.trim(r)),void 0===t.size&&(t.size=g?3:1);try{v=t.rowId}catch(e){}n&&n.idPrefix&&(v=jgrid.stripPref(n.idPrefix,v)),void 0===t.dataUrl&&t.generateValue&&null!=n.indexByColumnData[t.cm.name]&&(t.value=c.generateValueFromColumnIndex(t.cm.name,t.separator,t.delimiter)),void 0!==t.dataUrl?(b=t.postData||a.postData,m={elem:l,options:t,cm:t.cm,mode:t.mode,rowid:v,iCol:t.iCol,ovm:m},f(l,t,b?["postData"]:void 0),$.ajax($.extend({url:$.jgrid.isFunction(t.dataUrl)?t.dataUrl.call(c,v,r,String(t.name),m):t.dataUrl,type:"GET",dataType:"html",data:$.jgrid.isFunction(b)?b.call(c,v,r,String(t.name)):b,context:m,success:function(e,t,r){var i=this.ovm,a=this.elem,o=this.cm,l=this.iCol,n=$.extend({},this.options),s=this.rowid,d=this.mode,r=$.jgrid.isFunction(n.buildSelect)?n.buildSelect.call(c,e,r,o,l):e;(r="string"==typeof r?$($.jgrid.trim(r)).html():r)&&($(a).append(r),setTimeout(function(){var t;$("option",a).each(function(e){0===e&&a.multiple&&(this.selected=!1),-1<$.inArray($.jgrid.trim($(this).val()),i)&&(this.selected=!0,t=!0)}),t||$("option",a).each(function(){-1<$.inArray($.jgrid.trim($(this).text()),i)&&(this.selected=!0)}),jgrid.fullBoolFeedback.call(c,n.selectFilled,"jqGridSelectFilled",{elem:a,options:n,cm:o,rowid:s,mode:d,cmName:(null!=o?o:n).name,iCol:l})},0))}},a||{}))):t.value&&(jgrid.fillSelectOptions(l,t.value,void 0===t.separator?":":t.separator,void 0===t.delimiter?";":t.delimiter,g,r),f(l,t,["value"]),jgrid.fullBoolFeedback.call(c,t.selectFilled,"jqGridSelectFilled",{elem:l,options:t,cm:t.cm,rowid:v,mode:t.mode,cmName:(null!=t.cm?t.cm:t).name,iCol:t.iCol}));break;case"text":case"password":case"button":var b="button"===e?"button":"textbox";(l=document.createElement("input")).type=e,f(l,t),l.value=r,"button"!==e&&(i?t.size||$(l).css({width:"100%","box-sizing":"border-box"}):t.size||(t.size=20)),$(l).attr("role",b);break;case"image":case"file":(l=document.createElement("input")).type=e,f(l,t);break;case"custom":l=document.createElement("span");try{if(!$.jgrid.isFunction(t.custom_element))throw"editoptions.custom_element is not a function";var w=t.custom_element.call(c,r,t);if(!(w instanceof jQuery||jgrid.isHTMLElement(w)||"string"==typeof w))throw"editoptions.custom_element returns value of a wrong type";w=$(w).addClass("customelement").attr({id:t.id,name:t.name}),$(l).empty().append(w)}catch(e){"e1"===e&&s.call(c,d,"function 'custom_element' "+p.nodefined,h),"e2"===e?s.call(c,d,"function 'custom_element' "+p.novalue,h):s.call(c,d,"string"==typeof e?e:e.message,h)}}return l},checkDate:function(e,t){var r={},i=-1!==(e=e.toLowerCase()).indexOf("/")?"/":-1!==e.indexOf("-")?"-":-1!==e.indexOf(".")?".":"/";if(e=e.split(i),3!==(t=t.split(i)).length)return!1;for(var a,o=-1,l=-1,n=-1,s=0;s<e.length;s++)a=isNaN(t[s])?0:parseInt(t[s],10),r[e[s]]=a,-1!==(d=e[s]).indexOf("y")&&(o=s),-1!==d.indexOf("m")&&(n=s),-1!==d.indexOf("d")&&(l=s);var d="y"===e[o]||"yyyy"===e[o]?4:"yy"===e[o]?2:-1;return-1!==o&&(i=r[e[o]].toString(),2===d&&1===i.length&&(d=1),i.length===d)&&(0!==r[e[o]]||"00"===t[o])&&-1!==n&&!(r[e[n]].toString().length<1||r[e[n]]<1||12<r[e[n]]||-1===l||r[e[l]].toString().length<1||r[e[l]]<1||31<r[e[l]]||2===r[e[n]]&&r[e[l]]>((i=r[e[o]])%4!=0||i%100==0&&i%400!=0?28:29)||r[e[l]]>[0,31,29,31,30,31,30,31,31,30,31,30,31][r[e[n]]])},isEmpty:function(e){return!(!e.match(/^\s+$/)&&""!==e)},checkTime:function(e){if(!jgrid.isEmpty(e)){if(!(e=e.match(/^(\d{1,2}):(\d{2})([apAP][Mm])?$/)))return!1;if(e[3]){if(e[1]<1||12<e[1])return!1}else if(23<e[1])return!1;if(59<e[2])return!1}return!0},checkValues:function(e,t,r,i,a){function o(e){return e=l[e],$.jgrid.isFunction(e)?e.call(u,a):e}var l,n,s,d,c,u=this,p=u.p,h=p.colModel,f=jgrid.isEmpty,g=getGridRes.call($(u),"edit.msg"),m=getGridRes.call($(u),"formatter.date.masks");if(void 0===r){if(void 0===(t="string"==typeof t?p.iColByName[t]:t)||t<0)return[!0,"",""];d=h[t],l=d.editrules,null!=d.formoptions&&(n=d.formoptions.label)}else l=r,n=void 0===i?"_":i,d=h[t];if(l){if(n=n||(null!=p.colNames?p.colNames[t]:d.label),!0===o("required")&&f(e))return[!1,n+": "+g.required,""];r=!1!==o("required");if(!0===o("number")&&(!1!=r||!f(e))&&isNaN(e))return[!1,n+": "+g.number,""];if(void 0!==l.minValue&&!isNaN(l.minValue)&&parseFloat(e)<parseFloat(l.minValue))return[!1,n+": "+g.minValue+" "+l.minValue,""];if(void 0!==l.maxValue&&!isNaN(l.maxValue)&&parseFloat(e)>parseFloat(l.maxValue))return[!1,n+": "+g.maxValue+" "+l.maxValue,""];if(!0===o("email")&&!(!1==r&&f(e)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(e)))return[!1,n+": "+g.email,""];if(!0===o("integer")&&(!1!=r||!f(e))){if(isNaN(e))return[!1,n+": "+g.integer,""];if(e%1!=0||-1!==e.indexOf("."))return[!1,n+": "+g.integer,""]}if(!0===o("date")&&!(!1==r&&f(e)||(d.formatoptions&&d.formatoptions.newformat?(s=d.formatoptions.newformat,m.hasOwnProperty(s)&&(s=m[s])):s=h[t].datefmt||"Y-m-d",jgrid.checkDate(s,e))))return[!1,n+": "+g.date+" - "+s,""];if(!0===o("time")&&!(!1==r&&f(e)||jgrid.checkTime(e)))return[!1,n+": "+g.date+" - hh:mm (am/pm)",""];if(!0===o("url")&&!(!1==r&&f(e)||/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i.test(e)))return[!1,n+": "+g.url,""];if(!0===l.custom){if(!1!=r||!f(e))return $.jgrid.isFunction(l.custom_func)?(c=l.custom_func.call(u,e,n,t),Array.isArray(c)?c:[!1,g.customarray,""]):[!1,g.customfcheck,""]}else if($.jgrid.isFunction(l.custom)&&(!1!=r||!f(e)))return c=l.custom.call(u,a),Array.isArray(c)?c:[!1,g.customarray,""]}return[!0,"",""]}}),jgrid.extend({getColProp:function(e){var t=this[0];return null!=t&&t.grid&&void 0!==(e=t.p.iColByName[e])?t.p.colModel[e]:{}},setColProp:function(r,i){return this.each(function(){var e,t=this.p;this.grid&&null!=t&&i&&void 0!==(e=t.iColByName[r])&&$.extend(!0,t.colModel[e],i)})},sortGrid:function(s,d,c){return this.each(function(){var e,t,r,i=this.grid,a=this.p,o=a.colModel,l=o.length,n=!1;if(i)for(s=s||a.sortname,"boolean"!=typeof d&&(d=!1),t=0;t<l;t++)if((e=o[t]).index===s||e.name===s){(n=!0===a.frozenColumns&&!0===e.frozen?i.fhDiv.find("#"+jqID(a.id+"_"+s)):n)&&0!==n.length||(n=i.headers[t].el),"boolean"==typeof(r=e.sortable)&&!r||this.sortData(e.index||e.name,t,d,c,n);break}})},clearBeforeUnload:function(){return this.each(function(){var e,t=this,r=t.p,i=t.grid,a=jgrid.clearArray,o=Object.prototype.hasOwnProperty;$.jgrid.isFunction(i.emptyRows)&&i.emptyRows.call(t,!0,!0),$(document).off("mousemove.jqGrid mouseup.jqGrid"+r.id),$(t).off();for(var l=i.headers.length,n=0;n<l;n++)i.headers[n].el=null;for(e in i)i.hasOwnProperty(e)&&(i.propOrMethod=null);var s=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","clearToolbar","fixScrollOffsetAndhBoxPadding","rebuildRowIndexes","modalAlert","toggleToolbar","triggerToolbar","formatter","addXmlData","addJSONData","ftoolbar","_inlinenav","nav","grid","p"],l=s.length;for(n=0;n<l;n++)o.call(t,s[n])&&(t[s[n]]=null);t._index={},a(r.data),a(r.lastSelectedData),a(r.selarrrow),a(r.savedRow),r.editingInfo={}})},GridDestroy:function(){return this.each(function(){var e=this.p;if(this.grid&&null!=e){e.pager&&$(e.pager).remove();try{$("#alertmod_"+jqID(e.id)).remove(),$(this).jqGrid("clearBeforeUnload"),$(e.gBox).remove()}catch(e){}}})},GridUnload:function(){return this.each(function(){var e=$(this),t=this.p,r=$.fn.jqGrid;this.grid&&(e.removeClass(r.getGuiStyles.call(e,"grid","ui-jqgrid-btable")),t.pager&&(t.pager.substr(1,$.jgrid.uidPref.length)===$.jgrid.uidPref?$(t.pager).remove():$(t.pager).empty().removeClass(r.getGuiStyles.call(e,"pager.pager","ui-jqgrid-pager "+r.getGuiStyles.call(e,"bottom"))).removeAttr("style").removeAttr("dir")),e.jqGrid("clearBeforeUnload"),e.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style"),e.empty(),e.insertBefore(t.gBox).show(),$(t.pager).insertBefore(t.gBox).show(),$(t.gBox).remove())})},setGridState:function(n){return this.each(function(){var e,t=this,r=t.p,i=t.grid,a=i.cDiv,o=$(i.uDiv),l=$(i.ubDiv);i&&null!=r&&(e=(i=function(e){return base.getIconRes.call(t,"gridMinimize."+e)})("visible"),i=i("hidden"),"hidden"===n?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",r.gView).slideUp("fast"),r.pager&&$(r.pager).slideUp("fast"),r.toppager&&$(r.toppager).slideUp("fast"),!0===r.toolbar[0]&&("both"===r.toolbar[1]&&l.slideUp("fast"),o.slideUp("fast")),r.footerrow&&$(".ui-jqgrid-sdiv",r.gBox).slideUp("fast"),$(".ui-jqgrid-titlebar-close span",a).removeClass(e).addClass(i),r.gridstate="hidden"):"visible"===n&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",r.gView).slideDown("fast"),r.pager&&$(r.pager).slideDown("fast"),r.toppager&&$(r.toppager).slideDown("fast"),!0===r.toolbar[0]&&("both"===r.toolbar[1]&&l.slideDown("fast"),o.slideDown("fast")),r.footerrow&&$(".ui-jqgrid-sdiv",r.gBox).slideDown("fast"),$(".ui-jqgrid-titlebar-close span",a).removeClass(i).addClass(e),r.gridstate="visible"))})},filterToolbar:function(e){return this.each(function(){var C,g,D,S,q,F,R,m,_,I,O,f,v,n,G,k,N,E,A,T,M,B=this,b=B.grid,P=$(B),z=B.p,L=jgrid.info_dialog,V=jgrid.htmlEncode;this.ftoolbar||(C=$.extend(!0,{autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:z.prmNames.filters,stringResult:!1,groupOp:"AND",defaultSearch:"bw",idMode:"new",searchOperators:!1,resetIcon:"&times;",applyLabelClasses:!0,loadFilterDefaults:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},jgrid.search,z.searching||{},e||{}),g=z.colModel,S=(D=function(e){return getGridRes.call(P,e)})("errors.errcap"),q=D("edit.bClose"),F=D("edit.msg"),R=getGuiStyles.call(B,"states.hover"),m=getGuiStyles.call(B,"states.select"),_=getGuiStyles.call(B,"filterToolbar.dataField"),I={},O=function(e){var t="gs_";switch(C.idMode){case"compatibility":t+=z.idPrefix;break;case"new":t+=z.id+"_"}return t+e},f=function(e){return"#"+jqID(O(e))},v=function(e){e=(e.value||"").split(":");return{on:e[0]||"on",off:e[1]||"off"}},n=function(e){var t,r,i,a,o,l,n=z.postData[C.sFilter],s={},d=z.iColByName;if(e)for(r=0;r<g.length;r++)!1!==(o=g[r]).search&&(l=o.searchoptions||{},s[o.name]={op:l.sopt?l.sopt[0]:"select"===o.stype||"checkbox"===o.stype?"eq":C.defaultSearch,data:void 0!==l.defaultValue?l.defaultValue:""});if(n&&z.search){if("string"==typeof n)try{n=$.parseJSON(n)}catch(e){n={}}else n=n||{};if(i=n.rules||{},!(null==n||null!=n.groupOp&&null!=C.groupOp&&n.groupOp.toUpperCase()!==C.groupOp.toUpperCase()||null==i||0===i.length||null!=n.groups&&0<n.groups.length))for(r=0;r<i.length;r++)for(a=i[r],o=g[d[a.field]],t=0;t<g.length;t++)if(((o=g[t]).index||o.name)===a.field&&!1!==o.search){if((l=o.searchoptions||{}).sopt){if($.inArray(a.op,l.sopt)<0)continue}else if("select"===o.stype||"checkbox"===o.stype){if("eq"!==a.op)continue}else if(a.op!==C.defaultSearch)continue;s[o.name]={op:a.op,data:a.data}}}return s},G=function(e,t){switch(t){case 1:e.data("state",1).prop({checked:!0,indeterminate:!1});break;case 0:e.data("state",0).prop({checked:!1,indeterminate:!1});break;default:e.data("state",-1).prop({checked:!1,indeterminate:!0})}},k=function(){var r,i,e,u={},p=0,h={},t=($.each(g,function(){function e(e){var t=l("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return e.replace(new RegExp(t,"g"),"")}var t,i=this,r=i.index||i.name,a=i.searchoptions||{},o=$(f(i.name),!0===i.frozen&&!0===z.frozenColumns?b.fhDiv:b.hDiv),l=function(e,t){var r=i.formatoptions||{};return void 0!==r[e]?r[e]:D("formatter."+(t||i.formatter)+"."+e)},n=C.searchOperators?o.parent().prev().children("a").data("soper")||C.defaultSearch:a.sopt?a.sopt[0]:"select"===i.stype||"checkbox"===i.stype?"eq":C.defaultSearch;if("custom"===i.stype&&$.jgrid.isFunction(a.custom_value)&&0<o.length&&"SPAN"===o[0].nodeName.toUpperCase())t=a.custom_value.call(B,o.children(".customelement").first(),"get");else if("select"===i.stype)t=o.prop("multiple")?null==(t=o.val())||0===t.length?"":t.join(z.inFilterSeparator||","):o.val();else if("checkbox"===i.stype){var s=v(a);switch(o.data("state")){case-1:t="";break;case 0:t=s.off;break;default:t=s.on}}else switch(t=$.jgrid.trim(o.val()),i.formatter){case"integer":""!==(t=e(t).replace(l("decimalSeparator","number"),"."))&&(t=String(parseInt(t,10)));break;case"number":""!==(t=e(t).replace(l("decimalSeparator"),"."))&&"0"===String(t).charAt(0)&&(t=String(parseFloat(t)));break;case"currency":var d=l("prefix"),c=l("suffix");d&&d.length&&t.substr(0,d.length)===d&&(t=t.substr(d.length)),""!==(t=e(t=c&&c.length&&t.length>c.length&&t.substr(t.length-c.length,c.length)===c?t.substr(0,t.length-c.length):t).replace(l("decimalSeparator"),"."))&&(t=String(parseFloat(t)))}if(t||"nu"===n||"nn"===n||0<=$.inArray(n,z.customUnaryOperations))u[r]=t,h[r]=n,p++;else if(u.hasOwnProperty(r)&&delete u[r],!C.stringResult&&!C.searchOperators&&"local"!==z.datatype)try{null!=z.postData&&z.postData.hasOwnProperty(r)&&delete z.postData[r]}catch(e){}}),0<p),a=(C.stringResult||C.searchOperators||"local"===z.datatype?(r='{"groupOp":"'+C.groupOp+'","rules":[',i=0,$.each(u,function(e,t){0<i&&(r+=","),r=(r=(r+='{"field":"'+e+'",')+'"op":"'+h[e]+'",')+'"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',i++}),r+="]}",z.postData[C.sFilter]=r,$.each([C.sField,C.sValue,C.sOper],function(e,t){z.postData.hasOwnProperty(t)&&delete z.postData[t]})):$.extend(z.postData,u),z.searchurl&&(e=z.url,P.jqGrid("setGridParam",{url:z.searchurl})),"stop"===P.triggerHandler("jqGridToolbarBeforeSearch"));(a=!a&&$.jgrid.isFunction(C.beforeSearch)?C.beforeSearch.call(B):a)||P.jqGrid("setGridParam",{search:t}).trigger("reloadGrid",[$.extend({page:1},C.reloadGridSearchOptions||{})]),e&&P.jqGrid("setGridParam",{url:e}),P.triggerHandler("jqGridToolbarAfterSearch"),$.jgrid.isFunction(C.afterSearch)&&C.afterSearch.call(B)},N=D("search.odata")||[],E=z.customSortOperations,T=[],M=$("<tr></tr>",{class:"ui-search-toolbar",role:"row form"}),C.loadFilterDefaults&&(I=n()||{}),$.each(g,function(e){var n,t,r,i,a,o,l,s,d,c=this,u="filter",p=c.searchoptions||{},h=c.editoptions||{},f=$("<th></th>",{class:getGuiStyles.call(B,"colHeaders","ui-th-column ui-th-"+z.direction+" "+(C.applyLabelClasses&&c.labelClasses||"")),role:"gridcell","aria-describedby":z.id+"_"+c.name}),g=$("<div></div>"),m=$("<table class='ui-search-table'><tbody><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></tbody></table>"),v=m.children("tbody").children("tr").children("td"),b=v.eq(0),w=v.eq(1),v=v.eq(2);if(!0===this.hidden&&f.css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),n=$.extend({mode:u,name:c.name,cm:c,iCol:e,id:O(c.name)},p),this.search){if(C.searchOperators){for(r=z.search&&null!=I[this.name]?I[this.name].op:n.sopt?n.sopt[0]:"select"===c.stype||"checkbox"===c.stype?"eq":C.defaultSearch,i=0;i<N.length;i++)if(N[i].oper===r){t=C.operands[r]||"";break}if(void 0===t&&null!=E)for(a in E)if(E.hasOwnProperty(a)&&a===r){t=E[a].operand;break}void 0===t&&(t="="),b.append("<a title='"+(null!=n.searchtitle?n.searchtitle:D("search.operandTitle"))+"' data-soper='"+r+"' class='"+getGuiStyles.call(B,"searchToolbar.operButton","soptclass")+"' data-colname='"+this.name+"'>"+V(t)+"</a>")}switch(b.data("colindex",e),null!=n.sopt&&1!==n.sopt.length||b.hide(),z.search&&null!=I[this.name]&&(n.defaultValue=I[this.name].data),void 0===n.clearSearch&&(n.clearSearch="text"===this.stype),n.clearSearch?(o=$.jgrid.isFunction(C.resetTitle)?C.resetTitle.call(B,{options:C,cm:c,cmName:c.name,iCol:e}):(D("search.resetTitle")||"Clear Search Value")+" "+jgrid.stripHtml(z.colNames[e]),v.append("<a title='"+o+"' aria-label='"+o+"' class='"+getGuiStyles.call(B,"searchToolbar.clearButton","clearsearchclass")+"'><span>"+C.resetIcon+"</span></a>")):v.hide(),g.append(m),this.stype){case"checkbox":var y=void 0!==n.defaultValue?n.defaultValue:"-1",j=$("<input role='search' type='checkbox' class='"+_+"' name='"+(c.index||c.name)+"' id='"+O(c.name)+"' aria-labelledby='jqgh_"+z.id+"_"+c.name+"' data-state='"+y+"'/>");"-1"===y?j.prop("indeterminate",!0):"1"===y&&j.prop("checked",!0),j.click(function(){var e=$(this);switch(e.data("state")){case-1:G(e,1);break;case 0:G(e,-1);break;default:G(e,0)}!0===C.autosearch&&k()}),w.append(j),n.attr&&j.attr(n.attr),T.push({elem:j[0],options:n});break;case"select":(y=this.surl||n.dataUrl)?$.ajax($.extend({url:y,context:{$tdInput:w,options:n,cm:c,iCol:e},dataType:"html",success:function(e,t,r){var i=this.cm,a=this.iCol,o=this.options,l=this.$tdInput;void 0!==o.buildSelect?(r=o.buildSelect.call(B,e,r,i,a))&&l.append(r):l.append(e),(r=l.children("select")).attr({name:i.index||i.name,id:O(i.name)}),o.attr&&r.attr(o.attr),r.addClass(_),r.css({width:"100%"}),0===r.find("option[value='']").length&&"string"==typeof n.noFilterText&&((e=document.createElement("option")).value="",e.innerHTML=n.noFilterText,r.prepend(e),null!=$(r[0].options[r[0].selectedIndex]).attr("selected")||r[0].multiple||(r[0].selectedIndex=0)),r[0].multiple&&0===r.find("option[selected]").length&&-1!==r[0].selectedIndex&&(r[0].options[r[0].selectedIndex].selected=!1),void 0!==o.defaultValue&&r.val(o.defaultValue),jgrid.bindEv.call(B,r[0],o),jgrid.fullBoolFeedback.call(B,o.selectFilled,"jqGridSelectFilled",{elem:r[0],options:o,cm:i,cmName:i.name,iCol:a,mode:u}),!0===C.autosearch&&r.change(function(){return k(),!1})}},jgrid.ajaxOptions,z.ajaxSelectOptions||{})):(c.searchoptions?(l=void 0===p.value?h.value||"":p.value,s=void 0===p.separator?h.separator||":":p.separator,d=void 0===p.delimiter?h.delimiter||";":p.delimiter):c.editoptions&&(l=void 0===h.value?"":h.value,s=void 0===h.separator?":":h.separator,d=void 0===h.delimiter?";":h.delimiter),(l=p.generateValue&&null!=z.indexByColumnData[c.name]?B.generateValueFromColumnIndex(c.name,s,d):l)&&((y=document.createElement("select")).style.width="100%",j=$(y).attr({name:c.index||c.name,role:"search",id:O(c.name),"aria-describedby":z.id+"_"+c.name}),n.attr&&j.attr(n.attr),jgrid.fillSelectOptions(y,l,s,d,null!=n.attr&&n.attr.multiple)||"string"!=typeof n.noFilterText||((l=document.createElement("option")).value="",l.innerHTML=n.noFilterText,l.selected=!0,j.prepend(l)),void 0!==n.defaultValue&&j.val(n.defaultValue),j.addClass(_),T.push({elem:y,options:n}),w.append(y),jgrid.fullBoolFeedback.call(B,n.selectFilled,"jqGridSelectFilled",{elem:y,options:c.searchoptions||h,cm:c,cmName:c.name,iCol:e,mode:u}),!0===C.autosearch)&&j.change(function(){return k(),!1}));break;case"text":j=$("<input role='search' type='text' class='"+_+"' name='"+(c.index||c.name)+"' id='"+O(c.name)+"' aria-labelledby='jqgh_"+z.id+"_"+c.name+"' value='"+(void 0!==n.defaultValue?n.defaultValue:"")+"'/>"),w.append(j),c.createColumnIndex&&n.generateDatalist&&(s="dl_"+O(c.name),null!=(d=P.jqGrid("generateDatalistFromColumnIndex",c.name)))&&0<d.length&&(j.attr("list",s),w.append(d.attr("id",s))),n.attr&&j.attr(n.attr),T.push({elem:j[0],options:n}),!0===C.autosearch&&(C.searchOnEnter?j.keypress(function(e){return 13===(e.charCode||e.keyCode||0)?(k(),!1):this}):j.keydown(function(e){switch(e.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:A&&clearTimeout(A),A=setTimeout(function(){k()},C.autosearchDelay)}}));break;case"custom":w.append("<span style='width:100%;padding:0;box-sizing:border-box;' name='"+(c.index||c.name)+"' id='"+O(c.name)+"'/>");try{if(!$.jgrid.isFunction(n.custom_element))throw"e1";var x=n.custom_element.call(B,void 0!==n.defaultValue?n.defaultValue:"",n);if(!x)throw"e2";x=$(x).addClass("customelement"),g.find("span[name='"+(c.index||c.name)+"']").append(x)}catch(e){"e1"===e&&L.call(B,S,"function 'custom_element' "+F.nodefined,q),"e2"===e?L.call(B,S,"function 'custom_element' "+F.novalue,q):L.call(B,S,"string"==typeof e?e:e.message,q)}}}f.append(g),f.find(".ui-search-oper .soptclass,.ui-search-clear .clearsearchclass").hover(function(){$(this).addClass(R)},function(){$(this).removeClass(R)}),M.append(f),C.searchOperators||b.hide()}),$(b.hDiv).find(">div>.ui-jqgrid-htable>thead").append(M),$.each(T,function(){jgrid.bindEv.call(B,this.elem,this.options)}),C.searchOperators&&($(".soptclass",M).click(function(e){var t=$(this).offset(),r=t.left,t=t.top,i=this,a=($("#sopt_menu").remove(),r=parseInt(r,10),t=parseInt(t,10)+18,0),o=[],l=$(i).data("soper"),n=$(i).data("colname"),s=$(".ui-jqgrid-view").css("font-size")||"11px",d="<ul id='sopt_menu' class='"+getGuiStyles.call(B,"searchToolbar.menu","ui-search-menu")+"' role='menu' tabindex='0' style='z-index:9999;display:block;font-size:"+s+";left:"+r+"px;top:"+t+"px;'>",a=z.iColByName[n];if(void 0!==a){var c,u,p,h,s=g[a],f=$.extend({},s.searchoptions);for(f.sopt||(f.sopt=[],f.sopt[0]="select"===s.stype||"checkbox"===s.stype?"eq":C.defaultSearch),$.each(N,function(){o.push(this.oper)}),null!=E&&$.each(E,function(e){o.push(e)}),a=0;a<f.sopt.length;a++)u=f.sopt[a],-1!==(c=$.inArray(u,o))&&(void 0!==(c=N[c])?(p=C.operands[u],h=c.text):null!=E&&(p=(c=E[u]).operand,h=c.text),d+='<li class="'+getGuiStyles.call(B,"searchToolbar.menuItem","ui-jqgrid-menu-item "+(l===u?m:""))+'" role="presentation"><a class="'+getGuiStyles.call(B,"searchToolbar.menuItemButton","g-menu-item")+'" tabindex="0" role="menuitem" value="'+V(u)+'" data-oper="'+V(p)+'"><table><tr><td style="width:25px">'+V(p)+"</td><td>"+V(h)+"</td></tr></table></a></li>");d+="</ul>",$("body").append(d),$("#sopt_menu > li > a").hover(function(){$(this).addClass(R)},function(){$(this).removeClass(R)}).click(function(){var e=$(this).attr("value"),t=$(this).data("oper");P.triggerHandler("jqGridToolbarSelectOper",[e,t,i]),$("#sopt_menu").hide(),$(i).data("soper",e).text(t),!0===C.autosearch&&(t=$(i).parent().next().children()[0],$(t).val()||"nu"===e||"nn"===e||0<=$.inArray(e,z.customUnaryOperations))&&k()})}e.stopPropagation()}),$("body").on("click",function(e){"soptclass"!==e.target.className&&$("#sopt_menu").hide()})),$(".clearsearchclass",M).click(function(){var e=$(this).closest(".ui-search-clear"),t=e.siblings(".ui-search-oper"),r=t.children("a"),i=r.data("soper"),t=parseInt(t.data("colindex"),10),a=e.siblings(".ui-search-input"),e=g[t],t=$.extend({},e.searchoptions||{}),o=t.defaultValue||"";switch(e.stype){case"select":o?a.find("select").val(o):a.find("select")[0].selectedIndex=0;break;case"checkbox":G(a.find("input[type=checkbox]"),-1);break;default:a.find("input").val(o)}("nu"===i||"nn"===i||0<=$.inArray(i,z.customUnaryOperations))&&(i=t.sopt?t.sopt[0]:"select"===e.stype||"checkbox"===e.stype?"eq":C.defaultSearch,t=null!=E&&null!=E[i]?E[i].operand:C.operands[i]||"",r.data("soper",i).text(t)),!0===C.autosearch&&k()}),B.ftoolbar=!0,B.triggerToolbar=k,B.clearToolbar=function(e){var o,r,i,t,l={},n=0,a=(e="boolean"!=typeof e||e,$.each(g,function(){var t,r,e=this,i=$(f(e.name),!0===e.frozen&&!0===z.frozenColumns?b.fhDiv:b.hDiv),a=e.searchoptions||{};switch(void 0!==a.defaultValue&&(t=a.defaultValue),o=e.index||e.name,e.stype){case"checkbox":G(i,-1);break;case"select":if(r=!(0<i.length&&i[0].multiple),i.find("option").each(function(e){if(this.selected=0===e&&r,$(this).val()===t)return!(this.selected=!0)}),void 0!==t)l[o]=t,n++;else try{delete z.postData[o]}catch(e){}break;case"text":if(i.val(t||""),void 0!==t)l[o]=t,n++;else try{delete z.postData[o]}catch(e){}break;case"custom":$.jgrid.isFunction(a.custom_value)&&0<i.length&&"SPAN"===i[0].nodeName.toUpperCase()&&(void 0===t&&(t=""),a.custom_value.call(B,i.children(".customelement").first(),"set",t))}}),0<n),s=(z.resetsearch=!0,C.stringResult||C.searchOperators||"local"===z.datatype?(r='{"groupOp":"'+C.groupOp+'","rules":[',i=0,$.each(l,function(e,t){0<i&&(r+=","),r=(r=r+'{"field":"'+e+'","op":"eq",')+'"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',i++}),r+="]}",z.postData[C.sFilter]=r,$.each([C.sField,C.sValue,C.sOper],function(e,t){z.postData.hasOwnProperty(t)&&delete z.postData[t]})):$.extend(z.postData,l),z.searchurl&&(t=z.url,P.jqGrid("setGridParam",{url:z.searchurl})),"stop"===P.triggerHandler("jqGridToolbarBeforeClear"));(s=!s&&$.jgrid.isFunction(C.beforeClear)?C.beforeClear.call(B):s)||e&&P.jqGrid("setGridParam",{search:a}).trigger("reloadGrid",[$.extend({page:1},C.reloadGridResetOptions||{})]),t&&P.jqGrid("setGridParam",{url:t}),P.triggerHandler("jqGridToolbarAfterClear"),$.jgrid.isFunction(C.afterClear)&&C.afterClear.call(B)},B.toggleToolbar=function(){var e=$("tr.ui-search-toolbar",b.hDiv),t=!0===z.frozenColumns&&$("tr.ui-search-toolbar",b.fhDiv);"none"===e.css("display")?(e.show(),t&&t.show()):(e.hide(),t&&t.hide()),!0===z.frozenColumns&&(P.jqGrid("destroyFrozenColumns"),P.jqGrid("setFrozenColumns"))},!0===z.frozenColumns&&(P.jqGrid("destroyFrozenColumns"),P.jqGrid("setFrozenColumns")),P.on("jqGridRefreshFilterValues.filterToolbar"+(C.loadFilterDefaults?" jqGridAfterLoadComplete.filterToolbar":""),function(){var e,t,r,i,a,o,l=n(!0)||{};if(C.stringResult||C.searchOperators||"local"===z.datatype||!z.search){for(e in l)l.hasOwnProperty(e)&&(i=l[e],o=(a=$(f(e))).closest("th.ui-th-column"),0<a.length)&&0<o.length&&(o=(z.colModel[o[0].cellIndex]||{}).searchoptions||{},"SELECT"===a[0].tagName.toUpperCase()&&a[0].multiple?a.val(i.data.split(z.inFilterSeparator||",")):a.is("input[type=checkbox]")?(r=v(o),G(a,i.data===r.on?1:i.data===r.off?0:-1)):0<a.find(".customelement").length&&$.jgrid.isFunction(o.custom_value)?(r=o.custom_value.call(B,a.find(".customelement").first(),"get"),""===i.data&&void 0!==o.defaultValue&&(i.data=o.defaultValue),void 0===r&&(r=""),i.data!==r&&String(i.data)!==String(r)&&o.custom_value.call(B,a.find(".customelement").first(),"set",i.data)):(""===i.data&&void 0!==o.defaultValue&&(i.data=o.defaultValue),$.jgrid.trim(a.val())!==String(i.data)&&a.val(i.data)),(o=a.closest(".ui-search-input").siblings(".ui-search-oper").children(".soptclass")).data("soper",i.op),o.text(C.operands[i.op]||(z.customSortOperations[i.op]||{}).operand));for(t=0;t<z.colModel.length;t++)e=z.colModel[t].name,l.hasOwnProperty(e)||$(f(e)).val("")}}))})},destroyFilterToolbar:function(){return this.each(function(){var e=this;e.ftoolbar&&(e.triggerToolbar=null,e.clearToolbar=null,e.toggleToolbar=null,e.ftoolbar=!1,$(e.grid.hDiv).find("table thead tr.ui-search-toolbar").remove(),!0===e.p.frozenColumns)&&$(e).jqGrid("destroyFrozenColumns").jqGrid("setFrozenColumns")})},destroyGroupHeader:function(d){return void 0===d&&(d=!0),this.each(function(){var e,t,r=this.grid,i=this.p.colModel,a=$("table.ui-jqgrid-htable thead",r.hDiv);if(r){delete this.grid.groupHeaders,$(this).off(".setGroupHeaders");for(var o=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),l=r.headers,n=0,s=l.length;n<s;n++){t=i[n].hidden?"none":"",t=$(l[n].el).width(l[n].width).css("display",t);try{t.removeAttr("rowSpan")}catch(e){t.attr("rowSpan",1)}o.append(t),0<(e=t.children("span.ui-jqgrid-resize")).length&&(e[0].style.height=""),t.children("div")[0].style.top=""}$(a).children("tr.ui-jqgrid-labels").remove(),$(a).prepend(o),!0===d&&$(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(C){return C=$.extend({useColSpanStyle:!1,applyLabelClasses:!0,groupHeaders:[]},C||{}),this.each(function(){this.p.groupHeader=C;var e,t,r,i,a,o,l,n,s,d,c,u=this,p=0,h=u.p,f=h.colModel,g=f.length,m=u.grid.headers,v=$("table.ui-jqgrid-htable",u.grid.hDiv),b=jgrid.isCellClassHidden,w=v.children("thead").children("tr.ui-jqgrid-labels"),y=w.last().addClass("jqg-second-row-header"),j=v.children("thead"),x=v.find(".jqg-first-row-header");void 0===x[0]?x=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):x.empty();for($(u).prepend(j),r=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),this.grid.groupHeaders=[],e=0;e<g;e++)if(i=m[e].el,a=$(i),t=f[e],c={height:"0",width:m[e].width+"px",display:t.hidden?"none":""},$("<th>",{role:"gridcell"}).css(c).addClass("ui-first-th-"+h.direction+(C.applyLabelClasses?" "+(t.labelClasses||""):"")).appendTo(x),i.style.width="",c=getGuiStyles.call(u,"colHeaders","ui-th-column-header ui-th-"+h.direction+" "+(C.applyLabelClasses&&t.labelClasses||"")),l=function(e,t){for(var r=0;r<t.length;r++)if(t[r].startColumnName===e)return t[r];return 0}(t.name,C.groupHeaders)){for(n=l.numberOfColumns,s=l.titleText,o=d=0;o<n&&e+o<g;o++)f[e+o].hidden||b(f[e+o].classes)||d++;s=$("<th>").addClass(c).addClass(l.className).html(s||"&nbsp;"),0<d&&s.attr("colspan",String(d)),h.headertitles&&s.attr("title",s.text()),0===d&&s.hide(),a.before(s),r.append(i),this.grid.groupHeaders.push({el:s[0],numberOfColumns:l.numberOfColumns,numberOfVisibleColumns:d,title:l.titleText}),p=n-1}else 0===p?C.useColSpanStyle?a.attr("rowspan",w.length+1):($("<th>").addClass(c).css({display:t.hidden?"none":"","border-top":"0 none"}).insertBefore(a),r.append(i)):(r.append(i),p--),this.grid.groupHeaders.push({el:i,numberOfColumns:1,numberOfVisibleColumns:0,title:""});(j=$(u).children("thead")).prepend(x),r.insertAfter(y),v.prepend(j),$(u).triggerHandler("jqGridAfterSetGroupHeaders")})},getNumberOfFrozenColumns:function(){if(0===this.length)return 0;for(var e=this[0].p.colModel,t=e.length,r=-1,i=0;i<t&&!0===e[i].frozen;i++)r=i;return r+1},setFrozenColumns:function(D){return D=D||{},this.each(function(){var t=this,a=$(t),v=t.p,o=t.grid;if(o&&null!=v&&!0!==v.frozenColumns){var b,e,r,i,l,n,s,w,d,c,u,p,h,f=v.colModel,g=f.length,m=-1,y=!1,j=[],x=jqID(v.id),C=getGuiStyles.call(t,"states.hover");if(!0!==v.subGrid&&!0!==v.treeGrid&&!v.scroll){for(b=0;b<g&&!0===f[b].frozen;b++)y=!0,m=b,j.push("#jqgh_"+x+"_"+jqID(f[b].name));if(v.sortable){u=$(o.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");try{u.sortable("destroy")}catch(e){}a.jqGrid("setGridParam",{sortable:{options:{items:0<j.length?">th:not(:has("+j.join(",")+"),:hidden)":">th:not(:hidden)"}}}),a.jqGrid("sortableColumns",u)}0<=m&&y&&(u=v.caption?$(o.cDiv).outerHeight():0,e=$(".ui-jqgrid-htable",v.gView).height(),v.toppager&&(u+=$(o.topDiv).outerHeight()),!0===v.toolbar[0]&&"bottom"!==v.toolbar[1]&&(u+=$(o.uDiv).outerHeight()),o.fhDiv=$("<div style='position:absolute;overflow:hidden;"+("rtl"===v.direction?"right:0;border-top-left-radius:0;":"left:0;border-top-right-radius:0;")+"top:"+u+"px;height:"+e+"px;' class='"+getGuiStyles.call(t,"hDiv","frozen-div ui-jqgrid-hdiv")+"'></div>"),o.fbDiv=$("<div style='position:absolute;overflow:hidden;"+("rtl"===v.direction?"right:0;":"left:0;")+"top:"+(parseInt(u,10)+parseInt(e,10)+1)+"px;overflow:hidden;' class='frozen-bdiv ui-jqgrid-bdiv'></div>"),$(v.gView).append(o.fhDiv),n=(s=$(".ui-jqgrid-htable",v.gView).clone(!0))[0].tHead.rows,v.groupHeader?($(n[0].cells).filter(":gt("+m+")").remove(),$(n).filter(".jqg-third-row-header").each(function(){$(this).children("th[id]").each(function(){var e=$(this).attr("id");e&&e.substr(0,t.id.length+1)===t.id+"_"&&(e=e.substr(t.id.length+1),v.iColByName[e]>m)&&$(this).remove()})}),i=r=-1,$(n).filter(".jqg-second-row-header").children("th").each(function(){if(l=parseInt($(this).attr("colspan")||1,10),1<parseInt($(this).attr("rowspan")||1,10)?(r++,i++):l&&(r+=l,i++),r===m)return!1}),r!==m&&(i=m),$(n).filter(".jqg-second-row-header,.ui-search-toolbar").each(function(){$(this).children(":gt("+i+")").remove()})):$(n).each(function(){$(this).children(":gt("+m+")").remove()}),$(s).width(1),$(o.fhDiv).append(s).scroll(function(){this.scrollLeft=0}),v.footerrow&&(n=$(".ui-jqgrid-bdiv",v.gView).height(),o.fsDiv=$("<div style='position:absolute;"+("rtl"===v.direction?"right:0;":"left:0;")+"top:"+(parseInt(u,10)+parseInt(e,10)+parseInt(n,10)+1)+"px;' class='frozen-sdiv ui-jqgrid-sdiv'></div>"),$(v.gView).append(o.fsDiv),s=$(".ui-jqgrid-ftable",v.gView).clone(!0),$("tr",s).each(function(){$("td:gt("+m+")",this).remove()}),$(s).width(1),$(o.fsDiv).append(s)),$(v.gView).append(o.fbDiv),$(o.bDiv).scroll(function(){$(o.fbDiv).scrollTop($(this).scrollTop())}),$(o.fbDiv).on("mousewheel.setFrozenColumns DOMMouseScroll.setFrozenColumns",function(e){o.bDiv.scrollTop+=$.jgrid.isFunction(D.mouseWheel)?D.mouseWheel.call(t,e):"mousewheel"===e.type?-e.originalEvent.wheelDelta/10:6*e.originalEvent.detail}),!0===v.hoverrows&&$(v.idSel).off("mouseover.jqGrid mouseout.jqGrid"),w=function(e,t){var r=e.height();1<=Math.abs(r-t)&&0<t&&(e.height(t),r=e.height(),1<=Math.abs(t-r))&&e.height(t+Math.round(t-r))},d=function(e,t){var r=e.width();1<=Math.abs(r-t)&&(e.width(t),r=e.width(),1<=Math.abs(t-r))&&e.width(t+Math.round(t-r))},c=function(e,t,r,i){var a,o,l,n,s,d,c,u,p,h,f,g,m=$(t).position().top;if(null!=e&&0<e.length){if(e[0].scrollTop=t.scrollTop,e.css("rtl"===v.direction?{top:m,right:0}:{top:m,left:0}),l=e.children("table").children("thead").children("tr"),0===(n=$(t).children("div").children("table").children("thead").children("tr")).length&&0<e.children("table").length&&(l=$(e.children("table")[0].rows),n=$($(t).children("div").children("table")[0].rows)),h=0<(o=Math.min(l.length,n.length))?$(l[0]).position().top:0,f=0<o?$(n[0]).position().top:0,0<=r)for(0<=i&&(o=Math.min(i+1,o)),a=r;a<o;a++)if("none"!==(s=$(n[a])).css("display")&&s.is(":visible")){if(m=s.position().top,c=(d=$(l[a])).position().top,u=s.height(),null!=v.groupHeader&&v.groupHeader.useColSpanStyle)for(g=s[0].cells,b=0;b<g.length;b++)null!=(p=g[b])&&"TH"===p.nodeName.toUpperCase()&&(u=Math.max(u,$(p).height()));w(d,u+(m-f)+(h-c))}w(e,t.clientHeight)}},p={header:u={resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},resizeFooter:!0,body:u},a.on("jqGridAfterGridComplete.setFrozenColumns",function(){$(v.idSel+"_frozen").remove(),$(o.fbDiv).height(o.hDiv.clientHeight);var e,t=$(this).clone(!0),r=t[0].rows,i=a[0].rows;$(r).filter("tr[role=row]").each(function(){$(this.cells).filter("td[role=gridcell]:gt("+m+")").remove()}),o.fbRows=r,t.width(1).attr("id",v.id+"_frozen"),t.appendTo(o.fbDiv),!0===v.hoverrows&&(e=function(e,t,r){$(e)[t](C),$(r[e.rowIndex])[t](C)},$(r).filter(".jqgrow").hover(function(){e(this,"addClass",i)},function(){e(this,"removeClass",i)}),$(i).filter(".jqgrow").hover(function(){e(this,"addClass",r)},function(){e(this,"removeClass",r)})),c(o.fhDiv,o.hDiv,0,-1),c(o.fbDiv,o.bDiv,0,-1),o.sDiv&&c(o.fsDiv,o.sDiv,0,-1)}),h=function(e){$(o.fbDiv).scrollTop($(o.bDiv).scrollTop()),e.header.resizeDiv&&c(o.fhDiv,o.hDiv,e.header.resizedRows.iRowStart,e.header.resizedRows.iRowEnd),e.body.resizeDiv&&c(o.fbDiv,o.bDiv,e.body.resizedRows.iRowStart,e.body.resizedRows.iRowEnd),e.resizeFooter&&o.sDiv&&e.resizeFooter&&c(o.fsDiv,o.sDiv,0,-1);var t=o.fhDiv[0].clientWidth;e.header.resizeDiv&&null!=o.fhDiv&&1<=o.fhDiv.length&&w($(o.fhDiv),o.hDiv.clientHeight),e.body.resizeDiv&&null!=o.fbDiv&&0<o.fbDiv.length&&d($(o.fbDiv),t),e.resizeFooter&&null!=o.fsDiv&&0<=o.fsDiv.length&&d($(o.fsDiv),t)},$(v.gBox).on("resizestop.setFrozenColumns",function(){setTimeout(function(){h(p)},50)}),a.on("jqGridInlineEditRow.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridResizeStop.setFrozenColumns",function(e,t){t=a.jqGrid("getInd",t);h({header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:t,iRowEnd:t}}})}),a.on("jqGridResizeStop.setFrozenColumns",function(){h(p)}),a.on("jqGridResetFrozenHeights.setFrozenColumns",function(e,t){h(t||p)}),o.hDiv.loading||setTimeout(function(){a.triggerHandler("jqGridAfterGridComplete")},0),v.frozenColumns=!0)}}})},destroyFrozenColumns:function(){return this.each(function(){var t,r,e=$(this),i=this.grid,a=this.p,o=jqID(a.id);i&&!0===a.frozenColumns&&($(i.fhDiv).remove(),$(i.fbDiv).off(".setFrozenColumns"),$(i.fbDiv).remove(),i.fhDiv=null,i.fbDiv=null,i.fbRows=null,a.footerrow&&($(i.fsDiv).remove(),i.fsDiv=null),e.off(".setFrozenColumns"),!0===a.hoverrows&&(r=getGuiStyles.call(this,"states.hover"),e.on("mouseover.jqGrid",function(e){t=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(t).attr("class")&&$(t).addClass(r)}).on("mouseout.jqGrid",function(e){t=$(e.target).closest("tr.jqgrow"),$(t).removeClass(r)})),a.frozenColumns=!1,a.sortable)&&((a=$(i.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels")).sortable("destroy"),e.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+o+"_cb,#jqgh_"+o+"_rn,#jqgh_"+o+"_subgrid),:hidden)"}}}),e.jqGrid("sortableColumns",a))})}}),$.fn.jqFilter=function(e){if("string"==typeof e){var t,r=$.fn.jqFilter[e];if(r)return t=$.makeArray(arguments).slice(1),r.apply(this,t);throw"jqFilter - No such method: "+e}var _=$.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},jgrid.filter,e||{});return this.each(function(){if(!this.filter){null!==(this.p=_).filter&&void 0!==_.filter||(_.filter={groupOp:_.groupOps[0].op,rules:[],groups:[]});var e,t,r=_.columns.length,C=/msie/i.test(navigator.userAgent)&&!window.opera,D=$.jgrid.isFunction,i=null!=jgrid.defaults&&D(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert,S=function(){return $("#"+jgrid.jqID(_.id))[0]||null},q=function(e,t){return $(S()).jqGrid("getGuiStyles",e,t||"")},F=function(e){return $(S()).jqGrid("getGridRes","search."+e)},R=function(e){var t=S(),r=t.p.iColByName[e];return void 0!==r?{cm:t.p.colModel[r],iCol:r}:void 0!==(r=t.p.iPropByName[e])?{cm:t.p.additionalProperties[r],iCol:r,isAddProp:!0}:{cm:null,iCol:-1}},h=q("states.error"),a=q("dialog.content");if(_.initFilter=$.extend(!0,{},_.filter),r){for(e=0;e<r;e++)(t=_.columns[e]).stype?t.inputtype=t.stype:t.inputtype||(t.inputtype="text"),t.sorttype?t.searchtype=t.sorttype:t.searchtype||(t.searchtype="string"),void 0===t.hidden&&(t.hidden=!1),t.label||(t.label=t.name),t.cmName=t.name,t.index&&(t.name=t.index),t.hasOwnProperty("searchoptions")||(t.searchoptions={}),t.hasOwnProperty("searchrules")||(t.searchrules={});_.showQuery&&$(this).append("<table class='queryresult "+a+"' style='display:block;max-width:440px;border:0px none;' dir='"+_.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var n=function(e,t){var r=[!0,""],i=S();if(D(t.searchrules))r=t.searchrules.call(i,e,t);else if(jgrid&&jgrid.checkValues)try{r=jgrid.checkValues.call(i,e,-1,t.searchrules,t.label)}catch(e){}r&&r.length&&!1===r[0]&&(_.error=!r[0],_.errmsg=r[1])};this.onchange=function(){return _.error=!1,_.errmsg="",!!D(_.onChange)&&_.onChange.call(S(),_,this)},this.reDraw=function(){$("table.group:first",this).remove();var e=this.createTableForGroup(_.filter,null);$(this).append(e),D(_.afterRedraw)&&_.afterRedraw.call(S(),_,this)},this.createTableForGroup=function(i,e){var a=this,t=$("<table class='"+q("searchDialog.operationGroup","group")+"' style='border:0px none;'><tbody></tbody></table>"),r="left",o=("rtl"===_.direction&&(r="right",t.attr("dir","rtl")),null===e&&t.append("<tr class='error' style='display:none;'><th colspan='5' class='"+h+"' align='"+r+"'></th></tr>"),$("<tr></tr>")),r=(t.append(o),$("<th colspan='5' align='"+r+"'></th>"));if(o.append(r),!0===_.ruleButtons){for(var l,n=$("<select class='"+q("searchDialog.operationSelect","opsel")+"'></select>"),s=(r.append(n),""),d=0;d<_.groupOps.length;d++)l=i.groupOp===a.p.groupOps[d].op?" selected='selected'":"",s+="<option value='"+a.p.groupOps[d].op+"'"+l+">"+a.p.groupOps[d].text+"</option>";n.append(s).on("change",function(){i.groupOp=$(n).val(),a.onchange()})}var c,u,p,o="<span></span>";if(_.groupButton&&(o=$("<input type='button' value='+ {}' title='"+F("addGroupTitle")+"' class='"+q("searchDialog.addGroupButton","add-group")+"'/>")).on("click",function(){return void 0===i.groups&&(i.groups=[]),i.groups.push({groupOp:_.groupOps[0].op,rules:[],groups:[]}),a.reDraw(),a.onchange(),!1}),r.append(o),!0===_.ruleButtons&&((o=$("<input type='button' value='+' title='"+F("addRuleTitle")+"' class='"+q("searchDialog.addRuleButton","add-rule ui-add")+"'/>")).on("click",function(){var e,t,r;for(void 0===i.rules&&(i.rules=[]),d=0;d<a.p.columns.length;d++)if(e=void 0===a.p.columns[d].search||a.p.columns[d].search,t=!0===a.p.columns[d].hidden,!0===a.p.columns[d].searchoptions.searchhidden&&e||e&&!t){c=a.p.columns[d];break}return r=c.searchoptions.sopt||a.p.sopt||(-1!==$.inArray(c.searchtype,a.p.strarr)?a.p.stropts:a.p.numopts),i.rules.push({field:c.name,op:r[0],data:""}),a.reDraw(),!1}),r.append(o)),null!==e&&(o=$("<input type='button' value='-' title='"+F("deleteGroupTitle")+"' class='"+q("searchDialog.deleteGroupButton","delete-group")+"'/>"),r.append(o),o.on("click",function(){for(d=0;d<e.groups.length;d++)if(e.groups[d]===i){e.groups.splice(d,1);break}return a.reDraw(),a.onchange(),!1})),void 0!==i.groups)for(d=0;d<i.groups.length;d++)u=$("<tr></tr>"),t.append(u),p=$("<td class='first'></td>"),u.append(p),(p=$("<td colspan='4'></td>")).append(this.createTableForGroup(i.groups[d],i)),u.append(p);if(void 0===i.groupOp&&(i.groupOp=a.p.groupOps[0].op),void 0!==i.rules)for(d=0;d<i.rules.length;d++)t.append(this.createTableRowForRule(i.rules[d],i));return t},this.createTableRowForRule=function(u,e){for(var p,h,t,f,r,i,g=this,m=S(),a=$("<tr></tr>"),o="",l=(a.append("<td class='first'></td>"),$("<td class='columns'></td>")),v=(a.append(l),$("<select class='"+q("searchDialog.label","selectLabel")+"'></select>")),b=[],n=(l.append(v),v.on("change",function(){u.field=$(v).val();for(var e,t=$(this).parents("tr:first"),r=0;r<g.p.columns.length;r++)if(g.p.columns[r].name===u.field){e=g.p.columns[r];break}if(e){var i,a,o,l,n=$.extend({},e.editoptions||{}),n=(delete n.readonly,delete n.disabled,$.extend({},n||{},e.searchoptions||{},R(e.cmName),{id:jgrid.randId(),name:e.name,mode:"search"})),s=(n.column=e,!C||"text"!==e.inputtype||n.size||(n.size=10),jgrid.createEl.call(m,e.inputtype,$.extend({},n,n.attr||{}),"",!0,g.p.ajaxSelectOptions||{},!0)),d=($(s).addClass(q("searchDialog.elem","input-elm")),p=n.sopt||g.p.sopt||(-1!==$.inArray(e.searchtype,g.p.strarr)?g.p.stropts:g.p.numopts),""),c=0;for(b=[],$.each(g.p.ops,function(){b.push(this.oper)}),g.p.cops&&$.each(g.p.cops,function(e){b.push(e)}),r=0;r<p.length;r++)i=p[r],-1!==(f=$.inArray(p[r],b))&&(a=(void 0!==(a=g.p.ops[f])?a:g.p.cops[i]).text,0===c&&(u.op=i),d+="<option value='"+i+"'>"+a+"</option>",c++);$(".selectopts",t).empty().append(d),$(".selectopts",t)[0].selectedIndex=0,jgrid.msie&&jgrid.msiever()<9&&(o=parseInt($("select.selectopts",t)[0].offsetWidth,10)+1,$(".selectopts",t).width(o),$(".selectopts",t).css("width","auto")),$(".data",t).empty().append(s),e.createColumnIndex&&n.generateDatalist&&(o="dl_"+s.id,null!=(l=$(m).jqGrid("generateDatalistFromColumnIndex",e.name)))&&0<l.length&&($(s).attr("list",o),$(".data",t).append(l.attr("id",o))),jgrid.bindEv.call(m,s,n),$(".input-elm",t).on("change",n,function(e){var t=e.target,e=e.data.column;u.data=e&&"custom"===e.inputtype&&D(e.searchoptions.custom_value)?e.searchoptions.custom_value.call(m,$(this).find(".customelement").first(),"get"):t.value,$(t).is("input[type=checkbox]")&&!$(t).is(":checked")&&(u.data=$(t).data("offval")),g.onchange()}),setTimeout(function(){u.data=$(s).val(),"select"===h.inputtype&&h.searchoptions.multiple&&Array.isArray(u.data)&&(u.data=u.data.join(",")),g.onchange()},0)}}),0),s=0;s<g.p.columns.length;s++)r=void 0===g.p.columns[s].search||g.p.columns[s].search,i=!0===g.p.columns[s].hidden,(!0===g.p.columns[s].searchoptions.searchhidden&&r||r&&!i)&&(t="",u.field===g.p.columns[s].name&&(t=" selected='selected'",n=s),o+="<option value='"+g.p.columns[s].name+"'"+t+">"+g.p.columns[s].label+"</option>");v.append(o);var d,c,l=$("<td class='operators'></td>"),w=(a.append(l),h=_.columns[n],!C||"text"!==h.inputtype||h.searchoptions.size||(h.searchoptions.size=10),$.extend({},h.editoptions||{})),w=(delete w.readonly,delete w.disabled,$.extend({},w,h.searchoptions||{},R(h.cmName),{id:jgrid.randId(),name:h.name,mode:"search"})),w=(w.column=h,jgrid.createEl.call(m,h.inputtype,$.extend({},w,w.attr||{}),u.data,!0,g.p.ajaxSelectOptions||{},!0)),y=(("nu"===u.op||"nn"===u.op||0<=$.inArray(u.op,m.p.customUnaryOperations))&&($(w).attr("readonly","true"),$(w).attr("disabled","true")),$("<select class='"+q("searchDialog.operator","selectopts")+"'></select>"));for(l.append(y),y.on("change",function(){u.op=$(y).val();var e=$(this).parents("tr:first"),e=$(".input-elm",e)[0];"nu"===u.op||"nn"===u.op||0<=$.inArray(u.op,m.p.customUnaryOperations)?(u.data="","SELECT"!==e.tagName.toUpperCase()&&(e.value=""),e.setAttribute("readonly","true"),e.setAttribute("disabled","true")):("SELECT"===e.tagName.toUpperCase()&&(u.data=e.value),e.removeAttribute("readonly"),e.removeAttribute("disabled")),g.onchange()}),p=h.searchoptions.sopt||g.p.sopt||(-1!==$.inArray(h.searchtype,g.p.strarr)?g.p.stropts:g.p.numopts),o="",$.each(g.p.ops,function(){b.push(this.oper)}),g.p.cops&&$.each(g.p.cops,function(e){b.push(e)}),s=0;s<p.length;s++)c=p[s],-1!==(f=$.inArray(p[s],b))&&(d=g.p.ops[f],o+="<option value='"+c+"'"+(t=u.op===c?" selected='selected'":"")+">"+(void 0!==d?d:g.p.cops[c]).text+"</option>");y.append(o);var j,x,l=$("<td class='data'></td>"),l=(a.append(l),l.append(w),h.createColumnIndex&&h.searchoptions.generateDatalist&&(j="dl_"+w.id,null!=(x=$(m).jqGrid("generateDatalistFromColumnIndex",h.name)))&&0<x.length&&($(w).attr("list",j),l.append(x.attr("id",j))),jgrid.bindEv.call(m,w,h.searchoptions),$(w).addClass(q("searchDialog.elem","input-elm")).on("change",function(){u.data="custom"===h.inputtype?h.searchoptions.custom_value.call(m,$(this).find(".customelement").first(),"get"):$(this).val(),$(this).is("input[type=checkbox]")&&!$(this).is(":checked")&&(u.data=$(this).data("offval")),Array.isArray(u.data)&&(u.data=u.data.join(_.inFilterSeparator||",")),g.onchange()}),$("<td></td>"));return a.append(l),!0===_.ruleButtons&&(x=$("<input type='button' value='-' title='"+F("deleteRuleTitle")+"' class='"+q("searchDialog.deleteRuleButton","delete-rule ui-del")+"'/>"),l.append(x),x.on("click",function(){for(s=0;s<e.rules.length;s++)if(e.rules[s]===u){e.rules.splice(s,1);break}return g.reDraw(),g.onchange(),!1})),a},this.getStringForGroup=function(e){var t,r="(";if(void 0!==e.groups)for(t=0;t<e.groups.length;t++){1<r.length&&(r+=" "+e.groupOp+" ");try{r+=this.getStringForGroup(e.groups[t])}catch(e){i(e)}}if(void 0!==e.rules)try{for(t=0;t<e.rules.length;t++)1<r.length&&(r+=" "+e.groupOp+" "),r+=this.getStringForRule(e.rules[t])}catch(e){i(e)}return"()"===(r+=")")?"":r},this.getStringForRule=function(e){for(var t,r,i="",a="",o=e.data,l=0;l<_.ops.length;l++)if(_.ops[l].oper===e.op){i=_.operands.hasOwnProperty(e.op)?_.operands[e.op]:"",a=_.ops[l].oper;break}if(""===a&&null!=_.cops)for(r in _.cops)if(_.cops.hasOwnProperty(r)&&(a=r,i=_.cops[r].operand,D(_.cops[r].buildQueryValue)))return _.cops[r].buildQueryValue.call(_,{cmName:e.field,searchValue:o,operand:i});for(l=0;l<_.columns.length;l++)if(_.columns[l].name===e.field){t=_.columns[l];break}return null==t?"":("bw"!==a&&"bn"!==a||(o+="%"),"ew"!==a&&"en"!==a||(o="%"+o),"cn"!==a&&"nc"!==a||(o="%"+o+"%"),"in"!==a&&"ni"!==a||(o=" ("+o+")"),_.errorcheck&&n(e.data,t),-1!==$.inArray(t.searchtype,["int","integer","float","number","currency"])||"nn"===a||"nu"===a||0<=$.inArray(a,S().p.customUnaryOperations)?e.field+" "+i+" "+o:e.field+" "+i+' "'+o+'"')},this.resetFilter=function(){_.filter=$.extend(!0,{},_.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){$("th."+h,this).html(""),$("tr.error",this).hide()},this.showError=function(){$("th."+h,this).html(_.errmsg),$("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(_.filter)},this.toString=function(){var a=this;return function e(t){var r,i="(";if(void 0!==t.groups)for(r=0;r<t.groups.length;r++)1<i.length&&("OR"===t.groupOp?i+=" || ":i+=" && "),i+=e(t.groups[r]);if(void 0!==t.rules)for(r=0;r<t.rules.length;r++)1<i.length&&("OR"===t.groupOp?i+=" || ":i+=" && "),i+=function(e){if(a.p.errorcheck){for(var t,r=0;r<a.p.columns.length;r++)if(a.p.columns[r].name===e.field){t=a.p.columns[r];break}t&&n(e.data,t)}return e.op+"(item."+e.field+",'"+e.data+"')"}(t.rules[r]);return"()"==(i+=")")?"":i}(_.filter)},this.reDraw(),_.showQuery&&this.onchange(),this.filter=!0}}})},$.extend($.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(e){return void 0!==e&&this.p.hasOwnProperty(e)?this.p[e]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(e){"string"==typeof e&&(e=$.parseJSON(e)),this.each(function(){this.p.filter=e,this.reDraw(),this.onchange()})}}),{xml2json:function(e,t){9===e.nodeType&&(e=e.documentElement);var r=this.removeWhite(e),r=this.toObj(r),r=this.toJson(r,e.nodeName,"\t");return"{\n"+t+(t?r.replace(/\t/g,t):r.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){function s(e,t,r){var i,a,o,l,n="";if(e instanceof Array)if(0===e.length)n+=r+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else for(i=0,a=e.length;i<a;i+=1)n+=r+s(e[i],t,r+"\t")+"\n";else if("object"==typeof e){for(l in o=!1,n+=r+"<"+t,e)e.hasOwnProperty(l)&&("@"===l.charAt(0)?n+=" "+l.substr(1)+'="'+e[l].toString()+'"':o=!0);if(n+=o?">":"/>",o){for(l in e)e.hasOwnProperty(l)&&("#text"===l?n+=e[l]:"#cdata"===l?n+="<![CDATA["+e[l]+"]]>":"@"!==l.charAt(0)&&(n+=s(e[l],l,r+"\t")));n+=("\n"===n.charAt(n.length-1)?r:"")+"</"+t+">"}}else"function"==typeof e?n+=r+"<"+t+"><![CDATA["+e+"]]></"+t+">":'""'===(e=void 0===e?"":e).toString()||0===e.toString().length?n+=r+"<"+t+">__EMPTY_STRING_</"+t+">":n+=r+"<"+t+">"+e.toString()+"</"+t+">";return n}var r,i="";for(r in e)e.hasOwnProperty(r)&&(i+=s(e[r],r,""));return t?i.replace(/\t/g,t):i.replace(/\t|\n/g,"")},toObj:function(e){var t,r,i={},a=/function/i,o=0,l=0,n=!1;if(1===e.nodeType){if(e.attributes.length)for(t=0;t<e.attributes.length;t+=1)i["@"+e.attributes[t].nodeName]=(e.attributes[t].nodeValue||"").toString();if(e.firstChild){for(r=e.firstChild;r;r=r.nextSibling)1===r.nodeType?n=!0:3===r.nodeType&&r.nodeValue.match(/[^ \f\n\r\t\v]/)?o+=1:4===r.nodeType&&(l+=1);if(n)if(o<2&&l<2)for(this.removeWhite(e),r=e.firstChild;r;r=r.nextSibling)3===r.nodeType?i["#text"]=this.escape(r.nodeValue):4===r.nodeType?a.test(r.nodeValue)?i[r.nodeName]=[i[r.nodeName],r.nodeValue]:i["#cdata"]=this.escape(r.nodeValue):i[r.nodeName]?i[r.nodeName]instanceof Array?i[r.nodeName][i[r.nodeName].length]=this.toObj(r):i[r.nodeName]=[i[r.nodeName],this.toObj(r)]:i[r.nodeName]=this.toObj(r);else e.attributes.length?i["#text"]=this.escape(this.innerXml(e)):i=this.escape(this.innerXml(e));else if(o)e.attributes.length?i["#text"]=this.escape(this.innerXml(e)):"__EMPTY_ARRAY_"===(i=this.escape(this.innerXml(e)))?i="[]":"__EMPTY_STRING_"===i&&(i="");else if(l)if(1<l)i=this.escape(this.innerXml(e));else for(r=e.firstChild;r;r=r.nextSibling){if(a.test(e.firstChild.nodeValue)){i=e.firstChild.nodeValue;break}i["#cdata"]=this.escape(r.nodeValue)}}e.attributes.length||e.firstChild||(i=null)}else 9===e.nodeType?i=this.toObj(e.documentElement):(null!=$.jgrid&&null!=$.jgrid.defaults&&$.jgrid.isFunction($.jgrid.defaults.fatalError)?$.jgrid.defaults.fatalError:alert)("unhandled node type: "+e.nodeType);return i},toJson:function(e,t,r,i){var a,o,l,n=t?'"'+t+'"':"",s="\t",d="\n",c=[],u=[];if((i=void 0===i?!0:i)||(d=s=""),"[]"===e)n+=t?":[]":"[]";else if(e instanceof Array){for(o=0,a=e.length;o<a;o+=1)c[o]=this.toJson(e[o],"",r+s,i);n+=(t?":[":"[")+(1<c.length?d+r+s+c.join(","+d+r+s)+d+r:c.join(""))+"]"}else if(null===e)n+=(t&&":")+"null";else if("object"==typeof e){for(l in e)e.hasOwnProperty(l)&&(u[u.length]=this.toJson(e[l],l,r+s,i));n+=(t?":{":"{")+(1<u.length?d+r+s+u.join(","+d+r+s)+d+r:u.join(""))+"}"}else n+="string"==typeof e?(t&&":")+'"'+e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(t&&":")+e.toString();return n},innerXml:function(e){function a(e){var t,r,i="";if(1===e.nodeType){for(i+="<"+e.nodeName,t=0;t<e.attributes.length;t+=1)i+=" "+e.attributes[t].nodeName+'="'+(e.attributes[t].nodeValue||"").toString()+'"';if(e.firstChild){for(i+=">",r=e.firstChild;r;r=r.nextSibling)i+=a(r);i+="</"+e.nodeName+">"}else i+="/>"}else 3===e.nodeType?i+=e.nodeValue:4===e.nodeType&&(i+="<![CDATA["+e.nodeValue+"]]>");return i}var t,r="";if(e.hasOwnProperty("innerHTML"))r=e.innerHTML;else for(t=e.firstChild;t;t=t.nextSibling)r+=a(t);return r},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();for(var t,r=e.firstChild;r;)r=3===r.nodeType?r.nodeValue.match(/[^ \f\n\r\t\v]/)?r.nextSibling:(t=r.nextSibling,e.removeChild(r),t):(1===r.nodeType&&this.removeWhite(r),r.nextSibling);return e}}),jgridFeedback=(window.xmlJsonClass=xmlJsonClass,jgrid.feedback),fullBoolFeedback=jgrid.fullBoolFeedback,builderFmButon=jgrid.builderFmButon,addFormIcon=function(e,t,r){!0===t[0]&&(r="<span class='"+mergeCssClasses("fm-button-icon",r,t[2])+"'></span>","right"===t[1]?e.addClass("fm-button-icon-right").append(r):e.addClass("fm-button-icon-left").prepend(r))},getGuiStateStyles=function(e){return getGuiStyles.call(this,"states."+e)},hideRowsWithoutVissibleCells=function(e){e.find("tr[data-rowpos]").each(function(){var e=0;$(this).children("td").each(function(){"hidden"!==$(this).css("visibility")&&e++}),e||$(this).hide()})},isEmptyString=function(e){return"&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0)},editFeedback=(jgrid.extend({searchGrid:function(S){return this.each(function(){var a,o,r,t,i,e,l,n,s,d,c,u,p,h,f,g,m,v,b,w,y,j=this,x=$(j),C=j.p;function D(e){s("beforeShow",e)&&($(t).data("onClose",a.onClose),jgrid.viewModal.call(j,t,{gbox:i,jqm:a.jqModal,overlay:a.overlay,modal:a.modal,overlayClass:a.overlayClass,toTop:a.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),s("afterShow",e))}j.grid&&null!=C&&(a=$.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:C.prmNames.filters,loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},base.getGridRes.call(x,"search"),jgrid.search||{},C.searching||{},S||{}),o="fbox_"+C.id,w=a.commonIconClass,t="#"+jqID((r={themodal:"searchmod"+o,modalhead:"searchhd"+o,modalcontent:"searchcnt"+o,resizeAlso:o}).themodal),i=C.gBox,e=C.gView,l=$.each,n=C.postData[a.sFilter],s=function(){var e=$.makeArray(arguments);return e.unshift("Search"),e.unshift("Filter"),e.unshift(a),jgridFeedback.apply(j,e)},d=function(){jgrid.hideModal(t,{gb:i,jqm:a.jqModal,onClose:a.onClose,removemodal:a.removemodal})},"string"==typeof n&&(n=""!==$.jgrid.trim(n)?$.parseJSON(n):void 0),$(t).remove(),void 0!==$(t)[0]?D($("#fbox_"+jqID(C.id))):(c=$("<div><div id='"+o+"' class='"+getGuiStyles.call(j,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(e),"rtl"===C.direction&&c.attr("dir","rtl"),p=u="",f=!1,g=-1,m=$.extend([],C.colModel),v=builderFmButon.call(j,o+"_search",a.Find,mergeCssClasses(w,a.findDialogIcon),"right"),b=builderFmButon.call(j,o+"_reset",a.Reset,mergeCssClasses(w,a.resetDialogIcon),"left"),a.showQuery&&(u=builderFmButon.call(j,o+"_query","Query",mergeCssClasses(w,a.queryDialogIcon),"left")+"&#160;"),a.searchForAdditionalProperties&&l(C.additionalProperties,function(){var e="string"==typeof this?{name:this}:this;e.label||(e.label=e.name),e.isAddProp=!0,m.push(e)}),a.columns.length?(m=a.columns,h=m[g=0].index||m[0].name):l(m,function(e,t){var r,i;t.label||(t.label=t.isAddProp?t.name:C.colNames[e]),!f&&(r=void 0===t.search||t.search,i=!0===t.hidden,t.searchoptions&&!0===t.searchoptions.searchhidden&&r||r&&!i)&&(f=!0,h=t.index||t.name,g=e)}),(!n&&h||!1===a.multipleSearch)&&(w="eq",0<=g&&m[g].searchoptions&&m[g].searchoptions.sopt?w=m[g].searchoptions.sopt[0]:a.sopt&&a.sopt.length&&(w=a.sopt[0]),n={groupOp:"AND",rules:[{field:h,op:w,data:""}]}),f=!1,a.tmplNames&&a.tmplNames.length&&(f=!0,p=a.tmplLabel+"<select class='ui-template'><option value='default'>Default</option>",l(a.tmplNames,function(e,t){p+="<option value='"+e+"'>"+t+"</option>"}),p+="</select>"),w="<div class='"+getGuiStyles.call(j,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+o+"_2'><tbody><tr><td colspan='2'><hr class='"+getGuiStyles.call(j,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+C.direction+"'  style='float:"+("rtl"===C.direction?"right":"left")+";'>"+b+p+"</td><td class='EditButton EditButton-"+C.direction+"'>"+u+v+"</td></tr></tbody></table></div>",o=jqID(o),a.gbox=i,a.height="auto",$(o="#"+o).jqFilter({columns:m,filter:a.loadDefaults?n:null,showQuery:a.showQuery,errorcheck:a.errorcheck,sopt:a.sopt,groupButton:a.multipleGroup,ruleButtons:a.multipleSearch,afterRedraw:a.afterRedraw,ops:a.odata,cops:C.customSortOperations,operands:a.operands,ajaxSelectOptions:C.ajaxSelectOptions,groupOps:a.groupOps,onChange:function(e,t){e.showQuery&&$(".query",t).text(t.toUserFriendlyString()),fullBoolFeedback.call(j,a.afterChange,"jqGridFilterAfterChange",$(o),a,e,t)},direction:C.direction,id:C.id}),c.append(w),f&&a.tmplFilters&&a.tmplFilters.length&&$(".ui-template",c).on("change",function(){var e=$(this).val();return"default"===e?$(o).jqFilter("addFilter",n):$(o).jqFilter("addFilter",a.tmplFilters[parseInt(e,10)]),!1}),!0===a.multipleGroup&&(a.multipleSearch=!0),s("onInitialize",$(o)),a.layer?jgrid.createModal.call(j,r,c,a,e,$(i)[0],"#"+jqID(a.layer),{position:"relative"}):jgrid.createModal.call(j,r,c,a,e,$(i)[0]),(a.searchOnEnter||a.closeOnEscape)&&$(t).keydown(function(e){var t=$(e.target);return!a.searchOnEnter||13!==e.which||t.hasClass("add-group")||t.hasClass("add-rule")||t.hasClass("delete-group")||t.hasClass("delete-rule")||t.hasClass("fm-button")&&t.is("[id$=_query]")?a.closeOnEscape&&27===e.which?($("#"+jqID(r.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:($(o+"_search").click(),!1)}),u&&$(o+"_query").on("click",function(){return $(".queryresult",c).toggle(),!1}),void 0===a.stringResult&&(a.stringResult=a.multipleSearch),$(o+"_search").on("click",function(){var e={},t="",r=$(o),i=r.find(".input-elm");if((i=i.filter(":focus")?i.filter(":focus"):i).change(),i=r.jqFilter("filterData"),a.errorcheck&&(r[0].hideError(),a.showQuery||r.jqFilter("toSQLString"),r[0].p.error))r[0].showError();else{if(a.stringResult||"local"===C.datatype){try{t=JSON.stringify(i)}catch(e){}"string"==typeof t&&(e[a.sFilter]=t,l([a.sField,a.sValue,a.sOper],function(){e[this]=""}))}else a.multipleSearch?(e[a.sFilter]=i,l([a.sField,a.sValue,a.sOper],function(){e[this]=""})):(e[a.sField]=i.rules[0].field,e[a.sValue]=i.rules[0].data,e[a.sOper]=i.rules[0].op,e[a.sFilter]="");$.extend(C.postData,e),fullBoolFeedback.call(j,a.onSearch,"jqGridFilterSearch",C.filters)&&(C.search=!0,x.trigger("reloadGrid",[$.extend({page:1},a.reloadGridSearchOptions||{})])),a.closeAfterSearch&&d()}return!1}),$(o+"_reset").on("click",function(){var e={},t=$(o);return C.search=!1,!(C.resetsearch=!0)===a.multipleSearch?e[a.sField]=e[a.sValue]=e[a.sOper]="":e[a.sFilter]="",t[0].resetFilter(),f&&$(".ui-template",c).val("default"),$.extend(C.postData,e),fullBoolFeedback.call(j,a.onReset,"jqGridFilterReset")&&x.trigger("reloadGrid",[$.extend({page:1},a.reloadGridResetOptions||{})]),a.closeAfterReset&&d(),!1}),D($(o)),y=getGuiStateStyles.call(j,"hover"),$(".fm-button:not(."+getGuiStateStyles.call(j,"disabled").split(" ").join(".")+")",c).hover(function(){$(this).addClass(y)},function(){$(this).removeClass(y)})))})},editGridRow:function(K,ee){return this.each(function(){var g=this,m=$(g),v=g.p;if(g.grid&&null!=v&&K){var b,w,y=v.id,n=base.getGridRes,j=base.setSelection,x=$.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",labelswidth:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:getGuiStyles.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"],saveui:"enable",savetext:n.call(m,"defaults.savetext")||"Saving..."},n.call(m,"edit"),jgrid.edit,v.formEditing||{},ee||{}),C="FrmGrid_"+y,e=C,t="TblGrid_"+y,D="#"+jqID(t),S=D+"_2",A={themodal:"editmod"+y,modalhead:"edithd"+y,modalcontent:"editcnt"+y,resizeAlso:C},r="#"+jqID(A.themodal),i=v.gBox,q=v.colModel,T=v.iColByName,a=1,o=0,l=x.commonIconClass,F=function(){jgrid.hideModal(r,{gb:i,jqm:x.jqModal,onClose:x.onClose,removemodal:x.removemodal})},d=n.call(m,"errors.errcap"),s=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift("AddEdit"),e.unshift(x),jgridFeedback.apply(g,e)},M=getGuiStateStyles.call(g,"hover"),R=getGuiStateStyles.call(g,"disabled"),c=getGuiStateStyles.call(g,"select"),B=getGuiStateStyles.call(g,"active"),u=getGuiStateStyles.call(g,"error"),P=($(r).remove(),C="#"+jqID(C),"new"===K?(K="_empty",w="add",x.caption=x.addCaption):(x.caption=x.editCaption,w="edit"),!0),p=(!x.checkOnUpdate||!0!==x.jqModal&&void 0!==x.jqModal||x.modal||(P=!1),isNaN(x.dataheight)?x.dataheight:x.dataheight+"px"),h=isNaN(x.datawidth)?x.datawidth:x.datawidth+"px",e=$("<form name='FormPost' id='"+e+"' class='FormGrid' onSubmit='return false;' style='width:"+h+";overflow:auto;position:relative;height:"+p+";'></form>").data("disabled",!1),f=$("<table id='"+t+"' class='EditTable'><tbody></tbody></table>"),h=($(q).each(function(){var e=this.formoptions;a=Math.max(a,e&&e.colpos||0),o=Math.max(o,e&&e.rowpos||0)}),$(e).append(f),$("<tr id='FormError' style='display:none'><td class='"+u+"' colspan='"+2*a+"'>&#160;</td></tr>"));if(h[0].rp=0,$(f).append(h),(h=$("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*a+"'>"+(x.topinfo||"&#160;")+"</td></tr>"))[0].rp=0,$(f).append(h),s("beforeInitData",e,w)){null!=(p=jgrid.detectRowEditing.call(g,K))&&("inlineEditing"===p.mode?base.restoreRow.call(m,K):(p=p.savedRow,u=g.rows[p.id],base.restoreCell.call(m,p.id,p.ic),$(u.cells[p.ic]).removeClass("edit-cell "+c),$(u).addClass(c).attr({"aria-selected":"true",tabindex:"0"})));for(var h="rtl"===v.direction,p=h?"nData":"pData",u=h?"pData":"nData",_=K,c=f,I=a,O=0,G=!1,k=$(c),z="<td class='CaptionTD"+((c=String(x.labelswidth)+(!x.labelswidth||isNaN(x.labelswidth)?"":"px"))?"' style='width:"+c+";":"")+"'>&#160;</td><td class='DataTD'>&#160;</td>",L="",V=1;V<=I;V++)L+=z;"_empty"!==_&&(G=base.getInd.call(m,_)),$(q).each(function(e){var t,r,i,a=this,o=a.name,l=a.editable,n=!1,s=!1,d="_empty"===_?"addForm":"editForm";switch($.jgrid.isFunction(l)&&(l=l.call(g,{rowid:_,iCol:e,iRow:G,cmName:o,cm:a,mode:d})),t=!(a.editrules&&!0===a.editrules.edithidden||!0!==a.hidden&&"hidden"!==l),String(l).toLowerCase()){case"hidden":l=!0;break;case"disabled":n=l=!0;break;case"readonly":s=l=!0}if("cb"!==o&&"subgrid"!==o&&!0===l&&"rn"!==o){if(!1===G)r="";else{u=$(g.rows[G].cells[e]);try{r=$.unformat.call(g,u,{rowId:_,colModel:a},e)}catch(e){r=a.edittype&&"textarea"===a.edittype?u.text():u.html()}isEmptyString(r)&&(r="")}var c,u=$.extend({},a.editoptions||{},{id:o,name:o,rowId:_,mode:d,cm:a,iCol:e}),d=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},a.formoptions||{}),p=parseInt(d.rowpos,10)||O+1,h=parseInt(2*(parseInt(d.colpos,10)||1),10),f=("_empty"===_&&u.defaultValue&&(r=$.jgrid.isFunction(u.defaultValue)?u.defaultValue.call(g):u.defaultValue),a.edittype||(a.edittype="text"),v.autoEncodeOnEdit&&(r=jgrid.oldDecodePostedData(r)),i=jgrid.createEl.call(g,a.edittype,u,r,!1,$.extend({},jgrid.ajaxOptions,v.ajaxSelectOptions||{})),(x.checkOnSubmit||x.checkOnUpdate)&&(x._savedData[o]=r),$(i).addClass("FormElement"),-1<$.inArray(a.edittype,["text","textarea","checkbox","password","select"])&&$(i).addClass(getGuiStyles.call(g,"dialog.dataField")),c=k.find("tr[data-rowpos="+p+"]"),d.rowabove&&(f=$("<tr><td class='contentinfo' colspan='"+2*I+"'>"+d.rowcontent+"</td></tr>"),k.append(f),f[0].rp=p),0===c.length&&(c=$("<tr data-rowpos='"+p+"'></tr>").addClass("FormData").attr("id","tr_"+o),$(c).append(L),k.append(c),c[0].rp=p),$("td:eq("+(h-2)+")",c[0])),p=$("td:eq("+(h-1)+")",c[0]),h=(f.html(void 0===d.label?v.colNames[e]:d.label||"&#160;"),p[isEmptyString(p.html())?"html":"append"](d.elmprefix));h.append(i).append(d.elmsuffix),"INPUT"===i.tagName.toUpperCase()&&a.createColumnIndex&&u.generateDatalist&&null!=(c=m.jqGrid("generateDatalistFromColumnIndex",a.name))&&0<c.length&&($(i).attr("list","dl_"+i.id),h.append(c.attr("id","dl_"+i.id))),n?(f.addClass(R),p.addClass(R),$(i).prop("readonly",!0),$(i).prop("disabled",!0)):s&&$(i).prop("readonly",!0),"custom"===a.edittype&&$.jgrid.isFunction(u.custom_value)&&u.custom_value.call(g,$("#"+jqID(o),C),"set",r),jgrid.bindEv.call(g,i,u),t&&f.add(p).css("visibility","hidden"),O,O++}}),hideRowsWithoutVissibleCells(k),0<O&&((c=$("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*I-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+y+"_id' value='"+_+"'/></td></tr>"))[0].rp=O+999,k.append(c),x.checkOnSubmit||x.checkOnUpdate)&&(x._savedData[y+"_id"]=_);var N,c=builderFmButon.call(g,p,"",mergeCssClasses(l,x.prevIcon),"","left"),p=builderFmButon.call(g,u,"",mergeCssClasses(l,x.nextIcon),"","right"),u=builderFmButon.call(g,"sData",x.bSubmit),H=builderFmButon.call(g,"cData",x.bCancel),t="<div class='"+getGuiStyles.call(g,"dialog.footer")+"'><table class='EditTable' id='"+t+"_2'><tbody><tr><td colspan='2'><hr class='"+getGuiStyles.call(g,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+v.direction+"'>"+(h?p+c:c+p)+"</td><td class='EditButton EditButton-"+v.direction+"'>"+u+"&#160;"+H+"</td></tr>",W=(t=t+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(x.bottominfo||"&#160;")+"</td></tr>")+"</tbody></table></div>",0<o&&(N=[],$.each($(f)[0].rows,function(e,t){N[e]=t}),N.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(N,function(e,t){$("tbody",f).append(t)})),x.gbox=i,!1),h=(!0===x.closeOnEscape&&(x.closeOnEscape=!1,W=!0),$("<div></div>").append($("<div class='"+getGuiStyles.call(g,"dialog.body")+"'></div>").append(e)).append(t)),e=(jgrid.createModal.call(g,A,h,x,v.gView,$(i)[0]),x.topinfo&&$(".tinfo",D).show(),x.bottominfo&&$(".binfo",S).show(),t=null,$(r).keydown(function(e){var t,r,i=(e.target.tagName||"").toUpperCase();if(!0===$(C).data("disabled"))return!1;if(13===e.which&&"TEXTAREA"!==i){if(r=(t=$(S).find(":focus")).attr("id"),0<t.length&&0<=$.inArray(r,["pData","nData","cData"]))return t.trigger("click"),!1;if(!0===x.savekey[0]&&13===x.savekey[1])return $("#sData",S).trigger("click"),!1}return!0===x.savekey[0]&&e.which===x.savekey[1]&&"TEXTAREA"!==i?($("#sData",S).trigger("click"),!1):27===e.which?(E()&&W&&F(),!1):!0===x.navkeys[0]?"_empty"===$("#id_g",D).val()||(e.which===x.navkeys[1]?($("#pData",S).trigger("click"),!1):e.which===x.navkeys[2]?($("#nData",S).trigger("click"),!1):void 0):void 0}),x.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span",r).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close",r).off("click").click(function(){return E()&&F(),!1})),addFormIcon($("#sData",S),x.saveicon,l),addFormIcon($("#cData",S),x.closeicon,l),(x.checkOnSubmit||x.checkOnUpdate)&&(u=builderFmButon.call(g,"sNew",x.bYes),p=builderFmButon.call(g,"nNew",x.bNo),H=builderFmButon.call(g,"cNew",x.bExit),c=x.zIndex||999,$("<div class='"+x.overlayClass+" jqgrid-overlay confirm' style='z-index:"+ ++c+";display:none;'>&#160;</div><div class='"+getGuiStyles.call(g,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(1+c)+"'>"+x.saveData+"<br/><br/>"+u+p+H+"</div>").insertAfter(C),$("#sNew",r).click(function(){return X(),$(C).data("disabled",!1),$(".confirm",r).hide(),!1}),$("#nNew",r).click(function(){return $(".confirm",r).hide(),$(C).data("disabled",!1),setTimeout(function(){$(C).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()},0),!1}),$("#cNew",r).click(function(){return $(".confirm",r).hide(),$(C).data("disabled",!1),F(),!1})),s("onInitializeForm",$(C),w),"_empty"!==K&&x.viewPagerButtons?$("#pData,#nData",S).show():$("#pData,#nData",S).hide(),s("beforeShowForm",$(C),w),$(r).data("onClose",x.onClose),jgrid.viewModal.call(g,r,{gbox:i,jqm:x.jqModal,overlay:x.overlay,modal:x.modal,overlayClass:x.overlayClass,toTop:x.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),P||$("."+jqID(x.overlayClass)).click(function(){return E()&&F(),!1}),$(".fm-button",r).hover(function(){$(this).addClass(M)},function(){$(this).removeClass(M)}),$("#sData",S).click(function(){return b={},$("#FormError",D).hide(),U(),"_empty"!==b[y+"_id"]&&!0===x.checkOnSubmit&&Q(b,x._savedData)?($(C).data("disabled",!0),$(".confirm",r).show()):X(),!1}),$("#cData",S).click(function(){return E()&&F(),!1}),$("#nData",S).click(function(){if(E()){$("#FormError",D).hide();var e=Z();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){if(!s("onclickPgButtons","next",$(C),e[1][e[0]]))return!1;Y(e[1][e[0]+1],C),j.call(m,e[1][e[0]+1]),s("afterclickPgButtons","next",$(C),e[1][e[0]+1]),J(e[0]+1,e)}}return!1}),$("#pData",S).click(function(){if(E()){$("#FormError",D).hide();var e=Z();if(-1!==e[0]&&e[1][e[0]-1]){if(!s("onclickPgButtons","prev",$(C),e[1][e[0]]))return!1;if(hasOneFromClasses($("#"+jqID(e[1][e[0]-1])),R))return!1;Y(e[1][e[0]-1],C),j.call(m,e[1][e[0]-1]),s("afterclickPgButtons","prev",$(C),e[1][e[0]-1]),J(e[0]-1,e)}}return!1}),s("afterShowForm",$(C),w),Z());J(e[0],e)}}function U(){$(D+" > tbody > tr > td .FormElement").each(function(){var e,t=$(".customelement",this),r=t.length?t.attr("name"):this.name,i=T[r],a=void 0!==i&&q[i]||{},o=a.editoptions||{};if(t.length&&$.jgrid.isFunction(o.custom_value)){try{if(b[r]=o.custom_value.call(g,$("#"+jqID(r),D),"get"),void 0===b[r])throw"e1"}catch(e){"e1"===e?jgrid.info_dialog.call(g,d,"function 'custom_value' "+x.msg.novalue,x.bClose):jgrid.info_dialog.call(g,d,e.message,x.bClose)}return!0}switch(e=$(this)[0].type){case"checkbox":var l="string"==typeof o.value?o.value.split(":"):["Yes","No"];b[r]=$(this).is(":checked")?l[0]:l[1];break;case"select-one":b[r]=$("option:selected",this).val();break;case"select-multiple":b[r]=$(this).val(),b[r]=b[r]?b[r].join(","):"";$("option:selected",this).each(function(e,t){e,$(t).text()});break;case"date":b[r]=$(this).val(),3===String(b[r]).split("-").length&&(l=(a.formatoptions||{}).newformat||n.call(m,"formatter.date.newformat"),b[r]=jgrid.parseDate.call(m[0],"Y-m-d",b[r],l));break;default:void 0!==e&&$.inArray(e,x.skipPostTypes)<0&&(b[r]=$(this).val())}})}function Y(e,a){var o,t,r,i,l,n=0,s=((x.checkOnSubmit||x.checkOnUpdate)&&(x._savedData={},x._savedData[y+"_id"]=e),v.colModel);"_empty"===e?($(s).each(function(){o=this.name,i=$.extend({},this.editoptions||{}),(t=$("#"+jqID(o),a))&&t.length&&null!==t[0]&&(r="","custom"===this.edittype&&$.jgrid.isFunction(i.custom_value)?i.custom_value.call(g,t,"set",r):i.defaultValue?(r=$.jgrid.isFunction(i.defaultValue)?i.defaultValue.call(g):i.defaultValue,"checkbox"===t[0].type?(i=r.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==i?(t[0].checked=!0,t[0].defaultChecked=!0,t[0].value=r):(t[0].checked=!1,t[0].defaultChecked=!1):t.val(r)):"checkbox"===t[0].type?(t[0].checked=!1,t[0].defaultChecked=!1,r=$(t).data("offval")):t[0].type&&"select"===t[0].type.substr(0,6)?t[0].selectedIndex=0:t.val(r),!0!==x.checkOnSubmit&&!x.checkOnUpdate||(x._savedData[o]=r))}),$("#id_g",a).val(e)):(l=base.getInd.call(m,e,!0))&&($(l.cells).filter("td[role=gridcell]").each(function(r){var t;if("cb"!==(o=s[r].name)&&"subgrid"!==o&&"rn"!==o&&!0===s[r].editable){try{t=$.unformat.call(g,$(this),{rowId:e,colModel:s[r]},r)}catch(e){t="textarea"===s[r].edittype?$(this).text():$(this).html()}switch(v.autoEncodeOnEdit&&(t=jgrid.oldDecodePostedData(t)),!0!==x.checkOnSubmit&&!x.checkOnUpdate||(x._savedData[o]=t),o="#"+jqID(o),s[r].edittype){case"password":case"text":case"button":case"image":case"textarea":isEmptyString(t)&&(t=""),$(o,a).val(t);break;case"select":var i=t.split(","),i=$.map(i,function(e){return $.jgrid.trim(e)});$(o+" option",a).each(function(){var e=this,t=$(e),t=$.jgrid.trim(t.val());if(s[r].editoptions.multiple||i[0]!==t?s[r].editoptions.multiple&&-1<(t=$.inArray(t,i))?(i.splice(t,1),e.selected=!0):e.selected=!1:(i.splice(0,1),e.selected=!0),0===i.length)return!1}),0<i.length&&$(o+" option",a).each(function(){var e=$(this),e=$.jgrid.trim(e.text());if(s[r].editoptions.multiple||$.jgrid.trim(t)!==e&&i[0]!==e?s[r].editoptions.multiple&&-1<(e=$.inArray(e,i))&&(i.splice(e,1),this.selected=!0):(i.splice(0,1),this.selected=!0),0===i.length)return!1});break;case"checkbox":t=String(t),t=s[r].editoptions&&s[r].editoptions.value?s[r].editoptions.value.split(":")[0]===t:(t=t.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==t,$(o,a).prop({checked:t,defaultChecked:t});break;case"custom":try{if(!s[r].editoptions||!$.jgrid.isFunction(s[r].editoptions.custom_value))throw"e1";s[r].editoptions.custom_value.call(g,$(o,a),"set",t)}catch(e){"e1"===e?jgrid.info_dialog.call(g,d,"function 'custom_value' "+x.msg.nodefined,x.bClose):jgrid.info_dialog.call(g,d,e.message,x.bClose)}}n++}}),0<n)&&$("#id_g",D).val(e)}function X(){var a,o,e,t,r,i,l,n,s=[!0,"",""],d=s,c={},u=v.prmNames,p=base.getInd.call(m,K),h=!1===p?null:g.rows[p],f=m.triggerHandler("jqGridAddEditBeforeCheckValues",[b,$(C),w]);for(e in f&&"object"==typeof f&&(b=f),p=!1===p?-1:p,b=$.jgrid.isFunction(x.beforeCheckValues)&&(f=x.beforeCheckValues.call(g,b,$(C),w))&&"object"==typeof f?f:b)if(b.hasOwnProperty(e)&&(i=v.iColByName[e],!1===(d=null!=(d=jgrid.checkValues.call(g,b[e],e,void 0,void 0,{oldValue:"_empty"===K?null:base.getCell.call(m,K,i),newValue:b[e],cmName:e,rowid:K,cm:q[i],iCol:i,iRow:p,tr:h,td:null==h?null:h.cells[i],mode:"_empty"===K?"addForm":"editForm"}))&&!0!==d?d:s)[0]))break;if(l=x.url||v.editurl,$.each(q,function(e,t){var r=t.name;b.hasOwnProperty(r)&&("date"!==t.formatter||null!=t.formatoptions&&!0===t.formatoptions.sendFormatted||(b[r]=$.unformat.date.call(g,b[r],t)),"clientArray"!==l)&&t.editoptions&&!0===t.editoptions.NullIfEmpty&&""===b[r]&&(b[r]="null")}),d[0]&&(void 0===(c=m.triggerHandler("jqGridAddEditClickSubmit",[x,b,w]))&&$.jgrid.isFunction(x.onclickSubmit)&&(c=x.onclickSubmit.call(g,x,b,w)||{}),(d=null!=(d=m.triggerHandler("jqGridAddEditBeforeSubmit",[b,$(C),w]))&&!0!==d?d:s)[0])&&$.jgrid.isFunction(x.beforeSubmit)&&(null!=(d=x.beforeSubmit.call(g,b,$(C),w))&&!0!==d||(d=s)),d[0]&&!x.processing){if(x.processing=!0,$("#sData",S).addClass(B),f=x.url||v.editurl,o=u.oper,a="clientArray"===f&&!1!==v.keyName?v.keyName:u.id,b[o]="_empty"===$.jgrid.trim(b[y+"_id"])?u.addoper:u.editoper,(b[o]!==u.addoper||void 0===b[a])&&(b[a]=b[y+"_id"]),delete b[y+"_id"],b=$.extend(b,x.editData,c),!0===v.treeGrid)for(t in b[o]===u.addoper&&(n=v.selrow,c="adjacency"===v.treeGridModel?v.treeReader.parent_id_field:"parent_id",b[c]=n),v.treeReader)v.treeReader.hasOwnProperty(t)&&(r=v.treeReader[t],!b.hasOwnProperty(r)||b[o]===u.addoper&&"parent_id_field"===t||delete b[r]);b[a]=jgrid.stripPref(v.idPrefix,b[a]),v.autoEncodeOnEdit&&$.each(b,function(e,t){$.jgrid.isFunction(t)||(b[e]=jgrid.oldEncodePostedData(t))});c=$.extend({url:$.jgrid.isFunction(f)?f.call(g,b[a],w,b,x):f,type:$.jgrid.isFunction(x.mtype)?x.mtype.call(g,w,x,b[a],b):x.mtype,data:jgrid.serializeFeedback.call(g,($.jgrid.isFunction(x.serializeEditData)?x:v).serializeEditData,"jqGridAddEditSerializeEditData",b),complete:function(e,t){if(m.jqGrid("progressBar",{method:"hide",loadtype:x.saveui}),$("#sData",S).removeClass(B),b[a]=$("#id_g",D).val(),300<=e.status&&304!==e.status||0===e.status&&4===e.readyState?(d[0]=!1,d[1]=m.triggerHandler("jqGridAddEditErrorTextFormat",[e,w]),$.jgrid.isFunction(x.errorTextFormat)?d[1]=x.errorTextFormat.call(g,e,w):d[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):(d=null!=(d=m.triggerHandler("jqGridAddEditAfterSubmit",[e,b,w]))&&!0!==d?d:s)[0]&&$.jgrid.isFunction(x.afterSubmit)&&(null!=(d=x.afterSubmit.call(g,e,b,w))&&!0!==d||(d=s)),!1===d[0])$("#FormError>td",D).html(d[1]),$("#FormError",D).show();else{v.autoEncodeOnEdit&&$.each(b,function(e,t){b[e]=jgrid.oldDecodePostedData(t)});var r,i,t=[$.extend({},x.reloadGridOptions||{})];if(b[o]===u.addoper?(d[2]||(d[2]=jgrid.randId()),null==b[a]||"_empty"===b[a]||b[o]===u.addoper?b[a]=d[2]:d[2]=b[a],x.reloadAfterSubmit?m.trigger("reloadGrid",t):!0===v.treeGrid?base.addChildNode.call(m,d[2],n,b):base.addRowData.call(m,d[2],b,x.addedrow),x.closeAfterAdd?(!0!==v.treeGrid&&j.call(m,d[2]),F()):x.clearAfterAdd&&Y("_empty",C)):(x.reloadAfterSubmit?(m.trigger("reloadGrid",t),x.closeAfterEdit||setTimeout(function(){j.call(m,b[a])},1e3)):(!0===v.treeGrid?base.setTreeRow:base.setRowData).call(m,b[a],b),x.closeAfterEdit&&F()),$.jgrid.isFunction(x.afterComplete)&&(r=e,setTimeout(function(){m.triggerHandler("jqGridAddEditAfterComplete",[r,b,$(C),w]),x.afterComplete.call(g,r,b,$(C),w),r=null},50)),x.checkOnSubmit||x.checkOnUpdate)if($(C).data("disabled",!1),"_empty"!==x._savedData[y+"_id"])for(i in x._savedData)x._savedData.hasOwnProperty(i)&&b[i]&&(x._savedData[i]=b[i])}x.processing=!1;try{$(C).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()}catch(e){}}},jgrid.ajaxOptions,x.ajaxEditOptions);c.url||x.useDataProxy||($.jgrid.isFunction(v.dataProxy)?x.useDataProxy=!0:(d[0]=!1,d[1]+=" "+jgrid.errors.nourl)),d[0]&&(m.jqGrid("progressBar",{method:"show",loadtype:x.saveui,htmlcontent:x.savetext}),x.useDataProxy?!1===(f=void 0===(f=v.dataProxy.call(g,c,"set_"+y))?[!0,""]:f)[0]?(d[0]=!1,d[1]=f[1]||"Error deleting the selected row!"):(c.data.oper===u.addoper&&x.closeAfterAdd&&F(),c.data.oper===u.editoper&&x.closeAfterEdit&&F()):"clientArray"===c.url?(x.reloadAfterSubmit=!1,b=c.data,c.complete({status:200,statusText:""},"")):$.ajax(c))}!1===d[0]&&($("#FormError>td",D).html(d[1]),$("#FormError",D).show())}function Q(e,t){var r,i=!1;for(r in e)if(e.hasOwnProperty(r)&&String(e[r])!==String(t[r])){i=!0;break}return i}function E(){var e=!0;return $("#FormError",D).hide(),x.checkOnUpdate&&(b={},U(),Q(b,x._savedData))&&($(C).data("disabled",!0),$(".confirm",r).show(),e=!1),e}function J(e,t){var r=t[1].length-1;0===e||void 0!==t[1][e-1]&&hasOneFromClasses($("#"+jqID(t[1][e-1])),R)?$("#pData",S).addClass(R):$("#pData",S).removeClass(R),e===r||void 0!==t[1][e+1]&&hasOneFromClasses($("#"+jqID(t[1][e+1])),R)?$("#nData",S).addClass(R):$("#nData",S).removeClass(R)}function Z(){var e=base.getDataIDs.call(m),t=$("#id_g",D).val();return[$.inArray(t,e),e]}})},viewGridRow:function(X,Q){return this.each(function(){var o=this,a=$(o),l=o.p;if(o.grid&&null!=l&&X){var e=l.id,i=$.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},base.getGridRes.call(a,"view"),jgrid.view||{},l.formViewing||{},Q||{}),n="#ViewGrid_"+jqID(e),s="#ViewTbl_"+jqID(e),d=s+"_2",t="ViewGrid_"+e,r="ViewTbl_"+e,c=i.commonIconClass,e={themodal:"viewmod"+e,modalhead:"viewhd"+e,modalcontent:"viewcnt"+e,resizeAlso:t},u="#"+jqID(e.themodal),p=l.gBox,h=l.colModel,f=1,g=0,m=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift("View"),e.unshift(i),jgridFeedback.apply(o,e)},v=function(){jgrid.hideModal(u,{gb:p,jqm:i.jqModal,onClose:i.onClose,removemodal:i.removemodal})},A=getGuiStateStyles.call(o,"hover"),b=getGuiStateStyles.call(o,"disabled"),w=isNaN(i.dataheight)?i.dataheight:i.dataheight+"px",y=isNaN(i.datawidth)?i.datawidth:i.datawidth+"px",t=$("<div class='"+getGuiStyles.call(o,"dialog.body")+"'><form name='FormPost' id='"+t+"' class='FormGrid' style='width:"+y+";overflow:auto;position:relative;height:"+w+";'></form></div>"),y=t.children("form.FormGrid"),j=$("<table id='"+r+"' class='EditTable'><tbody></tbody></table>");if($(u).remove(),$(h).each(function(){var e=this.formoptions;f=Math.max(f,e&&e.colpos||0),g=Math.max(g,e&&e.rowpos||0)}),y.append(j),m("beforeInitData",y)){for(var x,C,D,S,T,q,w=X,y=j,F=f,R=0,M=base.getInd.call(a,w),B=getGuiStyles.call(o,"dialog.viewData"),_=$(y),P=getGuiStyles.call(o,"dialog.viewLabel"),y=String(i.labelswidth)+(!i.labelswidth||isNaN(i.labelswidth)?"":"px"),z="<td class='"+getGuiStyles.call(o,"dialog.viewCellLabel","CaptionTD form-view-label")+(y?"' style='width:"+y+";":"")+"'>&#160;</td><td class='"+getGuiStyles.call(o,"dialog.viewCellData","DataTD form-view-data")+"'>&#160;</td>",L="",V=["integer","number","currency"],I=0,O=0,H=0;H<F;H++)L+=z;$(h).each(function(){var e=this;(C=(!e.editrules||!0!==e.editrules.edithidden)&&!0===e.hidden)||"right"!==e.align||(e.formatter&&-1!==$.inArray(e.formatter,V)?I=Math.max(I,parseInt(e.width,10)):O=Math.max(O,parseInt(e.width,10)))}),S=0!==I?I:0!==O?O:0,$(h).each(function(e){var t,r,i,a=this;x=a.name,C=(!a.editrules||!0!==a.editrules.edithidden)&&!0===a.hidden,q="boolean"!=typeof a.viewable||a.viewable,"cb"!==x&&"subgrid"!==x&&"rn"!==x&&q&&(q=!1===M?"":jgrid.getDataFieldOfCell.call(o,o.rows[M],e).html(),T="right"===a.align&&0!==S,a=$.extend({},{rowabove:!1,rowcontent:""},a.formoptions||{}),i=parseInt(a.rowpos,10)||R+1,t=parseInt(2*(parseInt(a.colpos,10)||1),10),a.rowabove&&(r=$("<tr><td class='contentinfo' colspan='"+2*F+"'>"+a.rowcontent+"</td></tr>"),_.append(r),r[0].rp=i),0===(D=_.find("tr[data-rowpos="+i+"]")).length&&((D=$("<tr data-rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+x)).append(L),_.append(D),D[0].rp=i),r=void 0===a.label?l.colNames[e]:a.label,i=$("td:eq("+(t-1)+")",D[0]),(a=$("td:eq("+(t-2)+")",D[0])).html("<label for='"+x+"'"+(P?" class='"+P+"'>":">")+(r||"&nbsp;")+"</label>"),i[isEmptyString(i.html())?"html":"append"]("<span id='"+x+"'"+(B?" class='"+B+"'>":">")+(q||"&nbsp;")+"</span>").attr("id","v_"+x),T&&$("td:eq("+(t-1)+") span",D[0]).css({"text-align":"right",width:S+"px"}),C&&a.add(i).css("visibility","hidden"),R,R++)}),hideRowsWithoutVissibleCells(_),0<R&&((y=$("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*F-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+w+"'/></td></tr>"))[0].rp=R+99,_.append(y));var G,w="rtl"===l.direction,y=w?"pData":"nData",W=builderFmButon.call(o,w?"nData":"pData","",mergeCssClasses(c,i.prevIcon),"","left"),y=builderFmButon.call(o,y,"",mergeCssClasses(c,i.nextIcon),"","right"),U=builderFmButon.call(o,"cData",i.bClose),t=(0<g&&(G=[],$.each($(j)[0].rows,function(e,t){G[e]=t}),G.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),$.each(G,function(e,t){$("tbody",j).append(t)})),i.gbox=p,$("<div></div>").append(t).append("<div class='"+getGuiStyles.call(o,"dialog.footer")+"'><table border='0' class='EditTable' id='"+r+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+l.direction+"' width='"+(i.labelswidth||"auto")+"'>"+(w?y+W:W+y)+"</td><td class='EditButton EditButton-"+l.direction+"'>"+U+"</td></tr></tbody></table></div>")),r=(jgrid.createModal.call(o,e,t,i,l.gView,$(l.gView)[0]),i.viewPagerButtons||$("#pData, #nData",d).hide(),$(u).keydown(function(e){var t,r;return!0!==$(n).data("disabled")&&(13===e.which&&(r=(t=$(d).find(":focus")).attr("id"),0<t.length)&&0<=$.inArray(r,["pData","nData","cData"])?(t.trigger("click"),!1):27===e.which?(i.closeOnEscape&&v(),!1):!0===i.navkeys[0]?e.which===i.navkeys[1]?($("#pData",d).trigger("click"),!1):e.which===i.navkeys[2]?($("#nData",d).trigger("click"),!1):void 0:void 0)}),addFormIcon($("#cData",d),i.closeicon,c),m("beforeShowForm",$(n)),jgrid.viewModal.call(o,u,{gbox:p,jqm:i.jqModal,overlay:i.overlay,toTop:i.toTop,modal:i.modal,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),$(".fm-button:not(."+b.split(" ").join(".")+")",d).hover(function(){$(this).addClass(A)},function(){$(this).removeClass(A)}),k(),$("#cData",d).click(function(){return v(),!1}),$("#nData",d).click(function(){$("#FormError",s).hide();var e=E();if(e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]){if(!m("onclickPgButtons","next",$(n),e[1][e[0]]))return!1;Y(e[1][e[0]+1]),base.setSelection.call(a,e[1][e[0]+1]),m("afterclickPgButtons","next",$(n),e[1][e[0]+1]),N(e[0]+1,e)}return k(),!1}),$("#pData",d).click(function(){$("#FormError",s).hide();var e=E();if(-1!==e[0]&&e[1][e[0]-1]){if(!m("onclickPgButtons","prev",$(n),e[1][e[0]]))return!1;Y(e[1][e[0]-1]),base.setSelection.call(a,e[1][e[0]-1]),m("afterclickPgButtons","prev",$(n),e[1][e[0]-1]),N(e[0]-1,e)}return k(),!1}),E());N(r[0],r)}}function k(){!0!==i.closeOnEscape&&!0!==i.navkeys[0]||setTimeout(function(){$("#cData").focus()},0)}function Y(e){var t,r=0,i=base.getInd.call(a,e,!0);i&&($("td",i).each(function(e){t=h[e],"cb"!==(t=t.name)&&"subgrid"!==t&&"rn"!==t&&(t=jqID("v_"+t),$("#"+t+" span",s).html(jgrid.getDataFieldOfCell.call(o,i,e).html()),r++)}),0<r)&&$("#id_g",s).val(e)}function N(e,t){var r=t[1].length-1;0===e||void 0!==t[1][e-1]&&hasOneFromClasses($("#"+jqID(t[1][e-1])),b)?$("#pData",d).addClass(b):$("#pData",d).removeClass(b),e===r||void 0!==t[1][e+1]&&hasOneFromClasses($("#"+jqID(t[1][e+1])),b)?$("#nData",d).addClass(b):$("#nData",d).removeClass(b)}function E(){var e=base.getDataIDs.call(a),t=$("#id_g",s).val();return[$.inArray(t,e),e]}})},delGridRow:function(y,j){return this.each(function(){var l=this,n=l.p,s=$(l);if(l.grid&&null!=n&&y){var d,c,u,p=n.id,h=$.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},idSeparator:",",onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1,delui:"disable",deltext:base.getGridRes.call(s,"defaults.deltext")||"Deleting..."},base.getGridRes.call(s,"del"),jgrid.del||{},n.formDeleting||{},j||{}),e="DelTbl_"+p,f="#DelTbl_"+jqID(p),t={themodal:"delmod"+p,modalhead:"delhd"+p,modalcontent:"delcnt"+p,resizeAlso:e},g="#"+jqID(t.themodal),m=n.gBox,r=h.commonIconClass,v=function(){var e=$.makeArray(arguments);return e.unshift(""),e.unshift("Delete"),e.unshift(h),jgridFeedback.apply(l,e)},i=getGuiStateStyles.call(l,"hover"),b=getGuiStateStyles.call(l,"active"),a=getGuiStateStyles.call(l,"error");if(Array.isArray(y)||(y=[String(y)]),void 0!==$(g)[0]){if(!v("beforeInitData",$(f)))return;$("#DelData>td",f).text(y.join(h.idSeparator)).data("rowids",y),$("#DelError",f).hide(),!0===h.processing&&(h.processing=!1,$("#dData",f).removeClass(b)),v("beforeShowForm",$(f)),jgrid.viewModal.call(l,g,{gbox:m,jqm:h.jqModal,jqM:!1,overlay:h.overlay,toTop:h.toTop,modal:h.modal})}else{var o=isNaN(h.dataheight)?h.dataheight:h.dataheight+"px",w=isNaN(h.datawidth)?h.datawidth:h.datawidth+"px",w="<div class='"+getGuiStyles.call(l,"dialog.body")+"'><div id='"+e+"' class='formdata' style='width:"+w+";overflow:auto;position:relative;height:"+o+";'>",o=(w=(w=(w=w+"<table class='DelTable'><tbody>"+("<tr id='DelError' style='display:none'><td class='"+a+"'></td></tr>"))+("<tr id='DelData' style='display:none'><td >"+y.join(h.idSeparator)+"</td></tr>"))+("<tr><td class='delmsg'>"+h.msg+"</td></tr>")+"</tbody></table></div></div>",builderFmButon.call(l,"dData",h.bSubmit)),a=builderFmButon.call(l,"eData",h.bCancel);if(w+="<div class='"+getGuiStyles.call(l,"dialog.footer")+"'><table class='EditTable' id='"+e+"_2'><tbody><tr><td><hr class='"+getGuiStyles.call(l,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+n.direction+"'>"+o+"&#160;"+a+"</td></tr></tbody></table></div>",h.gbox=m,jgrid.createModal.call(l,t,w,h,n.gView,$(n.gView)[0]),$("#DelData>td",f).data("rowids",y),!v("beforeInitData",$(w)))return;$(".fm-button",f+"_2").hover(function(){$(this).addClass(i)},function(){$(this).removeClass(i)}),addFormIcon($("#dData",f+"_2"),h.delicon,r),addFormIcon($("#eData",f+"_2"),h.cancelicon,r),$("#dData",f+"_2").click(function(){var e,i=[!0,""],t=$("#DelData>td",f),a=t.text(),o=t.data("rowids"),t={};if($.jgrid.isFunction(h.onclickSubmit)&&(t=h.onclickSubmit.call(l,h,a,o)||{}),(i=$.jgrid.isFunction(h.beforeSubmit)?h.beforeSubmit.call(l,a,o)||i:i)[0]&&!h.processing){if(h.processing=!0,c=n.prmNames,d=$.extend({},h.delData,t),u=c.oper,d[u]=c.deloper,u=c.id,!(a=o.slice()).length)return!1;for(e in a)a.hasOwnProperty(e)&&(a[e]=jgrid.stripPref(n.idPrefix,a[e]));d[u]=a.join(h.idSeparator),$(this).addClass(b);var r,t=h.url||n.editurl,t=$.extend({url:$.jgrid.isFunction(t)?t.call(l,d[u],d,h,o):t,type:h.mtype,data:$.jgrid.isFunction(h.serializeDelData)?h.serializeDelData.call(l,d,o):d,complete:function(e,t){var r;if(s.jqGrid("progressBar",{method:"hide",loadtype:h.delui}),$("#dData",f+"_2").removeClass(b),300<=e.status&&304!==e.status||0===e.status&&4===e.readyState?(i[0]=!1,$.jgrid.isFunction(h.errorTextFormat)?i[1]=h.errorTextFormat.call(l,e):i[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):$.jgrid.isFunction(h.afterSubmit)&&(i=h.afterSubmit.call(l,e,d,o)||[!0]),!1===i[0])$("#DelError>td",f).html(i[1]),$("#DelError",f).show();else{if("local"===n.datatype||!0===n.treeGrid||!h.reloadAfterSubmit)if(!0===n.treeGrid)try{base.delTreeNode.call(s,o[0])}catch(e){}else for(o=o.slice(),r=0;r<o.length;r++)base.delRowData.call(s,o[r]);h.reloadAfterSubmit&&s.trigger("reloadGrid",[$.extend({},h.reloadGridOptions||{})]),setTimeout(function(){v("afterComplete",e,a,$(f),o)},50)}h.processing=!1,i[0]&&jgrid.hideModal(g,{gb:m,jqm:h.jqModal,onClose:h.onClose,removemodal:h.removemodal})}},jgrid.ajaxOptions,h.ajaxDelOptions);t.url||h.useDataProxy||($.jgrid.isFunction(n.dataProxy)?h.useDataProxy=!0:(i[0]=!1,i[1]+=" "+jgrid.errors.nourl)),i[0]&&(s.jqGrid("progressBar",{method:"show",loadtype:h.delui,htmlcontent:h.deltext}),h.useDataProxy?!1===(r=void 0===(r=n.dataProxy.call(l,t,"del_"+p))?[!0,""]:r)[0]?(i[0]=!1,i[1]=r[1]||"Error deleting the selected row!"):jgrid.hideModal(g,{gb:m,jqm:h.jqModal,onClose:h.onClose,removemodal:h.removemodal}):"clientArray"===t.url?(d=t.data,t.complete({status:200,statusText:""},"")):$.ajax(t))}return!1===i[0]&&($("#DelError>td",f).html(i[1]),$("#DelError",f).show()),!1}),$("#eData",f+"_2").click(function(){return jgrid.hideModal(g,{gb:m,jqm:h.jqModal,onClose:h.onClose,removemodal:h.removemodal}),!1}),v("beforeShowForm",$(f)),jgrid.viewModal.call(l,g,{gbox:m,jqm:h.jqModal,overlay:h.overlay,toTop:h.toTop,modal:h.modal})}v("afterShowForm",$(f)),!0===h.closeOnEscape&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+jqID(t.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(A,T,M,B,P,z,L){return"object"==typeof A&&(L=z,z=P,P=B,B=M,M=T,T=A,A=void 0),B=B||{},M=M||{},L=L||{},P=P||{},z=z||{},this.each(function(){var l=this,n=l.p,s=$(l);if(l.grid&&null!=n&&!(l.nav&&0<$(A).find(".navtable").length)){var i=n.id,d=$.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},base.getGridRes.call(s,"nav"),jgrid.nav||{},n.navOptions||{},T||{});d.position=d.position||("rtl"===n.direction?"right":"left");var e,c,t=n.idSel,u=n.gBox,p=d.commonIconClass,h={themodal:"alertmod_"+i,modalhead:"alerthd_"+i,modalcontent:"alertcnt_"+i},a=function(){var e=document.documentElement,t=window,r=1024,i=768,a=s.closest(".ui-jqgrid").offset(),o=(void 0===$("#"+jqID(h.themodal))[0]&&(d.alerttop||d.alertleft||(void 0!==t.innerWidth?(r=t.innerWidth,i=t.innerHeight):null!=e&&void 0!==e.clientWidth&&0!==e.clientWidth&&(r=e.clientWidth,i=e.clientHeight),r=r/2-parseInt(d.alertwidth,10)/2-a.left+(void 0!==t.pageXOffset?t.pageXOffset:(e||document.body.parentNode||document.body).scrollLeft),i=i/2-25-a.top+(void 0!==t.pageYOffset?t.pageYOffset:(e||document.body.parentNode||document.body).scrollTop)),jgrid.createModal.call(l,h,"<div class='"+getGuiStyles.call(l,"dialog.body")+"'><div>"+d.alerttext+"</div></div>",{gbox:u,jqModal:d.jqModal,drag:!0,resize:!0,caption:d.alertcap,top:null!=d.alerttop?d.alerttop:i,left:null!=d.alertleft?d.alertleft:r,width:d.alertwidth,height:d.alertheight,closeOnEscape:d.closeOnEscape,zIndex:d.alertzIndex,removemodal:d.removemodal},n.gView,$(u)[0],!1)),jgrid.viewModal.call(l,"#"+jqID(h.themodal),{gbox:u,toTop:d.alertToTop,jqm:d.jqModal}),$("#"+jqID(h.modalhead)).find(".ui-jqdialog-titlebar-close"));o.attr({tabindex:"0",href:"#",role:"button"}),setTimeout(function(){o.focus()},50)},r=function(e){if(13===e.which&&0<(e=$(this).find(".ui-pg-button").filter(":focus")).length){var t=e[0].id,t=t.substr(0,0<$(this).closest(".ui-jqgrid-toppager").length?t.length-i.length-5:t.length-i.length-1)+"mod"+n.id,r=$(".ui-jqdialog").filter(":visible").map(function(){return this.id});if($.inArray(t,r)<0)return e.trigger("click"),!1}},o=getGuiStateStyles.call(l,"hover"),f=getGuiStateStyles.call(l,"disabled"),g=getGuiStyles.call(l,"navButton","ui-pg-button");if(l.grid){l.modalAlert=a,void 0===A&&(n.pager?(A=n.pager,n.toppager&&(d.cloneToTop=!0)):n.toppager&&(A=n.toppager));var m,v,b,w,y,j,x,C=1,D=["left","center","right"],S="<div class='"+getGuiStyles.call(l,"navButton","ui-pg-button "+getGuiStateStyles.call(l,"disabled"))+"'><span class='ui-separator'></span></div>",q=function(){hasOneFromClasses(this,f)||$(this).addClass(o)},F=function(){$(this).removeClass(o)},R=function(){return hasOneFromClasses(this,f)||($.jgrid.isFunction(d.addfunc)?d.addfunc.call(l,B):base.editGridRow.call(s,"new",B)),!1},_=function(e,t,r){var i;return hasOneFromClasses(this,f)||((i=n.selrow)?$.jgrid.isFunction(e)?e.call(l,i,r):base[t].call(s,i,r):a()),!1},I=function(){return _.call(this,d.editfunc,"editGridRow",M)},O=function(){return _.call(this,d.viewfunc,"viewGridRow",L)},G=function(){var e;return hasOneFromClasses(this,f)||(n.multiselect?0===(e=n.selarrrow).length&&(e=null):e=n.selrow,e?$.jgrid.isFunction(d.delfunc)?d.delfunc.call(l,e,P):base.delGridRow.call(s,e,P):a()),!1},k=function(){return hasOneFromClasses(this,f)||($.jgrid.isFunction(d.searchfunc)?d.searchfunc.call(l,z):base.searchGrid.call(s,z)),!1},N=function(){if(!hasOneFromClasses(this,f)){$.jgrid.isFunction(d.beforeRefresh)&&d.beforeRefresh.call(l),n.search=!1,n.resetsearch=!0;try{if("currentfilter"!==d.refreshstate){n.postData.filters="";try{$("#fbox_"+t.substr(1)).jqFilter("resetFilter")}catch(e){}$.jgrid.isFunction(l.clearToolbar)&&l.clearToolbar(!1)}}catch(e){}switch(d.refreshstate){case"firstpage":s.trigger("reloadGrid",[$.extend({},d.reloadGridOptions||{},{page:1})]);break;case"current":case"currentfilter":s.trigger("reloadGrid",[$.extend({},d.reloadGridOptions||{},{current:!0})])}$.jgrid.isFunction(d.afterRefresh)&&d.afterRefresh.call(l)}return!1},E=function(e,t,r){var i=$("<div class='"+g+"' tabindex='0' role='button'></div>"),a=d[e+"icon"],o=$.jgrid.trim(d[e+"text"]);return i.append("<div class='ui-pg-div'><span class='"+(d.iconsOverText?mergeCssClasses("ui-pg-button-icon-over-text",p,a):mergeCssClasses(p,a))+"'></span>"+(o?"<span class='ui-pg-button-text"+(d.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+o+"</span>":"")+"</div>"),$(c).append(i),i.attr({title:d[e+"title"]||"",id:t||e+"_"+w}).click(r).hover(q,F),i};for(d.cloneToTop&&n.toppager&&(C=2),m=0;m<C;m++){if(c=$("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===n.direction?"right":"left")+";table-layout:auto;'></div>"),0===m?(w=i,(b=A)===n.toppager&&(w+="_top",C=1)):(b=n.toppager,w=i+"_top"),d.add&&E("add",B.id,R),d.edit&&E("edit",M.id,I),d.view&&E("view",L.id,O),d.del&&E("del",P.id,G),(d.add||d.edit||d.del||d.view)&&$(c).append(S),d.search&&(v=E("search",z.id,k),z.showOnLoad)&&!0===z.showOnLoad&&$(v,c).click(),d.refresh&&E("refresh","",N),v=$(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",$("body").append("<div id='testpg2' class='"+getGuiStyles.call(l,"gBox","ui-jqgrid")+"' style='font-size:"+v+";visibility:hidden;' ></div>"),e=$(c).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),$(b+"_"+d.position,b).append(c),d.hideEmptyPagerParts)for(y=0;y<D.length;y++)D[y]!==d.position&&(0===(x=$(b+"_"+D[y],b)).length||0===x[0].childNodes.length?x.hide():1===x[0].childNodes.length&&(j=x[0].firstChild,!$(j).is("table.ui-pg-table")||0!==j.rows&&0!==j.rows[0].cells.length||x.hide()));n._nvtd&&(e>n._nvtd[0]&&($(b+"_"+d.position,b).width(e),n._nvtd[0]=e),n._nvtd[1]=e),l.nav=!0,c.on("keydown.jqGrid",r)}s.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(d,c){return"object"==typeof d&&(c=d,d=void 0),this.each(function(){var t=this,e=t.p;if(t.grid){var r=$.extend({caption:"newButton",title:"",onClickButton:null,position:"last",iconsOverText:!1},base.getGridRes.call($(t),"nav"),jgrid.nav||{},e.navOptions||{},c||{}),i=r.id,a=getGuiStateStyles.call(t,"hover"),o=getGuiStateStyles.call(t,"disabled"),l=getGuiStyles.call(t,"navButton","ui-pg-button");if(void 0===d)if(e.pager){if(base.navButtonAdd.call($(t),e.pager,r),!e.toppager)return;d=e.toppager,i&&(i+="_top")}else e.toppager&&(d=e.toppager);"string"==typeof d&&0!==d.indexOf("#")&&(d="#"+jqID(d));var n,e=$(".navtable",d),s=r.commonIconClass;0<e.length&&(i&&0<e.find("#"+jqID(i)).length||(n=$("<div tabindex='0' role='button'></div>"),"NONE"===r.buttonicon.toString().toUpperCase()?$(n).addClass(l).append("<div class='ui-pg-div'>"+(r.caption?"<span class='ui-pg-button-text"+(r.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+r.caption+"</span>":"")+"</div>"):$(n).addClass(l).append("<div class='ui-pg-div'><span class='"+(r.iconsOverText?mergeCssClasses("ui-pg-button-icon-over-text",s,r.buttonicon):mergeCssClasses(s,r.buttonicon))+"'></span>"+(r.caption?"<span class='ui-pg-button-text"+(r.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+r.caption+"</span>":"")+"</div>"),i&&$(n).attr("id",i),"first"===r.position&&0<e.children("div.ui-pg-button").length?e.children("div.ui-pg-button").first().before(n):e.append(n),$(n,e).attr("title",r.title||"").click(function(e){return hasOneFromClasses(this,o)||$.jgrid.isFunction(r.onClickButton)&&r.onClickButton.call(t,r,e),!1}).hover(function(){hasOneFromClasses(this,o)||$(this).addClass(a)},function(){$(this).removeClass(a)}),$(t).triggerHandler("jqGridResetFrozenHeights")))}})},navSeparatorAdd:function(r,i){return i=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},i||{}),this.each(function(){if(this.grid){var e=this.p,t=getGuiStyles.call(this,"navButton","ui-pg-button "+getGuiStateStyles.call(this,"disabled"));if(void 0===r)if(e.pager){if(base.navSeparatorAdd.call($(this),e.pager,i),!e.toppager)return;r=e.toppager}else e.toppager&&(r=e.toppager);"string"==typeof r&&0!==r.indexOf("#")&&(r="#"+jqID(r));e=$(".navtable",r);0<e.length&&(t="<div class='"+t+"'><span class='"+i.sepclass+"'></span>"+i.sepcontent+"</div>","first"!==i.position||0===e.children("div.ui-pg-button").length?e.append(t):e.children("div.ui-pg-button").first().before(t))}})},GridToForm:function(o,l){return this.each(function(){var e,t,r,i;if(this.grid){var a=base.getRowData.call($(this),o);if(a)for(e in a)if(a.hasOwnProperty(e))if((t=$("[name="+jqID(e)+"]",l)).is("input:radio")||t.is("input:checkbox"))for(r=0;r<t.length;r++)(i=$(t[r])).prop("checked",i.val()===String(a[e]));else t.val(isEmptyString(a[e])?"":a[e])}})},FormToGrid:function(t,i,a,o){return this.each(function(){var e,r;this.grid&&(a=a||"set",o=o||"first",e=$(i).serializeArray(),r={},$.each(e,function(e,t){r[t.name]=t.value}),"add"===a?base.addRowData.call($(this),t,r,o):"set"===a&&base.setRowData.call($(this),t,r))})}}),jgrid.extend({groupingSetup:function(){return this.each(function(){function e(){return""}var t,r,i,a,o,l=this.p,n=l.colModel,s=l.groupingView;if(null===s||"object"!=typeof s&&!$.jgrid.isFunction(s))l.grouping=!1;else if(s.groupField.length){for(void 0===s.visibiltyOnNextGrouping&&(s.visibiltyOnNextGrouping=[]),s.lastvalues=[],s._locgr||(s.groups=[]),s.counters=[],t=0;t<s.groupField.length;t++)s.groupOrder[t]||(s.groupOrder[t]="asc"),s.groupText[t]||(s.groupText[t]="{0}"),"boolean"!=typeof s.groupColumnShow[t]&&(s.groupColumnShow[t]=!0),"boolean"!=typeof s.groupSummary[t]&&(s.groupSummary[t]=!1),s.groupSummaryPos[t]||(s.groupSummaryPos[t]="footer"),a=n[l.iColByName[s.groupField[t]]],!0===s.groupColumnShow[t]?(s.visibiltyOnNextGrouping[t]=!0,null!=a&&!0===a.hidden&&base.showCol.call($(this),s.groupField[t])):(s.visibiltyOnNextGrouping[t]=$("#"+jgrid.jqID(l.id+"_"+s.groupField[t])).is(":visible"),null!=a&&!0!==a.hidden&&base.hideCol.call($(this),s.groupField[t]));for(s.summary=[],s.hideFirstGroupCol&&(s.formatDisplayField[0]=function(e){return e}),r=0,i=n.length;r<i;r++)a=n[r],s.hideFirstGroupCol&&!a.hidden&&s.groupField[0]===a.name&&(a.formatter=e),a.summaryType&&(o={nm:a.name,st:a.summaryType,v:"",sr:a.summaryRound,srt:a.summaryRoundType||"round"},a.summaryDivider&&(o.sd=a.summaryDivider,o.vd=""),s.summary.push(o))}else l.grouping=!1})},groupingPrepare:function(w,y){return this.each(function(){for(var e,t,i,a,r,o,l,n=this,s=n.p,d=s.groupingView,c=d.groups,u=d.counters,p=d.lastvalues,h=d.isInTheSameGroup,f=d.groupField.length,g=!1,m=base.groupingCalculations.handler,v=function(e,t){return null==e&&d.useDefaultValuesOnGrouping&&null!=(t=void 0!==s.iColByName[t]?s.colModel[s.iColByName[t]]:s.additionalProperties[s.iPropByName[t]])&&null!=t.formatter&&(null!=t.formatoptions&&void 0!==t.formatoptions.defaultValue?e=t.formatoptions.defaultValue:"string"==typeof t.formatter&&void 0!==(t=$(n).jqGrid("getGridRes","formatter."+t.formatter+".defaultValue"))&&(e=t)),e},b=0;b<f;b++)if(r=d.groupField[b],o=v(w[r],r),null==(l=null==(l=d.displayField[b])?null:v(w[l],l))&&(l=o),void 0!==o){for(t=[],e=0;e<=b;e++)t.push(w[d.groupField[e]]);for(i={idx:b,dataIndex:r,value:o,displayValue:l,startRow:y,cnt:1,keys:t,summary:[]},a={cnt:1,pos:c.length,summary:$.extend(!0,[],d.summary)},0===y?(c.push(i),p[b]=o,u[b]=a):"object"==typeof o||(Array.isArray(h)&&$.jgrid.isFunction(h[b])?h[b].call(n,p[b],o,b,d):p[b]===o)?g?(c.push(i),p[b]=o,u[b]=a):((a=u[b]).cnt+=1,c[a.pos].cnt=a.cnt):(c.push(i),p[b]=o,g=!0,u[b]=a),c[a.pos].summary=function(){for(var e,t,r=0;r<a.summary.length;r++)e=a.summary[r],t=Array.isArray(e.st)?e.st[i.idx]:e.st,$.jgrid.isFunction(t)?e.v=t.call(n,e.v,e.nm,w,i):(e.v=m.call($(n),t,e.v,e.nm,e.sr,e.srt,w),"avg"===t.toLowerCase()&&e.sd&&(e.vd=m.call($(n),t,e.vd,e.sd,e.sr,e.srt,w)));return a.summary}(),e=a.pos-1;0<=e;e--)if(c[e].idx<c[a.pos].idx){c[a.pos].parentGroupIndex=e,c[a.pos].parentGroup=c[e];break}}}),this},getGroupHeaderIndex:function(e,t){var r=this[0].p,t=t?$(t).closest("tr.jqgroup"):$("#"+jgrid.jqID(e)),i=parseInt(t.data("jqgrouplevel"),10),r=r.id+"ghead_"+i+"_";return isNaN(i)||!t.hasClass("jqgroup")||e.length<=r.length?-1:parseInt(e.substring(r.length),10)},groupingToggle:function(g,m){return this.each(function(){function e(e){return e.find(">td>span.tree-wrap")}function t(e){for(var t=e.length,r=0;r<t;r++)h.push(e[r])}var r,i,a,o=this,l=o.p,n=l.groupingView,s=n.minusicon,d=n.plusicon,c=m?$(m).closest("tr.jqgroup"):$("#"+jgrid.jqID(g)),u=!0,p=!1,h=[],f=parseInt(c.data("jqgrouplevel"),10);for(l.frozenColumns&&0<c.length&&(i=c[0].rowIndex,c=(c=$(o.rows[i])).add(o.grid.fbRows[i])),a=e(c),jgrid.hasAllClasses(a,s)?(a.removeClass(s).addClass(d),p=!0):a.removeClass(d).addClass(s),c=c.next();c.length;c=c.next())if(c.hasClass("jqfoot")){if(r=parseInt(c.data("jqfootlevel"),10),p){if(r=parseInt(c.data("jqfootlevel"),10),(!n.showSummaryOnHide&&r===f||f<r)&&t(c),r<f)break}else if((r===f||n.showSummaryOnHide&&r===f+1)&&t(c),r<=f)break}else if(c.hasClass("jqgroup"))if(r=parseInt(c.data("jqgrouplevel"),10),p){if(r<=f)break;t(c)}else{if(r<=f)break;r===f+1&&(e(c).removeClass(s).addClass(d),t(c)),u=!1}else(p||u)&&t(c);$(h).css("display",p?"none":""),l.frozenColumns&&$(o).triggerHandler("jqGridResetFrozenHeights",[{header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!1,body:{resizeDiv:!0,resizedRows:{iRowStart:i,iRowEnd:c.length?c[0].rowIndex-1:-1}}}]),o.fixScrollOffsetAndhBoxPadding(),$(o).triggerHandler("jqGridGroupingClickGroup",[g,p]),$.jgrid.isFunction(l.onClickGroup)&&l.onClickGroup.call(o,g,p)}),!1},groupingRender:function(m,v){function e(e){return base.getGuiStyles.call(j,"gridRow",e)}var b="",j=this[0],x=j.p,w=0,y=[],C=x.groupingView,D=$.makeArray(C.groupSummary),S=C.groupField.length,q=C.groups,F=x.colModel,R=F.length,_=x.page,t="jqGridShowHideCol.groupingRender",I=e("jqgroup ui-row-"+x.direction),O=e("jqfoot ui-row-"+x.direction);function G(e,t,r,i,a){var o,l,n,s,d,c,u,p,h,f,g,m,v,b=q[e],w="",y=0,$=!0;if(0!==t&&0!==q[e].idx)for(o=e;0<=o;o--)if(q[o].idx===q[e].idx-t){b=q[o];break}for(l=b.cnt,g=void 0===a?i:0;g<R;g++){for(n="&#160;",f=F[g],p=0;p<b.summary.length;p++)if(h=b.summary[p],m=Array.isArray(h.st)?h.st[r.idx]:h.st,v=Array.isArray(f.summaryTpl)?f.summaryTpl[r.idx]:f.summaryTpl||"{0}",h.nm===f.name){"string"==typeof m&&"avg"===m.toLowerCase()&&(h.sd&&h.vd?h.v=h.v/h.vd:h.v&&0<l&&(h.v=h.v/l));try{h.groupCount=b.cnt,h.groupIndex=b.dataIndex,h.groupValue=b.value,c=j.formatter("",h.v,g,h)}catch(e){c=h.v}n=jgrid.format(v,c),f.summaryFormat&&(n=f.summaryFormat.call(j,r,n,c,f,h));break}d=s=!1,void 0===a||!$||f.hidden||(n=a,$=!1,1<i&&(s=!0,y=i-1),d=f.align,f.align="rtl"===x.direction?"right":"left",C.iconColumnName=f.name),u=!1,0<y&&!f.hidden&&"&#160;"===n?(u=!0,d&&(f.align=d),y--):(w+="<td role='gridcell' "+j.formatCol(g,1,"")+(s?"colspan='"+i+"'":"")+">"+n+"</td>",s=!1,d&&(f.align=d),u&&(f.hidden=!1,y--))}return w}return $.each(F,function(e,t){for(var r=0;r<S;r++)if(C.groupField[r]===t.name){y[r]=e;break}}),D.reverse(),$.each(q,function(e,t){var r,i,a,o,l,n,s=x.id+"ghead_"+t.idx,d=s+"_"+e,c=$.jgrid.isFunction(C.groupCollapse)?C.groupCollapse.call(j,{group:t,rowid:d}):C.groupCollapse,u=1,p=0,h=S-1===t.idx,f=null!=t.parentGroup&&t.parentGroup.collapsed,g="<span style='cursor:pointer;margin-"+("rtl"===x.direction?"right:":"left:")+12*t.idx+"px;' class='"+C.commonIconClass+" "+(c?C.plusicon:C.minusicon)+" tree-wrap'></span>";if(C._locgr&&!(t.startRow+t.cnt>(_-1)*v&&t.startRow<_*v))return!0;void 0!==(c=f?!0:c)&&(t.collapsed=c),w++;try{r=Array.isArray(C.formatDisplayField)&&$.jgrid.isFunction(C.formatDisplayField[t.idx])?(t.displayValue=C.formatDisplayField[t.idx].call(j,t.displayValue,t.value,F[y[t.idx]],t.idx,t,e),t.displayValue):j.formatter(d,t.displayValue,y[t.idx],t.value,t)}catch(e){r=t.displayValue}if(b+="<tr id='"+d+"' data-jqgrouplevel='"+t.idx+"' "+(c&&f?"style='display:none;' ":"")+"role='row' class='"+I+" "+s+"'>","string"!=typeof(d=$.jgrid.isFunction(C.groupText[t.idx])?C.groupText[t.idx].call(j,r,t.cnt,t.summary):jgrid.template(C.groupText[t.idx],r,t.cnt,t.summary))&&"number"!=typeof d&&(d=r),"header"===C.groupSummaryPos[t.idx]?(u=1,"cb"!==F[0].name&&"cb"!==F[1].name||u++,"subgrid"!==F[0].name&&"subgrid"!==F[1].name||u++,b+=G(e,0,t,u,g+"<span class='cell-wrapper'>"+d+"</span>")):b+="<td role='gridcell' style='padding-left:"+12*t.idx+"px;' colspan='"+R+"'>"+g+d+"</td>",b+="</tr>",h){for(l=q[e+1],f=t.startRow,n=void 0!==l?l.startRow:q[e].startRow+q[e].cnt,a=f=C._locgr&&(p=(_-1)*v)>t.startRow?p:f;a<n&&m[a-p];a++)b+=m[a-p].join("");if("header"!==C.groupSummaryPos[t.idx]){if(void 0!==l){for(i=0;i<C.groupField.length&&l.dataIndex!==C.groupField[i];i++);w=C.groupField.length-i}for(o=0;o<w;o++)D[o]&&(b=(b+="<tr data-jqfootlevel='"+(t.idx-o)+(c&&(0<t.idx-o||!C.showSummaryOnHide)?"' style='display:none;'":"'")+" role='row' class='"+O+"'>")+G(e,o,q[t.idx-o],0)+"</tr>");w=i}}}),this.off(t).on(t,function(){var e,t,r,i,a=x.iColByName[C.iconColumnName];if(0<=$.inArray("header",C.groupSummaryPos)){for(i=0;i<F.length;i++)if(!F[i].hidden){r=i;break}if(void 0!==r&&a!==r){for(e=0;e<j.rows.length;e++)t=j.rows[e],$(t).hasClass("jqgroup")&&($(t.cells[r]).html(t.cells[a].innerHTML),$(t.cells[a]).html("&nbsp;"));C.iconColumnName=F[r].name}}}),b},groupingGroupBy:function(a,o){return this.each(function(){var e,t,r=this.p,i=r.groupingView;for("string"==typeof a&&(a=[a]),r.grouping=!0,i._locgr=!1,void 0===i.visibiltyOnNextGrouping&&(i.visibiltyOnNextGrouping=[]),e=0;e<i.groupField.length;e++)t=r.colModel[r.iColByName[i.groupField[e]]],!i.groupColumnShow[e]&&i.visibiltyOnNextGrouping[e]&&null!=t&&!0===t.hidden&&base.showCol.call($(this),i.groupField[e]);for(e=0;e<a.length;e++)i.visibiltyOnNextGrouping[e]=$(r.idSel+"_"+jgrid.jqID(a[e])).is(":visible");r.groupingView=$.extend(r.groupingView,o||{}),i.groupField=a,$(this).trigger("reloadGrid")})},groupingRemove:function(a){return this.each(function(){var e,t=this.p,r=this.tBodies[0],i=t.groupingView;if(void 0===a&&(a=!0),!(t.grouping=!1)===a){for(e=0;e<i.groupField.length;e++)!i.groupColumnShow[e]&&i.visibiltyOnNextGrouping[e]&&base.showCol.call($(this),i.groupField);$("tr.jqgroup, tr.jqfoot",r).remove(),$("tr.jqgrow",r).filter(":hidden").show()}else $(this).trigger("reloadGrid")})},groupingCalculations:{handler:function(e,t,r,i,a,o){var l,n={sum:function(){return parseFloat(t||0)+parseFloat(o[r]||0)},min:function(){return""===t?parseFloat(o[r]||0):Math.min(parseFloat(t),parseFloat(o[r]||0))},max:function(){return""===t?parseFloat(o[r]||0):Math.max(parseFloat(t),parseFloat(o[r]||0))},count:function(){return""===t&&(t=0),o.hasOwnProperty(r)?t+1:0},avg:function(){return n.sum()}};if(n[e])return l=n[e](),l=null!=i?"fixed"===a?l.toFixed(i):(a=Math.pow(10,i),Math.round(l*a)/a):l;throw"jqGrid Grouping No such method: "+e}}}),$.jgrid.extend({jqGridImport:function(i){return i=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},i||{}),this.each(function(){function t(e,t){var r,i,a,o=$(t.xmlGrid.config,e)[0],t=$(t.xmlGrid.data,e)[0];if(xmlJsonClass.xml2json){for(a in r=xmlJsonClass.xml2json(o," "),r=$.parseJSON(r))r.hasOwnProperty(a)&&(i=r[a]);void 0!==i&&(t?(o=r.grid.datatype,r.grid.datatype="xmlstring",r.grid.datastr=e,$(l).jqGrid(i).jqGrid("setGridParam",{datatype:o})):$(l).jqGrid(i))}else(null!=jgrid.defaults&&$.jgrid.isFunction(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert)("xml2json or parse are not present")}function r(e,t){var r;e&&"string"==typeof e&&(r=(e=$.parseJSON(e))[t.jsonGrid.config],(e=e[t.jsonGrid.data])?(t=r.datatype,r.datatype="jsonstring",r.datastr=e,$(l).jqGrid(r).jqGrid("setGridParam",{datatype:t})):$(l).jqGrid(r))}var e,l=this;switch(i.imptype){case"xml":$.ajax($.extend({url:i.impurl,type:i.mtype,data:i.impData,dataType:"xml",context:i,complete:function(e){!(e.status<300||304===e.status)||0===e.status&&4===e.readyState||(t(e.responseXML,this),$(l).triggerHandler("jqGridImportComplete",[e,this]),$.jgrid.isFunction(this.importComplete)&&this.importComplete(e))}},i.ajaxOptions));break;case"xmlstring":i.impstring&&"string"==typeof i.impstring&&(e=$.parseXML(i.impstring))&&(t(e,i),$(l).triggerHandler("jqGridImportComplete",[e,i]),$.jgrid.isFunction(i.importComplete)&&i.importComplete(e),i.impstring=null);break;case"json":$.ajax($.extend({url:i.impurl,type:i.mtype,data:i.impData,dataType:"json",context:i,complete:function(e){try{!(e.status<300||304===e.status)||0===e.status&&4===e.readyState||(r(e.responseText,this),$(l).triggerHandler("jqGridImportComplete",[e,this]),$.jgrid.isFunction(this.importComplete)&&this.importComplete(e))}catch(e){}}},i.ajaxOptions));break;case"jsonstring":i.impstring&&"string"==typeof i.impstring&&(r(i.impstring,i),$(l).triggerHandler("jqGridImportComplete",[i.impstring,i]),$.jgrid.isFunction(i.importComplete)&&i.importComplete(i.impstring),i.impstring=null)}})},jqGridExport:function(r){r=$.extend({exptype:"xmlstring",root:"grid",ident:"\t"},r||{});var i=null;return this.each(function(){if(this.grid){var e,t=$.extend(!0,{},$(this).jqGrid("getGridParam"));if(t.rownumbers&&(t.colNames.splice(0,1),t.colModel.splice(0,1)),t.multiselect&&(t.colNames.splice(0,1),t.colModel.splice(0,1)),t.subGrid&&(t.colNames.splice(0,1),t.colModel.splice(0,1)),t.knv=null,t.treeGrid)for(e in t.treeReader)t.treeReader.hasOwnProperty(e)&&(t.colNames.splice(t.colNames.length-1),t.colModel.splice(t.colModel.length-1));switch(r.exptype){case"xmlstring":i="<"+r.root+">"+xmlJsonClass.json2xml(t,r.ident)+"</"+r.root+">";break;case"jsonstring":i="{"+xmlJsonClass.toJson(t,r.root,r.ident,!1)+"}",void 0!==t.postData.filters&&(i=(i=i.replace(/filters":"/,'filters":')).replace(/\}\]\}"/,"}]}"))}}}),i},excelExport:function(t){return t=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each(function(){var e;this.grid&&"remote"===t.exptype&&((e=$.extend({},this.p.postData,t.exportOptions))[t.oper]=t.tag,window.location=t.url+(null!=t.url&&0<=t.url.indexOf("?")?"&":"?")+$.param(e))})}}),function(e){var t=$.makeArray(arguments).slice(1);return t.unshift(""),t.unshift("Inline"),t.unshift(e),jgrid.feedback.apply(this,t)}),$UiMultiselect=(jgrid.inlineEdit=jgrid.inlineEdit||{},jgrid.extend({editRow:function(g,e,t,r,i,a,o,l,n,s){var m={},d=$.makeArray(arguments).slice(1);return"object"===$.type(d[0])?m=d[0]:(void 0!==e&&(m.keys=e),$.jgrid.isFunction(t)&&(m.oneditfunc=t),$.jgrid.isFunction(r)&&(m.successfunc=r),void 0!==i&&(m.url=i),null!=a&&(m.extraparam=a),$.jgrid.isFunction(o)&&(m.aftersavefunc=o),$.jgrid.isFunction(l)&&(m.errorfunc=l),$.jgrid.isFunction(n)&&(m.afterrestorefunc=n),$.jgrid.isFunction(s)&&(m.beforeEditRow=s)),this.each(function(){var o,l,e,t,r,i,d=this,n=$(d),c=d.p,u=0,p=null,h={},f={},a=c.colModel,s=c.prmNames;d.grid&&(o=$.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,focusField:!0},jgrid.inlineEdit,c.inlineEditing||{},m),l=n.jqGrid("getInd",g,!0),t="object"==typeof(e=o.focusField)&&null!=e?$(e.target||e).closest("tr.jqgrow>td")[0]:null,!1===l||o.extraparam[s.oper]!==s.addoper&&!editFeedback.call(d,o,"beforeEditRow",o,g)||"0"!==($(l).attr("editable")||"0")||$(l).hasClass("not-editable-row")||(null!=(s=jgrid.detectRowEditing.call(d,g))&&"cellEditing"===s.mode&&(s=s.savedRow,r=d.rows[s.id],i=getGuiStateStyles.call(d,"select"),n.jqGrid("restoreCell",s.id,s.ic),$(r.cells[s.ic]).removeClass("edit-cell "+i),$(r).addClass(i).attr({"aria-selected":"true",tabindex:"0"})),jgrid.enumEditableCells.call(d,l,$(l).hasClass("jqgrid-new-row")?"add":"edit",function(e){var t,r=e.cm,i=$(e.dataElement),a=e.dataWidth,o=r.name,l=r.edittype,n=e.iCol,s=r.editoptions||{};if(f[o]=e.editable,"hidden"!==e.editable){try{t=$.unformat.call(this,e.td,{rowId:g,colModel:r},n)}catch(e){t="textarea"===l?i.text():i.html()}h[o]=t,i.html(""),o=$.extend({},s,{id:g+"_"+o,name:o,rowId:g,mode:e.mode,cm:r,iCol:n}),("&nbsp;"===t||"&#160;"===t||1===t.length&&160===t.charCodeAt(0))&&(t=""),r=jgrid.createEl.call(d,l,o,t,!0,$.extend({},jgrid.ajaxOptions,c.ajaxSelectOptions||{})),$(r).addClass("editable"),i.append(r),a&&$(r).width(e.dataWidth),jgrid.bindEv.call(d,r,o),"select"===l&&!0===s.multiple&&void 0===s.dataUrl&&jgrid.msie&&$(r).width($(r).width()),null===p&&(p=n),u++}}),0<u&&(h.id=g,c.savedRow.push(h),c.editingInfo[g]={mode:"inlineEditing",savedRow:h,editable:f},$(l).attr("editable","1"),e&&("number"==typeof e&&parseInt(e,10)<=a.length?p=e:"string"==typeof e?p=c.iColByName[e]:null!=t&&(p=t.cellIndex),setTimeout(function(){function e(e){return(c.frozenColumns&&0<i&&p<i?d.grid.fbRows[l.rowIndex]:l).cells[e]}function t(e){return $(e).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")}function r(){return t(c.frozenColumns&&0<i?d.grid.fbRows[l.rowIndex]:l).first()}var i=n.jqGrid("getNumberOfFrozenColumns"),a=t(e(p));(0<a.length?a.first():"number"==typeof o.defaultFocusField||"string"==typeof o.defaultFocusField?(a=0===(a=t(e("number"==typeof o.defaultFocusField?o.defaultFocusField:c.iColByName[o.defaultFocusField]))).length?r():a).first():r()).focus()},0)),!0===o.keys&&(s=$(l),(s=c.frozenColumns?s.add(d.grid.fbRows[l.rowIndex]):s).on("keydown",function(e){return 27===e.keyCode?(n.jqGrid("restoreRow",g,o.afterrestorefunc),!1):13===e.keyCode?"TEXTAREA"===e.target.tagName||(n.jqGrid("saveRow",g,o),!1):void 0})),fullBoolFeedback.call(d,o.oneditfunc,"jqGridInlineEditRow",g,o))))})},saveRow:function(o,e,t,r,i,a,l,n){var s,d=$.makeArray(arguments).slice(1),c={},u=this[0],p=$(u),h=null!=u?u.p:null,f=jgrid.info_dialog,g=$.jgrid.isFunction,m=null!=jgrid.defaults&&g(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert;if(u.grid&&null!=h){"object"===$.type(d[0])?c=d[0]:(g(e)&&(c.successfunc=e),void 0!==t&&(c.url=t),void 0!==r&&(c.extraparam=r),g(i)&&(c.aftersavefunc=i),g(a)&&(c.errorfunc=a),g(l)&&(c.afterrestorefunc=l),g(n)&&(c.beforeSaveRow=n));var v,b,w,y,j,x,d=function(e){return p.jqGrid("getGridRes",e)},c=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:d("defaults.savetext")||"Saving..."},jgrid.inlineEdit,h.inlineEditing||{},c),C={},D={},S={},q=p.jqGrid("getInd",o,!0),F=$(q),e=h.prmNames,R=d("errors.errcap"),_=d("edit.bClose"),I=function(t,e){try{var r=jgrid.getRelativeRect.call(u,e);f.call(u,R,t,_,{top:r.top,left:r.left+$(u).closest(".ui-jqgrid").offset().left})}catch(e){m(t)}};if(!1!==q&&(s=c.extraparam[e.oper]===e.addoper?"add":"edit",editFeedback.call(u,c,"beforeSaveRow",c,o,s))&&(t=F.attr("editable"),c.url=c.url||h.editurl,j="clientArray"!==c.url,"1"===t)){if(y=$.jgrid.detectRowEditing.call(u,o),jgrid.enumEditableCells.call(u,q,F.hasClass("jqgrid-new-row")?"add":"edit",function(e){var t=e.cm,r=t.formatter,i=t.editoptions||{},a=t.formatoptions||{},o={},l=jgrid.getEditedValue.call(u,$(e.dataElement),t,o,e.editable);if("select"===t.edittype&&"select"!==t.formatter&&(D[t.name]=o.text),null!=(w=jgrid.checkValues.call(u,l,e.iCol,void 0,void 0,$.extend(e,{oldValue:null!=y?y.savedRow[t.name]:null,newValue:l,oldRowData:null!=y?y.savedRow:null})))&&!1===w[0])return x=!0,I(w[1],e.td),!1;"date"===r&&!0!==a.sendFormatted&&(l=$.unformat.date.call(u,l,t)),j&&!0===i.NullIfEmpty&&""===l&&(l="null"),C[t.name]=l}),x)return;var e=h.prmNames,O=!1===h.keyName?e.id:h.keyName,r=(C&&(C[e.oper]=e.editoper,void 0!==C[O]&&""!==C[O]||(C[O]=jgrid.stripPref(h.idPrefix,o)),C=$.extend({},C,h.inlineData||{},c.extraparam)),{options:c,rowid:o,tr:q,iRow:q.rowIndex,savedRow:y.savedRow,newData:C,mode:s});if(!editFeedback.call(u,c,"saveRowValidation",r))return void(r.errorText&&I(r.errorText,q));if(j)p.jqGrid("progressBar",{method:"show",loadtype:c.saveui,htmlcontent:c.savetext}),(S=$.extend({},C,S))[O]=jgrid.stripPref(h.idPrefix,S[O]),h.autoEncodeOnEdit&&$.each(S,function(e,t){g(t)||(S[e]=jgrid.oldEncodePostedData(t))}),q.id===h.idPrefix+S[O]||null==e.idold||S.hasOwnProperty(e.idold)||(S[e.idold]=jgrid.stripPref(h.idPrefix,q.id)),$.ajax($.extend({url:g(c.url)?c.url.call(u,S[O],s,S,c):c.url,data:jgrid.serializeFeedback.call(u,g(c.serializeSaveData)?c.serializeSaveData:h.serializeRowData,"jqGridInlineSerializeSaveData",S),type:g(c.mtype)?c.mtype.call(u,s,c,S[O],S):c.mtype,complete:function(e,t){if(p.jqGrid("progressBar",{method:"hide",loadtype:c.saveui}),(e.status<300||304===e.status)&&(0!==e.status||4!==e.readyState)){var r,i,a=p.triggerHandler("jqGridInlineSuccessSaveRow",[e,o,c,s,S]);if((a=null!=a&&!0!==a?a:[!0,C])[0]&&g(c.successfunc)&&(a=c.successfunc.call(u,e,o,c,s,S)),Array.isArray(a)?(r=a[0],C=a[1]||C):r=a,!0===r){for(h.autoEncodeOnEdit&&$.each(C,function(e,t){C[e]=jgrid.oldDecodePostedData(t)}),C=$.extend({},C,D),p.jqGrid("setRowData",o,C),F.attr("editable","0"),i=0;i<h.savedRow.length;i++)if(String(h.savedRow[i].id)===String(o)){b=i;break}0<=b&&(h.savedRow.splice(b,1),delete h.editingInfo[o]),fullBoolFeedback.call(u,c.aftersavefunc,"jqGridInlineAfterSaveRow",o,e,C,c),null!=a[2]?p.jqGrid("changeRowid",o,h.idPrefix+a[2]):q.id!==h.idPrefix+C[O]&&p.jqGrid("changeRowid",q.id,h.idPrefix+C[O]),F.removeClass("jqgrid-new-row").off("keydown")}else fullBoolFeedback.call(u,c.errorfunc,"jqGridInlineErrorSaveRow",o,e,t,null,c),!0===c.restoreAfterError&&p.jqGrid("restoreRow",o,c.afterrestorefunc)}},error:function(e,t,r){if(p.triggerHandler("jqGridInlineErrorSaveRow",[o,e,t,r,c]),g(c.errorfunc))c.errorfunc.call(u,o,e,t,r);else{t=e.responseText||e.statusText;try{f.call(u,R,'<div class="'+getGuiStateStyles.call(u,"error")+'">'+t+"</div>",_,{buttonalign:"right"})}catch(e){m(t)}}!0===c.restoreAfterError&&p.jqGrid("restoreRow",o,c.afterrestorefunc)}},jgrid.ajaxOptions,h.ajaxRowOptions,c.ajaxSaveOptions||{}));else{for(C=$.extend({},C,D),i=p.jqGrid("setRowData",o,C),F.attr("editable","0"),v=0;v<h.savedRow.length;v++)if(String(h.savedRow[v].id)===String(o)){b=v;break}0<=b&&(h.savedRow.splice(b,1),delete h.editingInfo[o]),fullBoolFeedback.call(u,c.aftersavefunc,"jqGridInlineAfterSaveRow",o,i,C,c),F.removeClass("jqgrid-new-row").off("keydown"),q.id!==h.idPrefix+C[O]&&p.jqGrid("changeRowid",q.id,h.idPrefix+C[O])}}}},restoreRow:function(s,e){var t=$.makeArray(arguments).slice(1),d={};return"object"===$.type(t[0])?d=t[0]:$.jgrid.isFunction(e)&&(d.afterrestorefunc=e),this.each(function(){var e,t=this,r=$(t),i=t.p,a=-1,o={};if(t.grid){var l=$.extend(!0,{},jgrid.inlineEdit,i.inlineEditing||{},d),n=r.jqGrid("getInd",s,!0);if(!1!==n&&editFeedback.call(t,l,"beforeCancelRow",l,s)){for(e=0;e<i.savedRow.length;e++)if(String(i.savedRow[e].id)===String(s)){a=e;break}if(0<=a){if($.jgrid.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+jgrid.jqID(n.id)).datepicker("hide")}catch(e){}$.each(i.colModel,function(){var e=this.name;i.savedRow[a].hasOwnProperty(e)&&(o[e]=i.savedRow[a][e],!this.formatter||"date"!==this.formatter||null!=this.formatoptions&&!0===this.formatoptions.sendFormatted||(o[e]=$.unformat.date.call(t,o[e],this)))}),r.jqGrid("setRowData",s,o),$(n).attr("editable","0").off("keydown"),i.savedRow.splice(a,1),delete i.editingInfo[s],$("#"+jgrid.jqID(s),t).hasClass("jqgrid-new-row")&&setTimeout(function(){r.jqGrid("delRowData",s),r.jqGrid("showAddEditButtons",!1)},0)}fullBoolFeedback.call(t,l.afterrestorefunc,"jqGridInlineAfterRestoreRow",s)}}})},addRow:function(o){return this.each(function(){var t,e,r,i,a;this.grid&&(e=$(t=this),i=t.p,r=$.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},jgrid.inlineEdit,i.inlineEditing||{},o||{}),editFeedback.call(t,r,"beforeAddRow",r.addRowParams))&&(r.rowID=$.jgrid.isFunction(r.rowID)?r.rowID.call(t,r):null!=r.rowID?r.rowID:jgrid.randId(),!0===r.useDefValues&&$(i.colModel).each(function(){var e;this.editoptions&&this.editoptions.defaultValue&&(e=this.editoptions.defaultValue,r.initdata[this.name]=$.jgrid.isFunction(e)?e.call(t,r):e)}),r.rowID=i.idPrefix+r.rowID,e.jqGrid("addRowData",r.rowID,r.initdata,r.position,r.srcRowid),$("#"+jgrid.jqID(r.rowID),t).addClass("jqgrid-new-row"),r.useFormatter?$("#"+jgrid.jqID(r.rowID)+" .ui-inline-edit",t).click():(a=(i=i.prmNames).oper,r.addRowParams.extraparam[a]=i.addoper,e.jqGrid("editRow",r.rowID,r.addRowParams),e.jqGrid("setSelection",r.rowID)))})},inlineNav:function(p,h){return"object"==typeof p&&(h=p,p=void 0),this.each(function(){var a=this,o=$(a),l=a.p;if(this.grid&&null!=l){var e,t=p===l.toppager?l.idSel+"_top":l.idSel,r=p===l.toppager?l.id+"_top":l.id,n=getGuiStateStyles.call(a,"disabled"),s=$.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},o.jqGrid("getGridRes","nav"),jgrid.nav||{},l.navOptions||{},jgrid.inlineNav||{},l.inlineNavOptions||{},h||{}),d=function(){a.modalAlert()};if(void 0===p)if(l.pager){if(o.jqGrid("inlineNav",l.pager,s),!l.toppager)return;p=l.toppager,t=l.idSel+"_top",r=l.id+"_top"}else l.toppager&&(p=l.toppager,t=l.idSel+"_top",r=l.id+"_top");if(void 0!==p&&!((e=$(p)).length<=0)){if(e.find(".navtable").length<=0&&o.jqGrid("navGrid",p,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1}),(l._inlinenav=!0)===s.addParams.useFormatter)for(var i,c=l.colModel,u=0;u<c.length;u++)if(c[u].formatter&&"actions"===c[u].formatter){c[u].formatoptions&&(i=$.extend({keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},c[u].formatoptions),s.addParams.addRowParams={keys:i.keys,oneditfunc:i.onEdit,successfunc:i.onSuccess,url:i.url,extraparam:i.extraparam,aftersavefunc:i.afterSave,errorfunc:i.onError,afterrestorefunc:i.afterRestore});break}s.add&&o.jqGrid("navButtonAdd",p,{caption:s.addtext,title:s.addtitle,commonIconClass:s.commonIconClass,buttonicon:s.addicon,iconsOverText:s.iconsOverText,id:r+"_iladd",onClickButton:function(){hasOneFromClasses(this,n)||o.jqGrid("addRow",s.addParams)}}),s.edit&&o.jqGrid("navButtonAdd",p,{caption:s.edittext,title:s.edittitle,commonIconClass:s.commonIconClass,buttonicon:s.editicon,iconsOverText:s.iconsOverText,id:r+"_iledit",onClickButton:function(){var e;hasOneFromClasses(this,n)||((e=l.selrow)?o.jqGrid("editRow",e,s.editParams):d())}}),s.save&&(o.jqGrid("navButtonAdd",p,{caption:s.savetext,title:s.savetitle,commonIconClass:s.commonIconClass,buttonicon:s.saveicon,iconsOverText:s.iconsOverText,id:r+"_ilsave",onClickButton:function(){var e,t,r,i;!hasOneFromClasses(this,n)&&0<l.savedRow.length&&((e=l.savedRow[0].id)?(r=(t=l.prmNames).oper,i=s.editParams,$("#"+jgrid.jqID(e),a).hasClass("jqgrid-new-row")?(s.addParams.addRowParams.extraparam[r]=t.addoper,i=s.addParams.addRowParams):(s.editParams.extraparam||(s.editParams.extraparam={}),s.editParams.extraparam[r]=t.editoper),o.jqGrid("saveRow",e,i)):d())}}),$(t+"_ilsave").addClass(n)),s.cancel&&(o.jqGrid("navButtonAdd",p,{caption:s.canceltext,title:s.canceltitle,commonIconClass:s.commonIconClass,buttonicon:s.cancelicon,iconsOverText:s.iconsOverText,id:r+"_ilcancel",onClickButton:function(){var e,t;!hasOneFromClasses(this,n)&&0<l.savedRow.length&&(e=l.savedRow[0].id,t=s.editParams,e?($("#"+jgrid.jqID(e),a).hasClass("jqgrid-new-row")&&(t=s.addParams.addRowParams),o.jqGrid("restoreRow",e,t)):d())}}),$(t+"_ilcancel").addClass(n)),!0===s.restoreAfterSelect&&o.on("jqGridSelectRow",function(e,t){0<l.savedRow.length&&!0===l._inlinenav&&t!==(t=l.savedRow[0].id)&&"number"!=typeof t&&o.jqGrid("restoreRow",t,s.editParams)}),o.on("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",function(){o.jqGrid("showAddEditButtons",!1)}),o.on("jqGridInlineEditRow",function(e,t){o.jqGrid("showAddEditButtons",!0,t)})}}})},showAddEditButtons:function(a){return this.each(function(){var e,t,r,i;this.grid&&(e=(i=this.p).idSel,t=getGuiStateStyles.call(this,"disabled"),r=e+"_ilsave,"+e+"_ilcancel"+(i.toppager?","+e+"_top_ilsave,"+e+"_top_ilcancel":""),i=e+"_iladd,"+e+"_iledit"+(i.toppager?","+e+"_top_iladd,"+e+"_top_iledit":""),$(a?i:r).addClass(t),$(a?r:i).removeClass(t))})}}),null!=$.ui?$.ui.multiselect:null),reorderSelectedColumns=function(r){if(null!=this.grid&&null!=this.grid.p){var i,e,t,a,o,l=this,n=this.grid.p,s=this.gh,d=this.selectedList,c=this.inGroup,u=d.find("li"),p=u.length-1,h=function(e,t,r){for(var i,a=d.find("li"),o=t=void 0===t?r?a.length-1:0:t;r?0<=o:o<a.length;r?o--:o++)if((i=$(a[o]).data("optionLink"))&&e.call(a[o],parseInt(i.val(),10),o))return o},f=function(){0<=(o=$.inArray(n.colModel[r].name,l.newColOrder))&&l.newColOrder.splice(o,1),u=d.find("li"),i=0,h(function(e,t){if(e===r){for(p=t;0<=i&&i<n.colModel.length&&i!==r&&(n.colModel[i].hidden||n.colModel[i].hidedlg)&&(null==c||c[i]===c[r]);)i++;return l.newColOrder.splice(i,0,n.colModel[r].name),!0}(i=$.inArray(n.colModel[e].name,l.newColOrder,i))<0&&(i=$.inArray(n.colModel[e].name,l.newColOrder)),i++})},g=function(e){if(c[e]===c[r])return $(this).after(u[p]),f(),!0},m=function(e){if(c[e]===c[r])return $(this).before(u[p]),f(),!0},v=function(e){if(c[e]===c[r]&&void 0!==c[e])return s[c[e]].startColumnName=n.colModel[e].name,!0};if(f(),s&&void 0!==s[c[r]]){for(e=s[c[r]],o=0;o<e.numberOfColumns;o++)if(i=n.iColByName[e.startColumnName]+o,!n.colModel[i].hidden&&!n.colModel[i].hidedlg){h(g,p-1,!0),h(m,p+1),h(v);break}}else s&&(u=d.find("li"),(o=h(function(e){if(e===r)return!0}))+1>=u.length||o<0||(t=$(u[o+1]).data("optionLink"))&&void 0!==(a=c[parseInt(t.val(),10)])&&(t=$(u[o-1]).data("optionLink"))&&c[parseInt(t.val(),10)]===a&&(t=h(function(e){if(c[e]!==a)return!0},o+1),$(u[void 0===t||t>=u.length?u.length-1:t-1]).after(u[p]),f()))}},setSelected;function Aggregation(e,t,r){if(!(this instanceof Aggregation))return new Aggregation(e);this.aggregator=e,this.finilized=!1,this.context=t,this.pivotOptions=r}function ArrayOfFieldsets(e,t,r,i,a){function o(e,t){var r=e,i=t;if(null==r&&(r=""),null==i&&(i=""),r=String(r),i=String(i),this.caseSensitive||(r=r.toUpperCase(),i=i.toUpperCase()),r===i){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;if(null===e)return-1;if(null===t)return 1}return r<i?-1:1}function l(e,t){return(e=Number(e))===(t=Number(t))?0:e<t?-1:1}function n(e,t){return(e=Math.floor(Number(e)))===(t=Math.floor(Number(t)))?0:e<t?-1:1}var s,d,c=i.length,u=this;for(u.items=[],u.indexesOfSourceData=[],u.trimByCollect=e,u.caseSensitive=t,u.skipSort=r,u.fieldLength=c,u.fieldNames=new Array(c),u.fieldSortDirection=new Array(c),u.fieldCompare=new Array(c),s=0;s<c;s++){switch(d=i[s],u.fieldNames[s]=d[a||"dataName"],d.sorttype){case"integer":case"int":u.fieldCompare[s]=n;break;case"number":case"currency":case"float":u.fieldCompare[s]=l;break;default:u.fieldCompare[s]=$.jgrid.isFunction(d.compare)?d.compare:o}u.fieldSortDirection[s]="desc"===d.sortorder?-1:1}}jgrid.msie&&8===jgrid.msiever()&&($.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"===e.style.display}),jgrid._multiselect=!1,$UiMultiselect&&($UiMultiselect.prototype._setSelected&&(setSelected=$UiMultiselect.prototype._setSelected,$UiMultiselect.prototype._setSelected=function(e,t){var r=setSelected.call(this,e,t),i=this.element,e=parseInt(e.data("optionLink").val(),10);return t&&this.selectedList&&(reorderSelectedColumns.call(this,e),this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(i)})),r}),$UiMultiselect.prototype.destroy&&($UiMultiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),(void 0===$.Widget?$.widget:$.Widget).prototype.destroy.apply(this,arguments)}),jgrid._multiselect=!0),jgrid.extend({sortableColumns:function(t){return this.each(function(){var r,a=this,o=a.p,e=jqID(o.id);function i(){o.disableClick=!0}o&&o.sortable&&$.jgrid.isFunction($.fn.sortable)&&(e={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+e+"_cb,#jqgh_"+e+"_rn,#jqgh_"+e+"_subgrid),:hidden)",placeholder:{element:function(e){return $(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},start:function(){a.grid.hDiv.scrollLeft=a.grid.bDiv.scrollLeft},update:function(e,t){var t=$(">th",$(t.item).parent()),r=o.id+"_",i=[];t.each(function(){var e=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(r,""),e=o.iColByName[e];void 0!==e&&i.push(e)}),$(a).jqGrid("remapColumns",i,!0,!0),$.jgrid.isFunction(o.sortable.update)&&o.sortable.update(i),setTimeout(function(){o.disableClick=!1},50)}},o.sortable.options?$.extend(e,o.sortable.options):$.jgrid.isFunction(o.sortable)&&(o.sortable={update:o.sortable}),e.start?(r=e.start,e.start=function(e,t){i(),r.call(this,e,t)}):e.start=i,o.sortable.exclude&&(e.items+=":not("+o.sortable.exclude+")"),null!=(e=(e=t.sortable(e)).data("sortable")||e.data("uiSortable")||e.data("ui-sortable")))&&(e.floating=!0)})},columnChooser:function(o){function r(e){return $UiMultiselect&&$UiMultiselect.prototype&&e.data($UiMultiselect.prototype.widgetFullName||$UiMultiselect.prototype.widgetName)||e.data("ui-multiselect")||e.data("multiselect")}var t,l,n,e,s=this,i=s[0],d=i.p,c=d.colModel,a=c.length,u=d.colNames;if(!$("#colchooser_"+jqID(d.id)).length){if(t=$('<div id="colchooser_'+d.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),l=$("select",t),o=$.extend({width:400,height:240,classname:null,done:function(e){e&&s.jqGrid("remapColumns",e,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(e){var t={};return t[e.bSubmit]=function(){e.apply_perm(),e.cleanup(!1)},t[e.bCancel]=function(){e.cleanup(!0)},$.extend(!0,{buttons:t,close:function(){e.cleanup(!0)},modal:e.modal||!1,resizable:e.resizable||!0,width:e.width+70,resize:function(){var e=r(l),t=e.container.closest(".ui-dialog-content");0<t.length&&"object"==typeof t[0].style?t[0].style.width="":t.css("width",""),e.selectedList.height(Math.max(e.selectedContainer.height()-e.selectedActions.outerHeight()-1,1)),e.availableList.height(Math.max(e.availableContainer.height()-e.availableActions.outerHeight()-1,1))}},e.dialog_opts||{})},apply_perm:function(){for(var e,t=new Array(d.colModel.length),r={notSkipFrozen:void 0!==o.notSkipFrozen&&o.notSkipFrozen,skipSetGridWidth:!0,skipSetGroupHeaders:!0},i=0;i<d.colModel.length;i++)t[i]=d.iColByName[n.newColOrder[i]];if($("option",l).each(function(){$(this).is(":selected")?s.jqGrid("showCol",c[this.value].name,r):s.jqGrid("hideCol",c[this.value].name,r)}),o.done&&o.done.call(s,t),d.groupHeader&&("object"==typeof d.groupHeader||$.jgrid.isFunction(d.groupHeader)))if(s.jqGrid("destroyGroupHeader",!1),d.groupHeader.groupHeaders=n.gh,null!=d.pivotOptions&&null!=d.pivotOptions.colHeaders&&1<d.pivotOptions.colHeaders.length)for(e=d.pivotOptions.colHeaders,i=0;i<e.length;i++)e[i]&&e[i].groupHeaders.length&&s.jqGrid("setGroupHeaders",e[i]);else s.jqGrid("setGroupHeaders",d.groupHeader);var a=d.autowidth||void 0!==d.widthOrg&&"auto"!==d.widthOrg&&"100%"!==d.widthOrg?d.width:d.tblwidth;a!==d.width&&s.jqGrid("setGridWidth",a,d.shrinkToFit)},cleanup:function(e){y(o.dlog,t,"destroy"),y(o.msel,l,"destroy"),t.remove(),e&&o.done&&o.done.call(s)},msel_opts:{}},s.jqGrid("getGridRes","col"),jgrid.col,o||{}),$.ui&&$UiMultiselect&&$UiMultiselect.defaults){if(!jgrid._multiselect)return void(null!=jgrid.defaults&&$.jgrid.isFunction(jgrid.defaults.fatalError)?jgrid.defaults.fatalError:alert)("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");o.msel_opts=$.extend($UiMultiselect.defaults,o.msel_opts)}o.caption&&t.attr("title",o.caption),o.classname&&(t.addClass(o.classname),l.addClass(o.classname)),o.width&&($(">div",t).css({width:o.width,margin:"0 auto"}),l.css("width",o.width)),o.height&&($(">div",t).css("height",o.height),l.css("height",o.height-10)),l.empty();var p,h,f,g,m,v,b=null!=d.groupHeader?d.groupHeader.groupHeaders:0,w={};if(b)for(p=0;p<b.length;p++)for(g=b[p],h=0;h<g.numberOfColumns;h++)f=d.iColByName[g.startColumnName]+h,w[f]=$.jgrid.isFunction(o.buildItemText)?o.buildItemText.call(s[0],{iCol:f,cm:c[f],cmName:c[f].name,colName:u[f],groupTitleText:g.titleText}):$.jgrid.stripHtml(g.titleText)+": "+$.jgrid.stripHtml(""===u[f]?c[f].name:u[f]);for(f=0;f<a;f++)void 0===w[f]&&(w[f]=$.jgrid.isFunction(o.buildItemText)?o.buildItemText.call(s[0],{iCol:f,cm:c[f],cmName:c[f].name,colName:u[f],groupTitleText:null}):$.jgrid.stripHtml(u[f]));if($.each(c,function(e){this.hidedlg||l.append("<option value='"+e+"'"+(d.headertitles||this.headerTitle?" title='"+jgrid.stripHtml("string"==typeof this.headerTitle?this.headerTitle:w[e])+"'":"")+(this.hidden?"":" selected='selected'")+">"+w[e]+"</option>")}),e=$.jgrid.isFunction(o.dlog_opts)?o.dlog_opts.call(s,o):o.dlog_opts,y(o.dlog,t,e),e=$.jgrid.isFunction(o.msel_opts)?o.msel_opts.call(s,o):o.msel_opts,y(o.msel,l,e),(e=$("#colchooser_"+jqID(d.id))).css({margin:"auto"}),e.find(">div").css({width:"100%",height:"100%",margin:"auto"}),n=r(l)){if(n.grid=i,b)for(n.gh=$.extend(!0,[],b),n.inGroup=new Array(d.colModel.length),m=0;m<b.length;m++)for(v=b[m],f=0;f<v.numberOfColumns;f++)n.inGroup[d.iColByName[v.startColumnName]+f]=m;n.newColOrder=$.map(c,function(e){return e.name}),n.container.css({width:"100%",height:"100%",margin:"auto"}),n.selectedContainer.css({width:100*n.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),n.availableContainer.css({width:100-100*n.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),n.selectedList.css("height","auto"),n.availableList.css("height","auto"),e=Math.max(n.selectedList.height(),n.availableList.height()),e=Math.min(e,$(window).height()),n.selectedList.css("height",e),n.availableList.css("height",e),null!=n.options&&n.options.sortable&&n.selectedList.on("sortupdate",function(e,t){reorderSelectedColumns.call(n,parseInt(t.item.data("optionLink").val(),10)),t.item.css({width:"",height:""}),$.jgrid.isFunction(o.sortUpdate)&&o.sortUpdate.call(i,e,t)}),$.jgrid.isFunction(o.init)&&o.init.call(i,n)}}function y(e,t){e&&("string"==typeof e?$.fn[e]&&$.fn[e].apply(t,$.makeArray(arguments).slice(2)):$.jgrid.isFunction(e)&&e.apply(t,$.makeArray(arguments).slice(2)))}},sortableRows:function(l){return this.each(function(){var i=this,a=i.grid,o=i.p;a&&!o.treeGrid&&$.fn.sortable&&((l=$.extend({cursor:"move",axis:"y",items:">tbody>.jqgrow"},l||{})).start&&$.jgrid.isFunction(l.start)?(l._start_=l.start,delete l.start):l._start_=!1,l.update&&$.jgrid.isFunction(l.update)?(l._update_=l.update,delete l.update):l._update_=!1,l.start=function(e,t){if($(t.item).css("border-width","0"),$("td",t.item).each(function(e){this.style.width=a.cols[e].style.width}),o.subGrid){var r=$(t.item).attr("id");try{$(i).jqGrid("collapseSubGridRow",r)}catch(e){}}l._start_&&l._start_.apply(this,[e,t])},l.update=function(e,t){$(t.item).css("border-width",""),!0===o.rownumbers&&$("td.jqgrid-rownum",i.rows).each(function(e){$(this).html(e+1+(parseInt(o.page,10)-1)*parseInt(o.rowNum,10))}),l._update_&&l._update_.apply(this,[e,t])},$(i).sortable(l))})},gridDnD:function(i){return this.each(function(){var e,t,f=this;if(f.grid&&!f.p.treeGrid&&$.fn.draggable&&$.fn.droppable)if(void 0===$("#jqgrid_dnd")[0]&&$("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"==typeof i&&"updateDnD"===i&&!0===f.p.jqgdnd)r();else if((i=$.extend({drag:function(a){return $.extend({start:function(e,t){var r,i;if(f.p.subGrid){i=$(t.helper).attr("id");try{$(f).jqGrid("collapseSubGridRow",i)}catch(e){}}for(r=0;r<$.data(f,"dnd").connectWith.length;r++)0===$($.data(f,"dnd").connectWith[r]).jqGrid("getGridParam","reccount")&&$($.data(f,"dnd").connectWith[r]).jqGrid("addRowData","jqg_empty_row",{});t.helper.addClass("ui-state-highlight"),$("td",t.helper).each(function(e){this.style.width=f.grid.headers[e].width+"px"}),a.onstart&&$.jgrid.isFunction(a.onstart)&&a.onstart.call($(f),e,t)},stop:function(e,t){var r,i;for(t.helper.dropped&&!a.dragcopy&&(void 0===(i=$(t.helper).attr("id"))&&(i=$(this).attr("id")),$(f).jqGrid("delRowData",i)),r=0;r<$.data(f,"dnd").connectWith.length;r++)$($.data(f,"dnd").connectWith[r]).jqGrid("delRowData","jqg_empty_row");a.onstop&&$.jgrid.isFunction(a.onstop)&&a.onstop.call($(f),e,t)}},a.drag_opts||{})},drop:function(h){return $.extend({accept:function(e){var t;return $(e).hasClass("jqgrow")?0<(t=$(e).closest("table.ui-jqgrid-btable")).length&&void 0!==$.data(t[0],"dnd")&&(t=$.data(t[0],"dnd").connectWith,-1!==$.inArray("#"+jqID(this.id),t)):e},drop:function(e,t){if($(t.draggable).hasClass("jqgrow")){var r,i=$(t.draggable).attr("id"),a=t.draggable.parent().parent(),o=a.jqGrid("getRowData",i);if(!h.dropbyname){var l,n,s,d,c={},u=a.jqGrid("getGridParam","colModel"),p=$("#"+jqID(this.id)).jqGrid("getGridParam","colModel");try{for(n=l=0;l<u.length&&n<p.length;l++)if("cb"!==(s=u[l].name)&&"rn"!==s&&"subgrid"!==s){for(;n<p.length;n++)if("cb"!==(d=p[n].name)&&"rn"!==d&&"subgrid"!==d){c[d]=o[s];break}n++}o=c}catch(e){}}t.helper.dropped=!0,h.beforedrop&&$.jgrid.isFunction(h.beforedrop)&&null!=(a=h.beforedrop.call(this,e,t,o,$("#"+jqID(f.p.id)),$(this)))&&"object"==typeof a&&(o=a),t.helper.dropped&&(h.autoid&&(r=$.jgrid.isFunction(h.autoid)?h.autoid.call(this,o,{rowid:i,ev:e,ui:t}):(r=Math.ceil(1e3*Math.random()),h.autoidprefix+r)),$("#"+jqID(this.id)).jqGrid("addRowData",r,o,h.droppos),o[f.p.localReader.id]=r),h.ondrop&&$.jgrid.isFunction(h.ondrop)&&h.ondrop.call(this,e,t,o)}}},h.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},i||{})).connectWith)for(i.connectWith=i.connectWith.split(","),i.connectWith=$.map(i.connectWith,function(e){return $.jgrid.trim(e)}),$.data(f,"dnd",i),0===f.p.reccount||f.p.jqgdnd||r(),f.p.jqgdnd=!0,e=0;e<i.connectWith.length;e++)t=i.connectWith[e],$(t).droppable($.jgrid.isFunction(i.drop)?i.drop.call($(f),i):i.drop);function r(){var e=$.data(f,"dnd");$("tr.jqgrow:not(.ui-draggable)",f).draggable($.jgrid.isFunction(e.drag)?e.drag.call($(f),e):e.drag)}})},gridResize:function(d){return this.each(function(){var r,e,i=this,a=i.grid,o=i.p,l=o.gView+">.ui-jqgrid-bdiv",n=!1,s=o.height;a&&$.fn.resizable&&((d=$.extend({},d||{})).alsoResize?(d._alsoResize_=d.alsoResize,delete d.alsoResize):d._alsoResize_=!1,d.stop&&$.jgrid.isFunction(d.stop)?(d._stop_=d.stop,delete d.stop):d._stop_=!1,d.stop=function(e,t){$(i).jqGrid("setGridWidth",t.size.width,d.shrinkToFit),$(o.gView+">.ui-jqgrid-titlebar").css("width",""),n?($(r).each(function(){$(this).css("height","")}),"auto"!==s&&"100%"!==s||$(a.bDiv).css("height",s)):$(i).jqGrid("setGridParam",{height:$(l).height()}),i.fixScrollOffsetAndhBoxPadding&&i.fixScrollOffsetAndhBoxPadding(),d._stop_&&d._stop_.call(i,e,t)},r=l,"auto"!==s&&"100%"!==s||void 0!==d.handles||(d.handles="e,w"),d.handles&&2===(e=$.map(String(d.handles).split(","),function(e){return $.jgrid.trim(e)})).length&&("e"===e[0]&&"w"===e[1]||"e"===e[1]&&"w"===e[1])&&(r=o.gView+">div:not(.frozen-div)",n=!0,o.pager)&&(r+=","+o.pager),d._alsoResize_?d.alsoResize=r+","+d._alsoResize_:d.alsoResize=r,delete d._alsoResize_,$(o.gBox).resizable(d))})}}),Aggregation.prototype.calc=function(e,t,r,i,a){var o=this;if(void 0!==e)switch(o.result=o.result||0,e=parseFloat(e),o.aggregator){case"sum":o.result+=e;break;case"count":o.result++;break;case"avg":o.finilized?(o.count=o.count||0,o.result=(o.result*o.count+e)/(o.count+1)):(o.result+=e,o.count=o.count||0),o.count++;break;case"min":o.result=Math.min(o.result,e);break;case"max":o.result=Math.max(o.result,e);break;default:$.jgrid.isFunction(o.aggregator)&&(o.result=o.aggregator.call(o.context,{previousResult:o.result,value:e,fieldName:t,item:r,iItem:i,items:a}))}},Aggregation.prototype.getResult=function(e,t,r){var i=this;void 0===i.result&&!r||(r&&void 0!==i.result&&(i.result=0,i.count=0),void 0===i.result||i.finilized||"avg"!==i.aggregator||(i.result=i.result/i.count,i.finilized=!0),e[t]=i.result)},ArrayOfFieldsets.prototype.compareVectorsEx=function(e,t){for(var r,i=this.fieldLength,a=0;a<i;a++)if(0!==(r=this.fieldCompare[a](e[a],t[a])))return{index:a,result:r};return{index:-1,result:0}},ArrayOfFieldsets.prototype.getIndexOfDifferences=function(e,t){return null===t||null===e?0:this.compareVectorsEx(e,t).index},ArrayOfFieldsets.prototype.compareVectors=function(e,t){e=this.compareVectorsEx(e,t);return 0<(0<=e.index?this.fieldSortDirection[e.index]:1)?e.result:-e.result},ArrayOfFieldsets.prototype.getItem=function(e){return this.items[e]},ArrayOfFieldsets.prototype.getIndexLength=function(){return this.items.length},ArrayOfFieldsets.prototype.getIndexesOfSourceData=function(e){return this.indexesOfSourceData[e]},ArrayOfFieldsets.prototype.createDataIndex=function(e){for(var t,r,i,a,o,l,n,s,d=e.length,c=this.fieldLength,u=this.fieldNames,p=this.indexesOfSourceData,h=this.items,f=0;f<d;f++){for(l=e[f],t=new Array(c),i=0;i<c;i++)void 0!==(r=l[u[i]])&&("string"==typeof r&&this.trimByCollect&&(r=$.jgrid.trim(r)),t[i]=r);if((s=h.length-1)<(n=0))h.push(t),p.push([f]);else if(0===(a=this.compareVectors(t,h[s])))p[s].push(f);else if(1===a||this.skipSort)h.push(t),p.push([f]);else if(1===(a=this.compareVectors(h[0],t)))h.unshift(t),p.unshift([f]);else if(0===a)p[0].push(f);else for(;;){if(s-n<2){h.splice(s,0,t),p.splice(s,0,[f]);break}if(o=Math.floor((n+s)/2),0===(a=this.compareVectors(h[o],t))){p[o].push(f);break}1===a?s=o:n=o}}},jgrid.extend({pivotSetup:function(i,t){function A(e,t,r){return t=new ArrayOfFieldsets(C.trimByCollect,C.caseSensitive,t,e),$.jgrid.isFunction(r)&&(t.compareVectorsEx=r),t.createDataIndex(i),t}function e(e,t,r){for(var i,a=0;a<F;a++)void 0===(i=S[a]).template&&void 0===i.formatter&&C.defaultFormatting&&(i.template="count"===i.aggregator?"integer":"number"),ae.push(se(e,i,a,t,r))}function T(e,t,r){for(var i,a,o,l=R-1;t<=l;l--)if(I[l]){for(i=0;i<=l;i++)(Y=_[i].groupHeaders)[Y.length-1].numberOfColumns+=F;for(a=(n=D[l]).totalHeader,o=n.headerOnTop,i=l+1;i<=R-1;i++)_[i].groupHeaders.push({titleText:o&&i===l+1||!o&&i===R-1?$.jgrid.isFunction(a)?a.call(x,r,l):jgrid.template.call(x,String(a||""),r[l],l):"",startColumnName:"y"+(e-1)+"t"+l+(1===F?"":"a0"),numberOfColumns:F})}}function M(e,t,r,i){var a,o,l,n=y.getIndexOfDifferences(t,r);if(null!==r)for(n=Math.max(n,0),a=R-1;n<=a;a--)o="y"+e+"t"+a+(1<F?"a"+i:""),I[a]&&void 0===b[o]&&((l=O[a][i]).getResult(b,o),b.pivotInfos[o]={colType:1,iA:i,a:S[i],level:a,iRows:l.groupInfo.iRows,rows:l.groupInfo.rows,ys:l.groupInfo.ys,iYs:l.groupInfo.iYs},t!==r)&&(O[a][i]=de(i))}var r,a,o,B,l,n,s,d,c,u,P,z,L,p,V,h,H,W,f,g,U,m,v,b,w,Y,X,Q,y,j,x=this[0],J=Array.isArray,Z={},K={groupField:[],groupSummary:[],groupSummaryPos:[]},ee={grouping:!0,groupingView:K},C=$.extend({totals:!1,useColSpanStyle:!1,trimByCollect:!0,skipSortByX:!1,skipSortByY:!1,caseSensitive:!1,footerTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1,defaultFormatting:!0,data:i},t||{}),te=(i.length,C.xDimension),D=C.yDimension,S=C.aggregates,re=C.totalText||C.totals||C.rowTotals||C.totalHeader,q=J(te)?te.length:0,ie=J(D)?D.length:0,F=J(S)?S.length:0,R=ie-(1===F?1:0),_=[],I=[],ae=[],oe=[],le=["pivotInfos"],ne=new Array(F),O=new Array(ie),se=function(e,t,r,i,a){var o,l;switch(e){case 1:o=D[i].totalText||"{0} {1} {2}",l="y"+a+"t"+i;break;case 2:o=C.totalText||"{0}",l="t";break;default:o=1<F?t.label||"{0}":$.jgrid.isFunction(D[i].label)?D[i].label:y.getItem(a)[i],l="y"+a}return delete(e=$.extend({},t,{name:l+(1<F?"a"+r:""),label:$.jgrid.isFunction(o)?o.call(x,2===e?{aggregate:t,iAggregate:r,pivotOptions:C}:1===e?{yIndex:y.getItem(a),aggregate:t,iAggregate:r,yLevel:i,pivotOptions:C}:{yData:y.getItem(a)[i],yIndex:y.getItem(a),yLevel:i,pivotOptions:C}):jgrid.template.apply(x,2===e?[String(o),t.aggregator,t.member,r]:[String(o),t.aggregator,t.member,y.getItem(a)[i],i])})).member,delete e.aggregator,e},de=function(e){e=new Aggregation("count"===S[e].aggregator?"sum":S[e].aggregator,x,t);return e.groupInfo={iRows:[],rows:[],ys:[],iYs:[]},e};if(0===q||0===F)throw"xDimension or aggregates options are not set!";for(Q=A(te,C.skipSortByX,C.compareVectorsByX),y=A(D,C.skipSortByY,C.compareVectorsByY),t.xIndex=Q,t.yIndex=y,a=0;a<q;a++)s={name:"x"+a,label:null!=(l=te[a]).label?$.jgrid.isFunction(l.label)?l.label.call(x,l,a,C):l.label:l.dataName,frozen:C.frozenStaticCols},a<q-1&&!l.skipGrouping&&!l.additionalProperty&&(K.groupField.push(s.name),K.groupSummary.push(C.groupSummary),K.groupSummaryPos.push(C.groupSummaryPos)),delete(s=$.extend(s,l)).dataName,delete s.footerText,l.additionalProperty?le.push(s.name):(ae.push(s),ee.sortname=s.name);for(q<2&&(ee.grouping=!1),K.hideFirstGroupCol=!0,a=0;a<ie;a++)n=D[a],I.push(!!(n.totals||n.rowTotals||n.totalText||n.totalHeader));for(w=y.getItem(0),e(0,ie-1,0),j=y.getIndexLength(),f=1;f<j;f++){for(g=y.getItem(f),a=y.getIndexOfDifferences(g,w),o=R-1;a<=o;o--)I[o]&&e(1,o,f-1);w=g,e(0,ie-1,f)}for(a=R-1;0<=a;a--)I[a]&&e(1,a,j-1);for(re&&e(2),w=y.getItem(0),o=0;o<R;o++)_.push({useColSpanStyle:C.useColSpanStyle,groupHeaders:[{titleText:$.jgrid.isFunction(D[o].label)?D[o].label.call(x,{yData:w[o],yIndex:w,yLevel:o,pivotOptions:C}):w[o],startColumnName:1===F?"y0":"y0a0",numberOfColumns:F}]});for(f=1;f<j;f++){for(g=y.getItem(f),T(f,a=y.getIndexOfDifferences(g,w),w),o=R-1;a<=o;o--)_[o].groupHeaders.push({titleText:$.jgrid.isFunction(D[o].label)?D[o].label.call(x,{yData:g[o],yIndex:g,yLevel:o,pivotOptions:C}):g[o],startColumnName:"y"+f+(1===F?"":"a0"),numberOfColumns:F});for(o=0;o<a;o++)(Y=_[o].groupHeaders)[Y.length-1].numberOfColumns+=F;w=g}if(T(j,0,w),re)for(a=0;a<R;a++)_[a].groupHeaders.push({titleText:!(a<R-1)&&C.totalHeader||"",startColumnName:"t"+(1===F?"":"a0"),numberOfColumns:F});for(H=Q.getIndexLength(),u=0;u<H;u++){for(P=Q.getItem(u),b={pivotInfos:z={iX:u,x:P}},a=0;a<q;a++)b["x"+a]=P[a];if(W=Q.getIndexesOfSourceData(u),re)for(o=0;o<F;o++)ne[o]=de(o);w=null,G=k=void 0;for(var G,k=R-1;0<=k;k--)if(I[k])for(null==O[k]&&(O[k]=new Array(F)),G=0;G<F;G++)O[k][G]=de(G);for(f=0;f<j;f++){for(g=y.getItem(f),U=y.getIndexesOfSourceData(f),o=0;o<F;o++){for(null!==w&&M(f-1,g,w,o),m=[],a=0;a<U.length;a++)X=U[a],0<=$.inArray(X,W)&&m.push(X);if(0<m.length){for(L=new Array(m.length),p=new Aggregation((v=S[o]).aggregator,x,t),d=0;d<m.length;d++){r=i[a=m[d]],L[d]=r,p.calc(r[v.member],v.member,r,a,i),re&&((V=ne[o]).calc(r[v.member],v.member,r,a,i),h=V.groupInfo,$.inArray(a,h.iYs)<0&&(h.iYs.push(f),h.ys.push(g)),$.inArray(a,h.iRows)<0)&&(h.iRows.push(a),h.rows.push(r)),E=N=void 0;var N,E,ce=g,ue=v,pe=o,he=r,fe=a,ge=f;if(ce!==w)for(N=R-1;0<=N;N--)I[N]&&((E=O[N][pe]).calc(he[ue.member],ue.member,he,fe,i),E=E.groupInfo,$.inArray(ge,E.iYs)<0&&(E.iYs.push(ge),E.ys.push(ce)),$.inArray(fe,E.iRows)<0)&&(E.iRows.push(fe),E.rows.push(he))}p.getResult(b,c="y"+f+(1===F?"":"a"+o)),z[c]={colType:0,iY:f,y:g,iA:o,a:v,iRows:m,rows:L}}}w=g}if(null!==w)for(o=0;o<F;o++)M(j-1,w,w,o);if(re)for(o=0;o<F;o++)(V=ne[o]).getResult(b,c="t"+(1===F?"":"a"+o)),h=V.groupInfo,z[c]={colType:2,iA:o,a:S[o],iRows:h.iRows,rows:h.rows,iYs:h.iYs,ys:h.ys};oe.push(b)}if(C.footerTotals||C.colTotals){for(B=oe.length,a=0;a<q;a++)Z["x"+a]=te[a].footerText||"";for(a=q;a<ae.length;a++){for(c=ae[a].name,p=new Aggregation(C.footerAggregator||"sum",x,t),d=0;d<B;d++)b=oe[d],p.calc(b[c],c,b,d,oe);p.getResult(Z,c)}}return t.colHeaders=_,{colModel:ae,additionalProperties:le,options:t,rows:oe,groupOptions:ee,groupHeaders:_,summary:Z}},jqPivot:function(d,c,u,r){return this.each(function(){var l=this,n=$(l),s=$.fn.jqGrid;function t(){var e,t=s.pivotSetup.call(n,d,c),r=t.groupHeaders,i=0<function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r}(t.summary),a=t.groupOptions.groupingView,o=jgrid.from.call(l,t.rows);if(!c.skipSortByX)for(e=0;e<a.groupField.length;e++)o.orderBy(a.groupField[e],null!=u&&u.groupingView&&null!=u.groupingView.groupOrder&&"desc"===u.groupingView.groupOrder[e]?"d":"a","text","");if(c.data=d,s.call(n,$.extend(!0,{datastr:$.extend(o.select(),i?{userdata:t.summary}:{}),datatype:"jsonstring",footerrow:i,userDataOnFooter:i,colModel:t.colModel,additionalProperties:t.additionalProperties,pivotOptions:t.options,viewrecords:!0,sortname:c.xDimension[0].dataName},t.groupOptions,u||{})),r.length)for(e=0;e<r.length;e++)r[e]&&r[e].groupHeaders.length&&s.setGroupHeaders.call(n,r[e]);c.frozenStaticCols&&s.setFrozenColumns.call(n)}"string"==typeof d?$.ajax($.extend({url:d,dataType:"json",success:function(e){d=jgrid.getAccessor(e,r&&r.reader?r.reader:"rows"),t()}},r||{})):t()})}});var subGridFeedback=function(){var e=$.makeArray(arguments);return e[0]="subGrid"+e[0].charAt(0).toUpperCase()+e[0].substring(1),e.unshift(""),e.unshift(""),e.unshift(this.p),jgrid.feedback.apply(this,e)},collapseOrExpand=function(t,r){return this.each(function(){var e;this.grid&&null!=t&&!0===this.p.subGrid&&(e=$(this).jqGrid("getInd",t,!0),$(e).find(">td."+r).trigger("click"))})},treeGridFeedback=(jgrid.extend({setSubGrid:function(){return this.each(function(){function e(e){return i.jqGrid("getIconRes",e)}var t,r=this.p,i=$(this),a=r.subGridModel[0];if(r.subGridOptions=$.extend({commonIconClass:e("subgrid.common"),plusicon:e("subgrid.plus"),minusicon:e("subgrid.minus"),openicon:"rtl"===r.direction?e("subgrid.openRtl"):e("subgrid.openLtr"),expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},r.subGridOptions||{}),r.colNames.unshift(""),r.colModel.unshift({name:"subgrid",width:jgrid.cell_width?r.subGridWidth+r.cellLayout:r.subGridWidth,labelClasses:"jqgh_subgrid",sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0,frozen:!0}),a)for(a.align=$.extend([],a.align||[]),t=0;t<a.name.length;t++)a.align[t]=a.align[t]||"left"})},addSubGridCell:function(e,t,r,i){var a=this[0],o=a.p.subGridOptions,r=!$.jgrid.isFunction(o.hasSubgrid)||o.hasSubgrid.call(a,{rowid:r,iRow:t,iCol:e,data:i});return null==a.p?"":"<td role='gridcell' class='"+base.getGuiStyles.call(this,"subgrid.tdStart",r?"ui-sgcollapsed sgcollapsed":"")+"' "+a.formatCol(e,t)+">"+(r?"<div class='"+base.getGuiStyles.call(this,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(this,"subgrid.button","sgbutton")+"'><span class='"+jgrid.mergeCssClasses(o.commonIconClass,o.plusicon)+"'></span></a></div>":"&nbsp;")+"</td>"},addSubGrid:function(w,y){return this.each(function(){function e(){function e(e){return jgrid.mergeCssClasses(d.subGridOptions.commonIconClass,d.subGridOptions[e])}var t,r=$(this).parent("tr")[0],i=r.nextSibling,a=r.id,o=d.id+"_"+a,l=1;if($.each(d.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||l++}),$(this).hasClass("sgcollapsed")){if(!0===d.subGridOptions.reloadOnExpand||!1===d.subGridOptions.reloadOnExpand&&!$(i).hasClass("ui-subgrid")){if(t=1<=w?"<td colspan='"+w+"'>&#160;</td>":"",!subGridFeedback.call(n,"beforeExpand",o,a))return;$(r).after("<tr role='row' class='"+h+"'>"+t+"<td class='"+f+"'><span class='"+e("openicon")+"'></span></td><td colspan='"+parseInt(d.colNames.length-l,10)+"' class='"+g+"'><div id='"+o+"' class='tablediv'></div></td></tr>"),$(n).triggerHandler("jqGridSubGridRowExpanded",[o,a]),$.jgrid.isFunction(d.subGridRowExpanded)?d.subGridRowExpanded.call(n,o,a):b(r)}else $(i).show();$(this).html("<div class='"+base.getGuiStyles.call(n,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(n,"subgrid.button","sgbutton")+"'><span class='"+e("minusicon")+"'></span></a></div>").removeClass("sgcollapsed").addClass("sgexpanded"),d.subGridOptions.selectOnExpand&&$(n).jqGrid("setSelection",a)}else if($(this).hasClass("sgexpanded")){if(!subGridFeedback.call(n,"beforeCollapse",o,a))return;!0===d.subGridOptions.reloadOnExpand?$(i).remove(".ui-subgrid"):$(i).hasClass("ui-subgrid")&&$(i).hide(),$(this).html("<div class='"+base.getGuiStyles.call(n,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+base.getGuiStyles.call(n,"subgrid.button","sgbutton")+"'><span class='"+e("plusicon")+"'></span></a></div>").removeClass("sgexpanded").addClass("sgcollapsed"),d.subGridOptions.selectOnCollapse&&$(n).jqGrid("setSelection",a)}return!1}var t,r,i,n=this,d=n.p,c=d.subGridModel[0],s=function(e,t){return base.getGuiStyles.call(n,"subgrid."+e,t||"")},u=s("thSubgrid","ui-th-subgrid ui-th-column ui-th-"+d.direction),p=s("rowSubTable","ui-subtblcell"),h=s("row","ui-subgrid ui-row-"+d.direction),f=s("tdWithIcon","subgrid-cell"),g=s("tdData","subgrid-data"),m=function(e,t,r){r=c.align[r],r=$("<td"+(r?" style='text-align:"+r+";'":"")+"></td>").html(t);e.append(r)},o=function(e,i){var a=d.xmlReader.subgrid;$(a.root+" "+a.row,e).each(function(){var e,t,r=$("<tr class='"+p+"'></tr>");if(!0===a.repeatitems)$(a.cell,this).each(function(e){m(r,$(this).text()||"&#160;",e)});else if(e=c.mapping||c.name)for(t=0;t<e.length;t++)m(r,jgrid.getXmlData(this,e[t])||"&#160;",t);i.append(r)})},l=function(e,t){var r,i,a,o,l,n=d.jsonReader.subgrid,s=jgrid.getAccessor(e,n.root);if(null!=s)for(i=0;i<s.length;i++){if(l=s[i],r=$("<tr class='"+p+"'></tr>"),!0===n.repeatitems)for(n.cell&&(l=l[n.cell]),a=0;a<l.length;a++)m(r,l[a]||"&#160;",a);else if((o=c.mapping||c.name).length)for(a=0;a<o.length;a++)m(r,jgrid.getAccessor(l,o[a])||"&#160;",a);t.append(r)}},v=function(e,t,r){var i,a,o=s("legacyTable","ui-jqgrid-legacy-subgrid"+(!0===d.altRows&&$(n).jqGrid("isBootstrapGuiStyle")?" table-striped":"")),o=$("<table"+(o?" style='width:1px' role='presentation' class='"+o+"'":"")+"><thead></thead><tbody></tbody></table>"),l=$("<tr></tr>");for(n.grid.endReq.call(n),a=0;a<c.name.length;a++)i=$("<th class='"+u+"'></th>").html(c.name[a]).width(c.width[a]),l.append(i);return l.appendTo(o[0].tHead),r(e,$(o[0].tBodies[0])),$("#"+jqID(d.id+"_"+t)).append(o),!1},b=function(e){var t,r,i=$(e).attr("id"),a={nd_:(new Date).getTime()};if(a[d.prmNames.subgridid]=i,c){if(c.params)for(r=0;r<c.params.length;r++)void 0!==(t=d.iColByName[c.params[r]])&&(a[d.colModel[t].name]=$(e.cells[t]).text().replace(/\&#160\;/gi,""));if(!n.grid.hDiv.loading)switch(n.grid.beginReq.call(n),d.subgridtype||(d.subgridtype=d.datatype),$.jgrid.isFunction(d.subgridtype)?d.subgridtype.call(n,a):d.subgridtype=d.subgridtype.toLowerCase(),d.subgridtype){case"xml":case"json":$.ajax($.extend({type:d.mtype,url:$.jgrid.isFunction(d.subGridUrl)?d.subGridUrl.call(n,a):d.subGridUrl,dataType:d.subgridtype,context:i,data:jgrid.serializeFeedback.call(n,d.serializeSubGridData,"jqGridSerializeSubGridData",a),success:function(e){v(e,this,"xml"===d.subgridtype?o:l)},error:function(e,t,r){var i=void 0===d.loadSubgridError?d.loadError:d.loadSubgridError;n.grid.endReq.call(n),$.jgrid.isFunction(i)&&i.call(n,e,t,r),d.subGridOptions.noEmptySubgridOnError||v(null,this,"xml"===d.subgridtype?o:l)}},jgrid.ajaxOptions,d.ajaxSubgridOptions||{}))}}return!1},a=1;if(n.grid){for(t=n.rows.length,void 0!==y&&0<y&&(t=(a=y)+1);a<t;)r=n.rows[a],$(r).hasClass("jqgrow")&&(r=$(r.cells[w])).hasClass("ui-sgcollapsed")&&(d.scroll&&r.off("click"),r.on("click",e)),a++;!0===d.subGridOptions.expandOnLoad&&(i=d.iColByName.subgrid,$(n.rows).filter(".jqgrow").each(function(e,t){$(t.cells[i]).filter(".sgcollapsed").children(".sgbutton-div").children(".sgbutton").click()})),n.subGridXml=function(e,t){return v(e,t,o)},n.subGridJson=function(e,t){return v(e,t,l)}}})},expandSubGridRow:function(e){return collapseOrExpand.call(this,e,"sgcollapsed")},collapseSubGridRow:function(e){return collapseOrExpand.call(this,e,"sgexpanded")},toggleSubGridRow:function(e){return collapseOrExpand.call(this,e,"ui-sgcollapsed")}}),window.tableToGrid=function(e,p){$(e).each(function(){var e,t,r,a,i,o,l=$(this),n=[],s=[],d=[],c=[],u=[];if(!this.grid){for(l.width("99%"),e=l.width(),t=$("tr td:first-child input[type=checkbox]:first",l),r=$("tr td:first-child input[type=radio]:first",l),r=!(t=0<t.length)&&0<r.length,a=t||r,$("th",l).each(function(){0===n.length&&a?(n.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),s.push("__selection__")):(n.push({name:$(this).attr("id")||$.jgrid.trim($.jgrid.stripHtml($(this).html())).split(" ").join("_"),index:$(this).attr("id")||$.jgrid.trim($.jgrid.stripHtml($(this).html())).split(" ").join("_"),width:$(this).width()||150}),s.push($(this).html()))}),$("tbody > tr",l).each(function(){var r={},i=0;$("td",$(this)).each(function(){var e,t;0===i&&a?(t=(e=$("input",$(this))).attr("value"),c.push(t||d.length),e.is(":checked")&&u.push(t),r[n[i].name]=e.attr("value")):r[n[i].name]=$(this).html(),i++}),0<i&&d.push(r)}),l.empty(),l.jqGrid($.extend({datatype:"local",width:e,colNames:s,colModel:n,multiselect:t},p||{})),i=0;i<d.length;i++)(o=null)===(o=0<c.length&&(o=c[i])&&o.replace?encodeURIComponent(o).replace(/[.\-%]/g,"_"):o)&&(o=$.jgrid.randId()),l.jqGrid("addRowData",o,d[i]);for(i=0;i<u.length;i++)l.jqGrid("setSelection",u[i])}})},function(){var e=$.makeArray(arguments);return e[0]="treeGrid"+e[0].charAt(0).toUpperCase()+e[0].substring(1),e.unshift(""),e.unshift(""),e.unshift(this.p),jgrid.feedback.apply(this,e)}),getNodeIcons=function(e,t){var t=t[e.treeReader.icon_field],e=e.treeIcons,r=e.plus+" tree-plus",i=e.minus+" tree-minus";return t&&"string"==typeof t&&2===(t=t.split(",")).length&&(i=t[0],r=t[1]),{expanded:i,collapsed:r,common:e.commonIconClass}},namespace=(jgrid.extend({setTreeNode:function(){return this.each(function(){var l,n,s=$(this),d=this.p;this.grid&&d.treeGrid&&(l=d.treeReader.expanded_field,n=d.treeReader.leaf_field,s.off("jqGridBeforeSelectRow.setTreeNode"),s.on("jqGridBeforeSelectRow.setTreeNode",function(e,r,t){var i,a,o;if(null!=t)return i=(t=$(t.target)).closest("tr.jqgrow>td"),a=i.parent(),o=function(){var e=d.data[d._index[stripPref(d.idPrefix,r)]],t=e[l]?"collapse":"expand";e[n]||(base[t+"Row"].call(s,e,a),base[t+"Node"].call(s,e,a))},(t.is("div.treeclick")||d.ExpandColClick&&0<i.length&&0<t.closest("span.cell-wrapper",i).length)&&o(),!0}))})},setTreeGrid:function(){return this.each(function(){var e,t,r,i=this.p,a=[],o=["leaf_field","expanded_field","loaded"];if(i.treeGrid){for(t in i.treedatatype||$.extend(this.p,{treedatatype:i.datatype}),i.subGrid=!1,i.altRows=!1,i.pgbuttons=!1,i.pginput=!1,i.gridview=!0,null===i.rowTotal&&(i.rowNum=i.maxRowNum),i.rowList=[],i.treeIcons.plus="rtl"===i.direction?i.treeIcons.plusRtl:i.treeIcons.plusLtr,"nested"===i.treeGridModel?i.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},i.treeReader):"adjacency"===i.treeGridModel&&(i.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},i.treeReader)),i.colModel)if(i.colModel.hasOwnProperty(t))for(r in e=i.colModel[t].name,i.treeReader)i.treeReader.hasOwnProperty(r)&&i.treeReader[r]===e&&a.push(e);$.each(i.treeReader,function(e){var t=String(this);t&&-1===$.inArray(t,a)&&(0<=$.inArray(e,o)?i.additionalProperties.push({name:t,search:!1,convert:function(e){return!0===e||"true"===String(e).toLowerCase()||"1"===String(e)||e}}):i.additionalProperties.push(t))})}})},expandRow:function(o){this.each(function(){var t,e,r,i=$(this),a=this.p;this.grid&&a.treeGrid&&(t=a.treeReader.expanded_field,e=o[a.localReader.id],treeGridFeedback.call(this,"beforeExpandRow",{rowid:e,item:o}))&&(r=base.getNodeChildren.call(i,o),$(r).each(function(){var e=a.idPrefix+getAccessor(this,a.localReader.id);$(base.getGridRowById.call(i,e)).css("display",""),this[t]&&base.expandRow.call(i,this)}),treeGridFeedback.call(this,"afterExpandRow",{rowid:e,item:o}))})},collapseRow:function(o){this.each(function(){var t,e,r,i=$(this),a=this.p;this.grid&&a.treeGrid&&(t=a.treeReader.expanded_field,e=o[a.localReader.id],treeGridFeedback.call(this,"beforeCollapseRow",{rowid:e,item:o}))&&(r=base.getNodeChildren.call(i,o),$(r).each(function(){var e=a.idPrefix+getAccessor(this,a.localReader.id);$(base.getGridRowById.call(i,e)).css("display","none"),this[t]&&base.collapseRow.call(i,this)}),treeGridFeedback.call(this,"afterCollapseRow",{rowid:e,item:o}))})},getRootNodes:function(){var i=[];return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":var t=e.treeReader.level_field;$(e.data).each(function(){parseInt(this[t],10)===parseInt(e.tree_root_level,10)&&i.push(this)});break;case"adjacency":var r=e.treeReader.parent_id_field;$(e.data).each(function(){null!==this[r]&&"null"!==String(this[r]).toLowerCase()||i.push(this)})}}),i},getNodeDepth:function(r){var i=null;return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":var t=e.treeReader.level_field;i=parseInt(r[t],10)-parseInt(e.tree_root_level,10);break;case"adjacency":i=base.getNodeAncestors.call($(this),r).length}}),i},getNodeParent:function(e){var t,r,i,a,o,l,n,s,d,c=this[0];return c&&c.grid&&null!=c.p&&c.p.treeGrid&&null!=e?(t=e[(d=(c=c.p).treeReader).parent_id_field],"nested"===c.treeGridModel?(r=null,i=d.left_field,a=d.right_field,o=d.level_field,l=parseInt(e[i],10),n=parseInt(e[a],10),s=parseInt(e[o],10),$(c.data).each(function(){if(parseInt(this[o],10)===s-1&&parseInt(this[i],10)<l&&parseInt(this[a],10)>n)return r=this,!1}),r):null!==t&&"null"!==t&&void 0!==(d=c._index[t])?c.data[d]:null):null},getNodeChildren:function(d){var c=[];return this.each(function(){var e=this.p;if(this.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":var t=e.treeReader.left_field,r=e.treeReader.right_field,i=e.treeReader.level_field,a=parseInt(d[t],10),o=parseInt(d[r],10),l=parseInt(d[i],10);$(e.data).each(function(){parseInt(this[i],10)===l+1&&parseInt(this[t],10)>a&&parseInt(this[r],10)<o&&c.push(this)});break;case"adjacency":var n=e.treeReader.parent_id_field,s=e.localReader.id;$(e.data).each(function(){String(this[n])===String(d[s])&&c.push(this)})}}),c},getFullTreeNode:function(c){var u=[];return this.each(function(){var t,r,i,e=this.p;if(this.grid&&e.treeGrid)switch(e.treeGridModel){case"nested":var a=e.treeReader.left_field,o=e.treeReader.right_field,l=e.treeReader.level_field,n=parseInt(c[a],10),s=parseInt(c[o],10),d=parseInt(c[l],10);$(e.data).each(function(){parseInt(this[l],10)>=d&&parseInt(this[a],10)>=n&&parseInt(this[a],10)<=s&&u.push(this)});break;case"adjacency":c&&(u.push(c),r=e.treeReader.parent_id_field,i=e.localReader.id,$(e.data).each(function(){var e;for(t=u.length,e=0;e<t;e++)if(String(u[e][i])===String(this[r])){u.push(this);break}}))}}),u},getNodeAncestors:function(i){var a=[];return this.each(function(){var e=$(this),t=base.getNodeParent;if(this.grid&&this.p.treeGrid)for(var r=t.call(e,i);r;)a.push(r),r=t.call(e,r)}),a},isVisibleNode:function(i){var a=!0;return this.each(function(){var e,t,r=this.p;this.grid&&r.treeGrid&&(e=base.getNodeAncestors.call($(this),i),t=r.treeReader.expanded_field,$(e).each(function(){if(!(a=a&&this[t]))return!1}))}),a},isNodeLoaded:function(r){var i;return this.each(function(){var e,t=this.p;this.grid&&t.treeGrid&&(e=t.treeReader.leaf_field,t=t.treeReader.loaded,i=void 0!==r&&(void 0!==r[t]?r[t]:!!(r[e]||0<base.getNodeChildren.call($(this),r).length)))}),i},expandNode:function(l){return this.each(function(){var e,t,r,i,a=this,o=a.p;a.grid&&o.treeGrid&&(i=o.treeReader,l[i.expanded_field]||(e=getAccessor(l,o.localReader.id),treeGridFeedback.call(a,"beforeExpandNode",{rowid:e,item:l})&&(t=$("#"+o.idPrefix+jqID(e),a.grid.bDiv)[0],l[i.expanded_field]=!0,r=getNodeIcons(o,l),$("div.treeclick",t).removeClass(r.collapsed).addClass(r.common).addClass(r.expanded),"local"===o.treedatatype||base.isNodeLoaded.call($(a),o.data[o._index[e]])||a.grid.hDiv.loading||(o.treeANode=t.rowIndex,o.datatype=o.treedatatype,base.setGridParam.call($(a),{postData:"nested"===o.treeGridModel?{nodeid:e,n_level:l[i.level_field],n_left:l[i.left_field],n_right:l[i.right_field]}:{nodeid:e,n_level:l[i.level_field],parentid:l[i.parent_id_field]}}),$(a).trigger("reloadGrid"),l[i.loaded]=!0,base.setGridParam.call($(a),{postData:"nested"===o.treeGridModel?{nodeid:"",n_level:"",n_left:"",n_right:""}:{nodeid:"",n_level:"",parentid:""}})),treeGridFeedback.call(a,"afterExpandNode",{rowid:e,item:l}))))})},collapseNode:function(i){return this.each(function(){var e,t,r=this.p;this.grid&&r.treeGrid&&(e=r.treeReader.expanded_field,i[e])&&(t=getAccessor(i,r.localReader.id),treeGridFeedback.call(this,"beforeCollapseNode",{rowid:t,item:i}))&&(i[e]=!1,e=getNodeIcons(r,i),$("#"+r.idPrefix+jqID(t),this.grid.bDiv).find("div.treeclick").removeClass(e.expanded).addClass(e.common).addClass(e.collapsed),(!0===r.unloadNodeOnCollapse||$.jgrid.isFunction(r.unloadNodeOnCollapse)&&r.unloadNodeOnCollapse.call(this,i))&&(i[r.treeReader.loaded]=!1,$(this).jqGrid("delTreeNode",t,!0)),treeGridFeedback.call(this,"afterCollapseNode",{rowid:t,item:i}))})},SortTree:function(d,c,u,p){return this.each(function(){var r=this,i=r.p,a=$(r);if(r.grid&&i.treeGrid){for(var e,t=[],o=base.getRootNodes.call(a),o=jgrid.from.call(r,o),l=(o.orderBy(d,c,u,p),o.select()),n=0,s=l.length;n<s;n++)e=l[n],t.push(e),base.collectChildrenSortTree.call(a,t,e,d,c,u,p);$.each(t,function(e){var t=getAccessor(this,i.localReader.id);$(r.rows[e]).after(a.find(">tbody>tr#"+jqID(t)))})}})},collectChildrenSortTree:function(l,n,s,d,c,u){return this.each(function(){var e=$(this);if(this.grid&&this.p.treeGrid)for(var t,r=base.getNodeChildren.call(e,n),r=jgrid.from.call(this,r),i=(r.orderBy(s,d,c,u),r.select()),a=0,o=i.length;a<o;a++)t=i[a],l.push(t),base.collectChildrenSortTree.call(e,l,t,s,d,c,u)})},setTreeRow:function(e,t){var r=!1;return this.each(function(){this.grid&&this.p.treeGrid&&(r=base.setRowData.call($(this),e,t))}),r},delTreeNode:function(p,h){return this.each(function(){var e,t,r,i=this.p,a=i.localReader.id,o=$(this),l=i.treeReader.left_field,n=i.treeReader.right_field;if(this.grid&&i.treeGrid){var s=i._index[p];if(void 0!==s){var d,c=(d=parseInt(i.data[s][n],10))-parseInt(i.data[s][l],10)+1,u=base.getFullTreeNode.call(o,i.data[s]);if(0<u.length)for(r=0;r<u.length;r++)h&&p===u[r][a]||base.delRowData.call(o,u[r][a]);if("nested"===i.treeGridModel){if((e=jgrid.from.call(this,i.data).greater(l,d,{stype:"integer"}).select()).length)for(t in e)e.hasOwnProperty(t)&&(e[t][l]=parseInt(e[t][l],10)-c);if((e=jgrid.from.call(this,i.data).greater(n,d,{stype:"integer"}).select()).length)for(t in e)e.hasOwnProperty(t)&&(e[t][n]=parseInt(e[t][n],10)-c)}}}})},addChildNode:function(q,F,R,_){return this.each(function(){if(R){var e,t,r,i,a,o,l=this.p,n=$(this),s=base.getInd,d=l.treeIcons.minus+" tree-minus",c=F,u=l.treeReader.expanded_field,p=l.treeReader.leaf_field,h=l.treeReader.level_field,f=l.treeReader.parent_id_field,g=l.treeReader.left_field,m=l.treeReader.right_field,v=l.treeReader.loaded,b=(void 0===_&&(_=!1),null==q&&(q=jgrid.randId()),s.call(n,F)),w=!1;if(null==F||""===F)c=F=null,e="last",j=l.tree_root_level;else{e="after",t=l._index[F],r=l.data[t],F=r[l.localReader.id];var y=s.call(n,F),j=parseInt(r[h],10)+1,x=base.getFullTreeNode.call(n,r);if(x.length)for(var C,D,S=0;S<x.length;S++)D=x[S][l.localReader.id],y<(C=s.call(n,D))&&(y=C,c=D);r[p]&&(r[u]=w=!0,$(this.rows[b]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(l.treeIcons.leaf+" tree-leaf").addClass(l.treeIcons.commonIconClass).addClass(d),l.data[t][p]=!1,r[v]=!0)}if(void 0===R[u]&&(R[u]=!1),void 0===R[v]&&(R[v]=!1),R[h]=j,void 0===R[p]&&(R[p]=!0),"adjacency"===l.treeGridModel&&(R[f]=F),"nested"===l.treeGridModel)if(null!==F){if(i=parseInt(r[m],10),(a=jgrid.from.call(this,l.data).greaterOrEquals(m,i,{stype:"integer"}).select()).length)for(o in a)a.hasOwnProperty(o)&&(a[o][g]=a[o][g]>i?parseInt(a[o][g],10)+2:a[o][g],a[o][m]=a[o][m]>=i?parseInt(a[o][m],10)+2:a[o][m]);R[g]=i,R[m]=i+1}else{if(i=parseInt(base.getCol.call(n,m,!1,"max"),10),(a=jgrid.from.call(this,l.data).greater(g,i,{stype:"integer"}).select()).length)for(o in a)a.hasOwnProperty(o)&&(a[o][g]=parseInt(a[o][g],10)+2);if((a=jgrid.from.call(this,l.data).greater(m,i,{stype:"integer"}).select()).length)for(o in a)a.hasOwnProperty(o)&&(a[o][m]=parseInt(a[o][m],10)+2);R[g]=i+1,R[m]=i+2}(null===F||base.isNodeLoaded.call(n,r)||w)&&base.addRowData.call(n,q,R,e,c),r&&!r[u]&&_&&$(this.rows[b]).find("div.treeclick").click()}})}}),".jqGrid"),mouseDown="mousedown",mouseMove="mousemove",mouseUp="mouseup",getMouseCoordinates=function(e){var t=e.originalEvent.targetTouches;return t?{x:(t=t[0]).pageX,y:t.pageY}:{x:e.pageX,y:e.pageY}},jqDnR={drag:function(e){var t=e.data,r=t.e,i=t.dnr,a=t.ar,t=t.dnrAr,e=getMouseCoordinates(e);return"move"===i.k?r.css({left:i.X+e.x-i.pX,top:i.Y+e.y-i.pY}):(r.css({width:Math.max(e.x-i.pX+i.W,0),height:Math.max(e.y-i.pY+i.H,0)}),t&&a.css({width:Math.max(e.x-t.pX+t.W,0),height:Math.max(e.y-t.pY+t.H,0)})),!1},stop:function(){$(document).off(mouseMove,jqDnR.drag).off(mouseUp,jqDnR.stop)}},init=function(e,t,r,d){return e.each(function(){(t=t?$(t,e):e).on(mouseDown,{e:e,k:r},function(e){function t(e){return n(i,e)}function r(e){return n(a,e)}var i,a,o=e.data,l={},n=function(e,t){return parseInt(e.css(t),10)||!1},s=getMouseCoordinates(e);if(!$(e.target).hasClass("ui-jqdialog-titlebar-close")&&!$(e.target).parent().hasClass("ui-jqdialog-titlebar-close")){if(i=o.e,a=!!d&&$(d),"relative"!==i.css("position"))try{i.position(l)}catch(e){}if(e={X:l.left||t("left")||0,Y:l.top||t("top")||0,W:t("width")||i[0].scrollWidth||0,H:t("height")||i[0].scrollHeight||0,pX:s.x,pY:s.y,k:o.k},l=!(!a||"move"===o.k)&&{X:l.left||r("left")||0,Y:l.top||r("top")||0,W:a[0].offsetWidth||r("width")||0,H:a[0].offsetHeight||r("height")||0,pX:s.x,pY:s.y,k:o.k},0<(s=i.find("input.hasDatepicker")).length)try{s.datepicker("hide")}catch(e){}return o={e:i,dnr:e,ar:a,dnrAr:l},$(document).on(mouseMove,o,jqDnR.drag),$(document).on(mouseUp,o,jqDnR.stop),!1}})})},jqmHashLength=(window.PointerEvent?(mouseDown+=namespace+" pointerdown"+namespace,mouseMove+=namespace+" pointermove"+namespace,mouseUp+=namespace+" pointerup"+namespace):window.MSPointerEvent?(mouseDown+=namespace+" mspointerdown"+namespace,mouseMove+=namespace+" mspointermove"+namespace,mouseUp+=namespace+" mspointerup"):(mouseDown+=namespace+" touchstart"+namespace,mouseMove+=namespace+" touchmove"+namespace,mouseUp+=namespace+" touchend"+namespace),$.jqDnR=jqDnR,$.fn.jqDrag=function(e){return init(this,e,"move")},$.fn.jqResize=function(e,t){return init(this,e,"resize",t)},0),jqmHash,createdModals=[],setFocusOnFirstVisibleInput=function(e){try{$(":input:visible",e.w).first().focus()}catch(e){}},setFocus=function(e){setFocusOnFirstVisibleInput(e)},keyOrMouseEventHandler=function(e){function t(){var r=!1;return $(".jqmID"+i.s).each(function(){var e=$(this),t=e.offset();if(t.top<=l&&l<=t.top+e.height()&&t.left<=o&&o<=t.left+e.width())return!(r=!0)}),r}var i=jqmHash[createdModals[createdModals.length-1]],r=!$(e.target).parents(".jqmID"+i.s)[0],a=$(e.target).offset(),o=void 0!==e.pageX?e.pageX:a.left,l=void 0!==e.pageY?e.pageY:a.top;return!("mousedown"===e.type||!t())||("mousedown"===e.type&&(r=r&&(!t()&&r))&&!$(e.target).is(":input")&&setFocusOnFirstVisibleInput(i),!r)},bindOrUnbindEvents=function(e){$(document)[e]("keypress keydown mousedown",keyOrMouseEventHandler)},registerHideOrShow=function(e,t,r){return e.each(function(){var e=this._jqm;$(t).each(function(){this[r]||(this[r]=[],$(this).click(function(){for(var e,t,r=["jqmShow","jqmHide"],i=0;i<r.length;i++)for(t in this[e=r[i]])this[e].hasOwnProperty(t)&&jqmHash[this[e][t]]&&jqmHash[this[e][t]].w[e](this);return!1})),this[r].push(e)})})},fmatter=($.fn.jqm=function(e){var t={overlay:50,closeoverlay:!1,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:!1,ajaxText:"",target:!1,modal:!1,toTop:!1,onShow:!1,onHide:!1,onLoad:!1};return this.each(function(){if(this._jqm)return jqmHash[this._jqm].c=$.extend({},jqmHash[this._jqm].c,e),jqmHash[this._jqm].c;jqmHashLength++,this._jqm=jqmHashLength,jqmHash[jqmHashLength]={c:$.extend(t,$.jqm.params,e),a:!1,w:$(this).addClass("jqmID"+jqmHashLength),s:jqmHashLength},t.trigger&&$(this).jqmAddTrigger(t.trigger)})},$.fn.jqmAddClose=function(e){return registerHideOrShow(this,e,"jqmHide")},$.fn.jqmAddTrigger=function(e){return registerHideOrShow(this,e,"jqmShow")},$.fn.jqmShow=function(e){return this.each(function(){$.jqm.open(this._jqm,e)})},$.fn.jqmHide=function(e){return this.each(function(){$.jqm.close(this._jqm,e)})},$.jqm={hash:{},open:function(e,t){var r=jqmHash[e],i=r.c,a=(r.w.parent().offset(),"."+i.closeClass),o=0<(o=parseInt(r.w.css("z-index"),10))?o:3e3,l=$("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":o-1,opacity:i.overlay/100});return r.a||(r.t=t,r.a=!0,r.w.css("z-index",o),$(r.w[0].ownerDocument).data("ui-dialog-overlays")&&r.w.addClass("ui-dialog"),i.modal?(createdModals[0]||setTimeout(function(){bindOrUnbindEvents("bind")},1),createdModals.push(e)):0<i.overlay?i.closeoverlay&&r.w.jqmAddClose(l):l=!1,r.o=!!l&&l.addClass(i.overlayClass).prependTo("body"),i.ajax?(o=i.target||r.w,e=i.ajax,o="string"==typeof o?$(o,r.w):$(o),e="@"===e.substr(0,1)?$(t).attr(e.substring(1)):e,o.html(i.ajaxText).load(e,function(){i.onLoad&&i.onLoad.call(this,r),a&&r.w.jqmAddClose($(a,r.w)),setFocus(r)})):a&&r.w.jqmAddClose($(a,r.w)),i.toTop&&r.o&&(l=r.w.parent().offset(),t=parseFloat(r.w.css("left")||0),o=parseFloat(r.w.css("top")||0),r.w.before('<span id="jqmP'+r.w[0]._jqm+'"></span>').insertAfter(r.o),r.w.css({top:l.top+o,left:l.left+t})),i.onShow?i.onShow(r):r.w.show(),setFocus(r)),!1},close:function(e){e=jqmHash[e];return e.a&&(e.a=!1,createdModals[0]&&(createdModals.pop(),createdModals[0]||bindOrUnbindEvents("unbind")),e.c.toTop&&e.o&&$("#jqmP"+e.w[0]._jqm).after(e.w).remove(),e.c.onHide?e.c.onHide(e):(e.w.hide(),e.o&&e.o.remove())),!1},params:{}},jqmHash=$.jqm.hash,$.fmatter=$.fmatter||{},$.fmatter),getOptionByName=function(e,t){var r=e.formatoptions||{};return(r.hasOwnProperty(t)?r:e.editoptions||{})[t]},encodeAttr=function(e){return String(e).replace(/\'/g,"&#39;")},parseCheckboxOptions=function(e){function t(e){return getOptionByName(o,e)}function r(e){return"<i class='"+encodeAttr(e)+"'"+l+"></i>"}var i,a,o=e.colModel||e.cm,l=!1!==o.title?" title='"+encodeAttr(e.colName||o.name)+"'":"",e=t("checkedClass"),n=t("uncheckedClass"),s=t("value"),d="string"==typeof s&&s.split(":")[0]||"Yes",s="string"==typeof s&&s.split(":")[1]||"No",c=t("disabled"),u=(void 0===c&&(c=jgrid.formatter.checkbox.disabled),base.getIconRes.call(this,"checkbox.checked")),p=base.getIconRes.call(this,"checkbox.checkedClasses"),h=base.getIconRes.call(this,"checkbox.unchecked");return!0===c&&(e||n||u||h)?(i=r(e||u),a=r(n||h),e=p||e||u):(i="<input type='checkbox' checked='checked'"+(l+=!(e="")===c?" disabled='disabled'":"")+" />",a="<input type='checkbox'"+l+" />"),{checkedClasses:e,checked:i,unchecked:a,yes:d,no:s}},yesObject={1:1,x:1,true:1,yes:1,y:1,on:1},noObject={0:1,false:1,no:1,n:1,off:1},$FnFmatter=($.extend(!0,jgrid,{formatter:{date:{parseRe:/[#%\\\/:_;.,\t\s\-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO"},reformatAfterEdit:!0,userLocalTime:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0,defaultValue:!1},idName:"id"},cmTemplate:{integerStr:{formatter:"integer",align:"right",sorttype:"integer",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},integer:{formatter:"integer",align:"right",sorttype:"integer",convertOnSave:function(e){e=e.newValue;return isNaN(e)?e:parseInt(e,10)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},numberStr:{formatter:"number",align:"right",sorttype:"number",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},number:{formatter:"number",align:"right",sorttype:"number",convertOnSave:function(e){e=e.newValue;return isNaN(e)?e:parseFloat(e)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},booleanCheckbox:{align:"center",formatter:"checkbox",sorttype:"boolean",edittype:"checkbox",editoptions:{value:"true:false",defaultValue:"false"},convertOnSave:function(e){var t=e.newValue,e=parseCheckboxOptions.call(this,e),r=String(t).toLowerCase();return yesObject[r]||r===e.yes.toLowerCase()?t=!0:!noObject[r]&&r!==e.no.toLowerCase()||(t=!1),t},stype:"checkbox",searchoptions:{sopt:["eq"],value:"true:false"}},actions:function(){return{formatter:"actions",width:(null!=this.p&&(base.isInCommonIconClass.call(this,"fa")||base.isInCommonIconClass.call(this,"glyphicon"))?$(this).jqGrid("isBootstrapGuiStyle")?45:39:40)+(jgrid.cellWidth()?5:0),align:"center",label:"",autoResizable:!1,title:!1,frozen:!0,fixed:!0,hidedlg:!0,resizable:!1,sortable:!1,search:!1,editable:!1,viewable:!1}}}}),jgrid.cmTemplate.booleanCheckboxFa=jgrid.cmTemplate.booleanCheckbox,$.extend(fmatter,{isObject:function(e){return e&&("object"==typeof e||$.jgrid.isFunction(e))||!1},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isValue:function(e){return this.isObject(e)||"string"==typeof e||this.isNumber(e)||"boolean"==typeof e},isEmpty:function(e){return!("string"!=typeof e&&this.isValue(e)||this.isValue(e)&&""!==$.jgrid.trim(e).replace(/&nbsp;/gi,"").replace(/&#160;/gi,""))},NumberFormat:function(e,t){var r=fmatter.isNumber;if(r(e)||(e*=1),r(e)){var i=e<0,a=String(e),o=t.decimalSeparator||".";if(r(t.decimalPlaces)){var l=t.decimalPlaces,n=(a=String(Number(Math.round(e+"e"+l)+"e-"+l))).lastIndexOf(".");if(0<l)for(n<0?n=(a+=o).length-1:"."!==o&&(a=a.replace(".",o));a.length-1-n<l;)a+="0"}if(t.thousandsSeparator){for(var s=t.thousandsSeparator,d=(n=-1<(n=a.lastIndexOf(o))?n:a.length,void 0===t.decimalSeparator?"":a.substring(n)),c=-1,u=n;0<u;u--)++c%3==0&&u!==n&&(!i||1<u)&&(d=s+d),d=a.charAt(u-1)+d;a=d}return a}return e}}),function(e,t,r,i,a){var o=t;r=$.extend({},getGridRes.call($(this),"formatter"),r);try{o=$.fn.fmatter[e].call(this,t,r,i,a)}catch(e){}return o}),defaultFormat=($.fn.fmatter=$FnFmatter,$FnFmatter.getCellBuilder=function(e,t,r){e=null!=$.fn.fmatter[e]?$.fn.fmatter[e].getCellBuilder:null;return $.jgrid.isFunction(e)?e.call(this,$.extend({},getGridRes.call($(this),"formatter"),t),r):null},$FnFmatter.defaultFormat=function(e,t){return fmatter.isValue(e)&&""!==e?e:t.defaultValue||"&#160;"},$FnFmatter.defaultFormat),formatCheckboxValue=function(e,t,r){return void 0!==e&&!fmatter.isEmpty(e)||(e=r=void 0===(r=getOptionByName(r,"defaultValue"))?t.no:r),e=String(e).toLowerCase(),yesObject[e]||e===t.yes.toLowerCase()?t.checked:t.unchecked},insertPrefixAndSuffix=($FnFmatter.email=function(e,t){return fmatter.isEmpty(e)?defaultFormat(e,t):"<a href='mailto:"+encodeAttr(e)+"'>"+e+"</a>"},$FnFmatter.checkbox=function(e,t){var r=parseCheckboxOptions.call(this,t);return formatCheckboxValue(e,r,t.colModel)},$FnFmatter.checkbox.getCellBuilder=function(e){var t,r=e.colModel;return e.colName=e.colName||this.p.colNames[e.pos],t=parseCheckboxOptions.call(this,e),function(e){return formatCheckboxValue(e,t,r)}},$FnFmatter.checkbox.unformat=function(e,t,r){t=parseCheckboxOptions.call(this,t),r=$(r);return(t.checkedClasses?jgrid.hasAllClasses(r.children("i,svg"),t.checkedClasses):r.children("input").is(":checked"))?t.yes:t.no},$FnFmatter.checkboxFontAwesome4=$FnFmatter.checkbox,$FnFmatter.checkboxFontAwesome4.getCellBuilder=$FnFmatter.checkbox.getCellBuilder,$FnFmatter.checkboxFontAwesome4.unformat=$FnFmatter.checkbox.unformat,$FnFmatter.link=function(e,t){var r=t.colModel,i="",t={target:t.target};return(t=null!=r?$.extend({},t,r.formatoptions||{}):t).target&&(i="target="+t.target),fmatter.isEmpty(e)?defaultFormat(e,t):"<a "+i+" href='"+encodeAttr(e)+"'>"+e+"</a>"},$FnFmatter.showlink=function(t,r,i){function e(e){return $.jgrid.isFunction(e)?e.call(l,{cellValue:t,rowid:r.rowId,rowData:i,options:s}):e||""}var a,o,l=this,n=r.colModel,s={baseLinkUrl:r.baseLinkUrl,showAction:r.showAction,addParam:r.addParam||"",target:r.target,idName:r.idName,hrefDefaultValue:"#"},d="";return(s=null!=n?$.extend({},s,n.formatoptions||{}):s).target&&(d="target="+e(s.target)),n=e(s.baseLinkUrl)+e(s.showAction),a=s.idName?encodeURIComponent(e(s.idName))+"="+encodeURIComponent(e(s.rowId)||r.rowId):"","object"==typeof(o=e(s.addParam))&&null!==o&&(o=(a?"&":"")+$.param(o)),""===(n+=a||o?"?"+a+o:"")&&(n=e(s.hrefDefaultValue)),"string"==typeof t||fmatter.isNumber(t)||$.jgrid.isFunction(s.cellValue)?"<a "+d+" href='"+encodeAttr(n)+"'>"+($.jgrid.isFunction(s.cellValue)?e(s.cellValue):t)+"</a>":defaultFormat(t,s)},$FnFmatter.showlink.getCellBuilder=function(e){var d={baseLinkUrl:e.baseLinkUrl,showAction:e.showAction,addParam:e.addParam||"",target:e.target,idName:e.idName,hrefDefaultValue:"#"},e=e.colModel;return null!=e&&(d=$.extend({},d,e.formatoptions||{})),function(t,e,r){function i(e){return $.jgrid.isFunction(e)?e.call(l,{cellValue:t,rowid:n,rowData:r,options:d}):e||""}var a,o,l=this,n=e.rowId,s="";return d.target&&(s="target="+i(d.target)),a=i(d.baseLinkUrl)+i(d.showAction),e=d.idName?encodeURIComponent(i(d.idName))+"="+encodeURIComponent(i(n)||e.rowId):"","object"==typeof(o=i(d.addParam))&&null!==o&&(o=(e?"&":"")+$.param(o)),""===(a+=e||o?"?"+e+o:"")&&(a=i(d.hrefDefaultValue)),"string"==typeof t||fmatter.isNumber(t)||$.jgrid.isFunction(d.cellValue)?"<a "+s+" href='"+encodeAttr(a)+"'>"+($.jgrid.isFunction(d.cellValue)?i(d.cellValue):t)+"</a>":defaultFormat(t,d)}},$FnFmatter.showlink.pageFinalization=function(e){function t(e){var t=(r=$(this).closest("tr.jqgrow>td")).parent(),r=r[0].cellIndex,i=o.colModel[r];if(0<t.length)return i.formatoptions.onClick.call(a[0],{iCol:r,iRow:t[0].rowIndex,rowid:t.attr("id"),cm:i,cmName:i.name,cellValue:$(this).text(),a:this,event:e})}var r,i,a=$(this),o=this.p,l=o.colModel[e],n=o.autoResizing.wrapperClassName,s=this.rows,d=s.length;if(null!=l.formatoptions&&$.jgrid.isFunction(l.formatoptions.onClick))for(r=0;r<d;r++)i=s[r],$(i).hasClass("jqgrow")&&(i=i.cells[e],null!=(i=l.autoResizable&&null!=i&&$(i.firstChild).hasClass(n)?i.firstChild:i))&&$(i.firstChild).on("click",t)},function(e,t){return e=t.prefix?t.prefix+e:e,t.suffix?e+t.suffix:e}),numberHelper=function(e,t,r){var i=t.colModel,t=$.extend({},t[r]);return null!=i&&(t=$.extend({},t,i.formatoptions||{})),fmatter.isEmpty(e)?insertPrefixAndSuffix(t.defaultValue,t):insertPrefixAndSuffix(fmatter.NumberFormat(e,t),t)},numberCellBuilder=($FnFmatter.integer=function(e,t){return numberHelper(e,t,"integer")},$FnFmatter.number=function(e,t){return numberHelper(e,t,"number")},$FnFmatter.currency=function(e,t){return numberHelper(e,t,"currency")},function(e,t){var r=e.colModel,i=$.extend({},e[t]),a=(null!=r&&(i=$.extend({},i,r.formatoptions||{})),fmatter.NumberFormat),o=i.defaultValue?insertPrefixAndSuffix(i.defaultValue,i):"";return function(e){return fmatter.isEmpty(e)?o:insertPrefixAndSuffix(a(e,i),i)}});$FnFmatter.integer.getCellBuilder=function(e){return numberCellBuilder(e,"integer")},$FnFmatter.number.getCellBuilder=function(e){return numberCellBuilder(e,"number")},$FnFmatter.currency.getCellBuilder=function(e){return numberCellBuilder(e,"currency")},$FnFmatter.date=function(e,t,r,i){var a=t.colModel,t=$.extend({},t.date);return!(t=null!=a?$.extend({},t,a.formatoptions||{}):t).reformatAfterEdit&&"edit"===i||fmatter.isEmpty(e)?defaultFormat(e,t):jgrid.parseDate.call(this,t.srcformat,e,t.newformat,t)},$FnFmatter.date.getCellBuilder=function(e,t){var r=$.extend({},e.date),i=(null!=e.colModel&&(r=$.extend({},r,e.colModel.formatoptions||{})),jgrid.parseDate),a=r.srcformat,o=r.newformat;return r.reformatAfterEdit||"edit"!==t?function(e){return fmatter.isEmpty(e)?defaultFormat(e,r):i.call(this,a,e,o,r)}:function(e){return defaultFormat(e,r)}},$FnFmatter.select=function(e,t){var r,i=[],t=t.colModel,a=$.extend({},t.editoptions||{},t.formatoptions||{}),o="function"==typeof a.value?a.value():a.value,l=a.separator||":",t=a.delimiter||";";if(o){var n,s=!0===a.multiple,d=[],c=function(e,t){if(0<t)return e};if(s&&(d=$.map(String(e).split(","),function(e){return $.jgrid.trim(e)})),"string"==typeof o){for(var u,p=o.split(t),h=0;h<p.length;h++)if(2<(n=p[h].split(l)).length&&(n[1]=$.map(n,c).join(l)),u=$.jgrid.trim(n[0]),a.defaultValue===u&&(r=n[1]),s)-1<$.inArray(u,d)&&i.push(n[1]);else if(u===$.jgrid.trim(e)){i=[n[1]];break}}else fmatter.isObject(o)&&(r=o[a.defaultValue],i=s?$.map(d,function(e){return o[e]}):[void 0===o[e]?"":o[e]])}return""!==(e=i.join(", "))?e:void 0!==a.defaultValue?r:defaultFormat(e,a)},$FnFmatter.select.getCellBuilder=function(e){function t(e,t){if(0<t)return e}var a,r,i,o,e=e.colModel,l=$FnFmatter.defaultFormat,n=$.extend({},e.editoptions||{},e.formatoptions||{}),e="function"==typeof n.value?n.value():n.value,s=n.separator||":",d=n.delimiter||";",c=void 0!==n.defaultValue,u=!0===n.multiple,p={};if("string"==typeof e)for(o=(i=e.split(d)).length-1;0<=o;o--)2<(r=i[o].split(s)).length&&(r[1]=$.map(r,t).join(s)),p[$.jgrid.trim(r[0])]=r[1];else{if(!fmatter.isObject(e))return function(e){return e?String(e):l(e,n)};p=e}return c&&(a=p[n.defaultValue]),u?function(e){for(var t=[],r=$.map(String(e).split(","),function(e){return $.jgrid.trim(e)}),i=0;i<r.length;i++)e=r[i],p.hasOwnProperty(e)&&t.push(p[e]);return""!==(e=t.join(", "))?e:c?a:l(e,n)}:function(e){var t=p[String(e)];return""!==t&&void 0!==t?t:c?a:l(e,n)}},$FnFmatter.rowactions=function(e,t){var r,i,a,o,l=$(this).closest("tr.jqgrow>td"),n=l.parent(),s=n.attr("id"),d=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),c=$("#"+jgrid.jqID(d)),u=c[0],d=u.p,p=jgrid.getRelativeRect.call(u,n).top,l=d.colModel[l[0].cellIndex],h=$.extend(!0,{extraparam:{}},jgrid.actionsNav||{},d.actionsNavOptions||{},l.formatoptions||{});switch(void 0!==d.editOptions&&(h.editOptions=$.extend(!0,h.editOptions||{},d.editOptions)),void 0!==d.delOptions&&(h.delOptions=d.delOptions),n.hasClass("jqgrid-new-row")&&(h.extraparam[d.prmNames.oper]=d.prmNames.addoper),o={keys:h.keys,oneditfunc:h.onEdit,successfunc:h.onSuccess,url:h.url,extraparam:h.extraparam,aftersavefunc:h.afterSave,errorfunc:h.onError,afterrestorefunc:h.afterRestore,restoreAfterError:h.restoreAfterError,mtype:h.mtype},!d.multiselect&&s!==d.selrow||d.multiselect&&$.inArray(s,d.selarrrow)<0?c.jqGrid("setSelection",s,!0,e):jgrid.fullBoolFeedback.call(u,"onSelectRow","jqGridSelectRow",s,!0,e),t){case"edit":c.jqGrid("editRow",s,o);break;case"save":c.jqGrid("saveRow",s,o);break;case"cancel":c.jqGrid("restoreRow",s,h.afterRestore);break;case"del":h.delOptions=h.delOptions||{},void 0===h.delOptions.top&&(h.delOptions.top=p),c.jqGrid("delGridRow",s,h.delOptions);break;case"formedit":h.editOptions=h.editOptions||{},void 0===h.editOptions.top&&(h.editOptions.top=p,h.editOptions.recreateForm=!0),c.jqGrid("editGridRow",s,h.editOptions);break;default:if(null!=h.custom&&0<h.custom.length)for(i=h.custom.length,r=0;r<i;r++)(a=h.custom[r]).action===t&&$.jgrid.isFunction(a.onClick)&&a.onClick.call(u,{rowid:s,event:e,action:t,options:a})}return e.stopPropagation&&e.stopPropagation(),!1},$FnFmatter.actions=function(e,t,r,i){var a,o,l,n,s,d,c=t.rowId,u="",p=$(this),h={},f=getGridRes.call(p,"edit")||{},g=$.extend({editbutton:!0,delbutton:!0,editformbutton:!1,commonIconClass:"ui-icon",editicon:"ui-icon-pencil",delicon:"ui-icon-trash",saveicon:"ui-icon-disk",cancelicon:"ui-icon-cancel",savetitle:f.bSubmit||"",canceltitle:f.bCancel||""},getGridRes.call(p,"nav")||{},jgrid.nav||{},this.p.navOptions||{},getGridRes.call(p,"actionsNav")||{},jgrid.actionsNav||{},this.p.actionsNavOptions||{},(t.colModel||{}).formatoptions||{}),m=function(e){return jgrid.mergeCssClasses(g.commonIconClass,g[e+"icon"])},v=[{action:"edit",actionName:"formedit",display:g.editformbutton},{action:"edit",display:!g.editformbutton&&g.editbutton},{action:"del",idPrefix:"Delete",display:g.delbutton},{action:"save",display:g.editformbutton||g.editbutton,hidden:!0},{action:"cancel",display:g.editformbutton||g.editbutton,hidden:!0}],b=null!=g.custom?g.custom.length-1:-1;if(void 0===c||fmatter.isEmpty(c))return"";if($.jgrid.isFunction(g.isDisplayButtons))try{h=g.isDisplayButtons.call(this,g,r,i)||{}}catch(e){}for(;0<=b;)v["first"===(o=g.custom[b--]).position?"unshift":"push"](o);for(a=0,b=v.length;a<b;a++)!1!==(l=$.extend({},v[a],h[v[a].action]||{})).display&&(u+=(d=s=n=void 0,n=(l=l).action,s=l.actionName||n,d=void 0!==l.idPrefix?l.idPrefix:n.charAt(0).toUpperCase()+n.substring(1),"<div title='"+encodeAttr(g[n+"title"])+(l.hidden?"' style='display:none;":"")+"' class='"+encodeAttr(p.jqGrid("getGuiStyles","actionsButton","ui-pg-div ui-inline-"+n))+"' "+(null!==d?"id='j"+encodeAttr(d+"Button_"+c):"")+"' data-jqactionname=\""+s+'" '+(l.noHovering?"":'\' data-jqhovering="1" ')+"><span class='"+encodeAttr(m(n))+"'></span></div>"));return"<div class='"+encodeAttr(p.jqGrid("getGuiStyles","actionsDiv","ui-jqgrid-actions"))+"'>"+u+"</div>"},$FnFmatter.actions.pageFinalization=function(e){function t(e,t){return t=d.jqGrid("getGridRowById",t),v(!0,t),!1}function r(e,t){return t=d.jqGrid("getGridRowById",t),v(!1,t),!1}function i(e,t){null!=(e=t&&null!=e&&$(e.firstChild).hasClass(p)?e.firstChild:e)&&($(e.firstChild).on("click",y),$(e.firstChild).children("div.ui-pg-div").on("mouseover",b).on("mouseout",w))}function a(e,t){var r=c.iColByName[n];i(t.tr.cells[r],c.colModel[r].autoResizable)}var o,l,n,s,d=$(this),c=this.p,u=c.colModel[e],p=c.autoResizing.wrapperClassName,h=d.jqGrid("getGuiStyles","states.hover"),f=this.rows,g=this.grid.fbRows,m=f.length,v=(s=u.name,function(e,t){for(var r,i=0,a=c.colModel,o=a.length,l=c.iColByName[s],n=0;n<o&&!0===a[n].frozen;n++)i=n;null!=t&&null!=t.cells&&(r=$(t.cells[l]).children(".ui-jqgrid-actions"),a[l].frozen&&c.frozenColumns&&l<=i&&(r=r.add($(d[0].grid.fbRows[t.rowIndex].cells[l]).children(".ui-jqgrid-actions"))),e?(r.find(">.ui-inline-edit,>.ui-inline-del").show(),r.find(">.ui-inline-save,>.ui-inline-cancel").hide()):(r.find(">.ui-inline-edit,>.ui-inline-del").hide(),r.find(">.ui-inline-save,>.ui-inline-cancel").show()))}),b=function(e){1===$(e.target).closest("div.ui-pg-div").data("jqhovering")&&$(this).addClass(h)},w=function(e){1===$(e.target).closest("div.ui-pg-div").data("jqhovering")&&$(this).removeClass(h)},y=function(e){return $FnFmatter.rowactions.call(this,e,$(e.target).closest("div.ui-pg-div").data("jqactionname"))};n=u.name;for(null!=u.formatoptions&&u.formatoptions.editformbutton||(d.off("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",t),d.on("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",t),d.off("jqGridInlineEditRow.jqGridFormatter",r),d.on("jqGridInlineEditRow.jqGridFormatter",r),d.off("jqGridAfterAddRow.jqGridFormatter",a),d.on("jqGridAfterAddRow.jqGridFormatter",a)),o=0;o<m;o++)l=f[o],$(l).hasClass("jqgrow")&&(i(l.cells[e],u.autoResizable),null!=g)&&null!=g[o]&&i(g[o].cells[e],u.autoResizable)},$.unformat=function(e,t,r,i){var a=t.colModel,o=a.formatter,l=this.p,n=a.formatoptions||{},s=a.unformat||$FnFmatter[o]&&$FnFmatter[o].unformat;if(e instanceof jQuery&&0<e.length&&(e=e[0]),l.treeGrid&&null!=e&&$(e.firstChild).hasClass("tree-wrap")&&($(e.lastChild).hasClass("cell-wrapper")||$(e.lastChild).hasClass("cell-wrapperleaf"))&&(e=e.lastChild),a.autoResizable&&null!=e&&$(e.firstChild).hasClass(l.autoResizing.wrapperClassName)&&(e=e.firstChild),void 0!==s&&$.jgrid.isFunction(s))p=s.call(this,$(e).text(),t,e);else if(void 0!==o&&"string"==typeof o){var d=$(this),c=function(e,t){return void 0!==n[t]?n[t]:getGridRes.call(d,"formatter."+e+"."+t)},u=function(e,t){e=c(e,"thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return t.replace(new RegExp(e,"g"),"")};switch(o){case"integer":p=u("integer",$(e).text());break;case"number":p=u("number",$(e).text()).replace(c("number","decimalSeparator"),".");break;case"currency":var p=$(e).text(),h=c("currency","prefix"),f=c("currency","suffix");h&&h.length&&(p=p.substr(h.length)),p=u("number",p=f&&f.length?p.substr(0,p.length-f.length):p).replace(c("number","decimalSeparator"),".");break;case"checkbox":p=$FnFmatter.checkbox.unformat(e,t,e);break;case"select":p=$.unformat.select(e,t,r,i);break;case"actions":return"";default:p=$(e).text()}}return p=void 0!==p?p:!0===i?$(e).text():jgrid.htmlDecode($(e).html())},$.unformat.select=function(e,t,r,i){var a=[],o=$(e).text(),e=t.colModel;if(!0===i)return o;var t=$.extend({},e.editoptions||{},e.formatoptions||{}),l=void 0===t.separator?":":t.separator,i=void 0===t.delimiter?";":t.delimiter;if(t.value){var n,s="function"==typeof t.value?t.value():t.value,d=!0===t.multiple,c=[],u=function(e,t){if(0<t)return e};if(d&&(c=o.split(","),c=$.map(c,function(e){return $.jgrid.trim(e)})),"string"==typeof s){for(var p=s.split(i),h=0,f=0;f<p.length;f++)if(2<(n=p[f].split(l)).length&&(n[1]=$.map(n,u).join(l)),d)-1<$.inArray($.jgrid.trim(n[1]),c)&&(a[h]=n[0],h++);else if($.jgrid.trim(n[1])===$.jgrid.trim(o)){a[0]=n[0];break}}else(fmatter.isObject(s)||Array.isArray(s))&&(d||(c[0]=o),a=$.map(c,function(r){var i;if($.each(s,function(e,t){if(t===r)return i=e,!1}),void 0!==i)return i}));return a.join(", ")}return o||""},$.unformat.date=function(e,t){t=$.extend(!0,{},getGridRes.call($(this),"formatter.date"),jgrid.formatter.date||{},t.formatoptions||{});return fmatter.isEmpty(e)?"":jgrid.parseDate.call(this,t.newformat,e,t.srcformat,t)}});
//# sourceMappingURL=jquery.jqgrid.min.js.map